<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0">
<channel>
        <title>里克的自习室</title>
        <description>里克的自习室 - 里克</description>
        <link>http://liwei78.github.io</link>
        <link>http://liwei78.github.io</link>
        <lastBuildDate>2013-12-07T16:32:54+08:00</lastBuildDate>
        <pubDate>2013-12-07T16:32:54+08:00</pubDate>
        <ttl>1800</ttl>


        <item>
                <title>Rails Routes中的两件事</title>
                <description>
&lt;p&gt;写在前面：在看devise的源码过程中，发现Devise在做Routes Mapping时，使用了Rails自己的@constraints。于是查查文档，笔记两件事。&lt;/p&gt;

&lt;p&gt;一下内容来自 Ruby on Rails 4.0.1， ActionDispatch::Routing::Mapper::Scoping 。&lt;/p&gt;

&lt;p&gt;位置：actionpack/lib/action_dispatch/routing/mapper.rb&lt;/p&gt;

&lt;h1 id=&quot;&quot;&gt;第一件事：&lt;/h1&gt;

&lt;p&gt;这种写法很熟悉的。&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='ruby'&gt;&lt;span class='n'&gt;namespace&lt;/span&gt; &lt;span class='s2'&gt;&amp;quot;admin&amp;quot;&lt;/span&gt; &lt;span class='k'&gt;do&lt;/span&gt;
  &lt;span class='n'&gt;resources&lt;/span&gt; &lt;span class='ss'&gt;:posts&lt;/span&gt;&lt;span class='p'&gt;,&lt;/span&gt; &lt;span class='ss'&gt;:comments&lt;/span&gt;
&lt;span class='k'&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;那么，访问&lt;code&gt;/posts&lt;/code&gt;时，调用 &lt;code&gt;Admin::PostsController&lt;/code&gt; 时，如何写呢？&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='ruby'&gt;&lt;span class='n'&gt;scope&lt;/span&gt; &lt;span class='ss'&gt;module&lt;/span&gt;&lt;span class='p'&gt;:&lt;/span&gt; &lt;span class='s2'&gt;&amp;quot;admin&amp;quot;&lt;/span&gt; &lt;span class='k'&gt;do&lt;/span&gt;
  &lt;span class='n'&gt;resources&lt;/span&gt; &lt;span class='ss'&gt;:posts&lt;/span&gt;
&lt;span class='k'&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;或者&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='ruby'&gt;&lt;span class='n'&gt;resources&lt;/span&gt; &lt;span class='ss'&gt;:posts&lt;/span&gt;&lt;span class='p'&gt;,&lt;/span&gt; &lt;span class='ss'&gt;module&lt;/span&gt;&lt;span class='p'&gt;:&lt;/span&gt; &lt;span class='s2'&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;当然，反过来，访问 &lt;code&gt;/admin/posts&lt;/code&gt; 时，调用 &lt;code&gt;PostsController&lt;/code&gt;，就这么写：&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='ruby'&gt;&lt;span class='n'&gt;scope&lt;/span&gt; &lt;span class='s2'&gt;&amp;quot;/admin&amp;quot;&lt;/span&gt; &lt;span class='k'&gt;do&lt;/span&gt;
  &lt;span class='n'&gt;resources&lt;/span&gt; &lt;span class='ss'&gt;:posts&lt;/span&gt;
&lt;span class='k'&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;或者&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='ruby'&gt;&lt;span class='n'&gt;resources&lt;/span&gt; &lt;span class='ss'&gt;:posts&lt;/span&gt;&lt;span class='p'&gt;,&lt;/span&gt; &lt;span class='ss'&gt;path&lt;/span&gt;&lt;span class='p'&gt;:&lt;/span&gt; &lt;span class='s2'&gt;&amp;quot;/admin/posts&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h1 id=&quot;_2&quot;&gt;第二件事：&lt;/h1&gt;

&lt;p&gt;如何限制访问？比如允许 &lt;code&gt;/posts/1.1&lt;/code&gt; 访问，而禁止 &lt;code&gt;/posts/1&lt;/code&gt;，那么代码如下：&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='ruby'&gt;&lt;span class='n'&gt;constraints&lt;/span&gt;&lt;span class='p'&gt;(&lt;/span&gt;&lt;span class='nb'&gt;id&lt;/span&gt;&lt;span class='p'&gt;:&lt;/span&gt; &lt;span class='sr'&gt;/\d+\.\d+/&lt;/span&gt;&lt;span class='p'&gt;)&lt;/span&gt; &lt;span class='k'&gt;do&lt;/span&gt;
  &lt;span class='n'&gt;resources&lt;/span&gt; &lt;span class='ss'&gt;:posts&lt;/span&gt;
&lt;span class='k'&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;在其他的资源引用上，也可以做如下限制：&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='ruby'&gt;&lt;span class='n'&gt;resources&lt;/span&gt; &lt;span class='ss'&gt;:posts&lt;/span&gt; &lt;span class='k'&gt;do&lt;/span&gt;
  &lt;span class='n'&gt;constraints&lt;/span&gt;&lt;span class='p'&gt;(&lt;/span&gt;&lt;span class='n'&gt;post_id&lt;/span&gt;&lt;span class='p'&gt;:&lt;/span&gt; &lt;span class='sr'&gt;/\d+\.\d+/&lt;/span&gt;&lt;span class='p'&gt;)&lt;/span&gt; &lt;span class='k'&gt;do&lt;/span&gt;
    &lt;span class='n'&gt;resources&lt;/span&gt; &lt;span class='ss'&gt;:comments&lt;/span&gt;
  &lt;span class='k'&gt;end&lt;/span&gt;
&lt;span class='k'&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;限制ip访问，比如 只允许 192.168.* 访问资源：&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='ruby'&gt;&lt;span class='n'&gt;constraints&lt;/span&gt;&lt;span class='p'&gt;(&lt;/span&gt;&lt;span class='ss'&gt;ip&lt;/span&gt;&lt;span class='p'&gt;:&lt;/span&gt; &lt;span class='sr'&gt;/192\.168\.\d+\.\d+/&lt;/span&gt;&lt;span class='p'&gt;)&lt;/span&gt; &lt;span class='k'&gt;do&lt;/span&gt;
  &lt;span class='n'&gt;resources&lt;/span&gt; &lt;span class='ss'&gt;:posts&lt;/span&gt;
&lt;span class='k'&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;动态请求的匹配，比如下面的这个限制：&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='ruby'&gt;&lt;span class='n'&gt;constraints&lt;/span&gt;&lt;span class='p'&gt;(&lt;/span&gt;&lt;span class='nb'&gt;lambda&lt;/span&gt; &lt;span class='p'&gt;{&lt;/span&gt; &lt;span class='o'&gt;|&lt;/span&gt;&lt;span class='n'&gt;req&lt;/span&gt;&lt;span class='o'&gt;|&lt;/span&gt; &lt;span class='n'&gt;req&lt;/span&gt;&lt;span class='o'&gt;.&lt;/span&gt;&lt;span class='n'&gt;env&lt;/span&gt;&lt;span class='o'&gt;[&lt;/span&gt;&lt;span class='s2'&gt;&amp;quot;HTTP_USER_AGENT&amp;quot;&lt;/span&gt;&lt;span class='o'&gt;]&lt;/span&gt; &lt;span class='o'&gt;=~&lt;/span&gt; &lt;span class='sr'&gt;/iPhone/&lt;/span&gt; &lt;span class='p'&gt;})&lt;/span&gt; &lt;span class='k'&gt;do&lt;/span&gt;
  &lt;span class='n'&gt;resources&lt;/span&gt; &lt;span class='ss'&gt;:iphones&lt;/span&gt;
&lt;span class='k'&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;当然你也可以把它放到model里：&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='ruby'&gt;&lt;span class='k'&gt;class&lt;/span&gt; &lt;span class='nc'&gt;Iphone&lt;/span&gt;
  &lt;span class='k'&gt;def&lt;/span&gt; &lt;span class='nc'&gt;self&lt;/span&gt;&lt;span class='o'&gt;.&lt;/span&gt;&lt;span class='nf'&gt;matches?&lt;/span&gt;&lt;span class='p'&gt;(&lt;/span&gt;&lt;span class='n'&gt;request&lt;/span&gt;&lt;span class='p'&gt;)&lt;/span&gt;
    &lt;span class='n'&gt;request&lt;/span&gt;&lt;span class='o'&gt;.&lt;/span&gt;&lt;span class='n'&gt;env&lt;/span&gt;&lt;span class='o'&gt;[&lt;/span&gt;&lt;span class='s2'&gt;&amp;quot;HTTP_USER_AGENT&amp;quot;&lt;/span&gt;&lt;span class='o'&gt;]&lt;/span&gt; &lt;span class='o'&gt;=~&lt;/span&gt; &lt;span class='sr'&gt;/iPhone/&lt;/span&gt;
  &lt;span class='k'&gt;end&lt;/span&gt;
&lt;span class='k'&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;下面这句话有待验证，暂时不译：&lt;/p&gt;

&lt;p&gt;An expected place for this code would be lib/constraints.&lt;/p&gt;

&lt;p&gt;This class is then used like this:&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='ruby'&gt;&lt;span class='n'&gt;constraints&lt;/span&gt;&lt;span class='p'&gt;(&lt;/span&gt;&lt;span class='no'&gt;Iphone&lt;/span&gt;&lt;span class='p'&gt;)&lt;/span&gt; &lt;span class='k'&gt;do&lt;/span&gt;
  &lt;span class='n'&gt;resources&lt;/span&gt; &lt;span class='ss'&gt;:iphones&lt;/span&gt;
&lt;span class='k'&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
                <link>http://liwei78.github.io/blog/rails-4-routes-two-notes</link>
                <guid>http://liwei78.github.io/blog/rails-4-routes-two-notes</guid>
                <pubDate>2013-11-03T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>(转载)Rails 與 Merb 合併背後的故事</title>
                <description>
&lt;p&gt;原文来自Blog.XDite.net，可惜打不开了，这里保存一下，顺便表达一下对这个女生的敬意！！！！看到本人我真的不知道这个胖胖的像我初中同桌的女生就是XDite，我前几天还在仔细读她的文章，学习markdown呢。&lt;/p&gt;

&lt;p&gt;原文发表于2010年3月。&lt;/p&gt;

&lt;p&gt;剛剛有感而發，在公司開發的 microblog上寫了一段 Rails 與 Merb 合併的故事，以作為一些事情的借鏡。後來覺得寫太長了，所以就乾脆整理一下貼過來…&lt;/p&gt;

&lt;p&gt;Merb 當初是為了要解決 Rails 沒辦法解決的問題，比如說上傳檔案會造成整個網站 hang 住才開始開發的。在 Yehuda 當初設計的哲學之中，他認為 Framework 內部要能夠 modularity 。同時要能實現 ORM Agnosticism，甚至不只 ORM ，包括 javascript library 之類的也都必須要可以這　做。最後幹出了一套 merb。於是在 2008 年逐漸形成了 Rails 與 Merb 之爭。&lt;/p&gt;

&lt;p&gt;但 Merb 越來越開發到最後，core team 發現到一件事，”過於自由” 並不會帶來開發上的便利，反而形成 Merb 內部 component dependency 的 conflict。同時，對於寫出一套 Merb application，不像 Rails 一樣，大家並沒有很清楚的開發標準與 Best Practice，而光看教學文件，因為版本與寫法的關係，造成有心踏入 merb 的開發者一天到晚踩中難以解決的地雷。&lt;/p&gt;

&lt;p&gt;更糟糕的是，跳槽來 Merb 的人都是前 Rails 開發者，雖然他們多半是不滿 Rails 的束縛過來的，但他們過來之後，對 Merb 最大的抱怨變成：Merb 並沒有 Rails 那　便利。這個沒有，那個沒有 ….&lt;/p&gt;

&lt;p&gt;剛開始，Merb 的核心團隊，對於這些抱怨，解決之道，就是你喊缺，我們就加！但寫到最後越來越不對勁。他們越來越接近在「重寫」一個 Rails 而已。但這些開發者並不會感激他們。開發者還是只會抱怨 Merb 相比起 Rails「還」缺了甚　。&lt;/p&gt;

&lt;p&gt;加功能，並不會讓 Merb 從此以後取代 Rails，只是永無止盡的追趕和重造輪子，但是開發者還是只是會繼續抱怨。而且，一個 Community 再大，力量也只撐的起一個「主流」Framework。Merb 與 Rails 之爭，相當的損害了社群的開發元氣。&lt;/p&gt;

&lt;p&gt;Yehuda 覺得這樣發展下去並不是他的本意。於是找上了 Rails core team 談。一談之下，才達成了現在的合併共識。Rails Core Team 覺得 Yehuda 提的 modulity 與 API 是很好的提議，只是他們「不在乎」。這個不在乎並不是真的不在乎，而是 Rails 的 goal 是壓縮開發的 cost，讓 convention 達到最大化，在此目標之下，要做這件事並沒有太大的實質效益，而且他們這些人的力量與技術能力也不夠做這件事。&lt;/p&gt;

&lt;p&gt;而 Yehuda 的原意是他要解決 Rails 沒有辦法達成的事，同時帶進他覺得 modern framework 應該要有的設計，這樣才能讓整個 framework scable，連帶 application 也 scable。而非玩到如今的局面 :「 硬是重造一個 Rails」。既然 Rails core team 也覺得 Yehuda 提的很好很重要，只是他們沒能力去做。而如今 Yehuda 也有能力有意願去做，那就讓他加入 Rails core team 做這件事吧。&lt;/p&gt;

&lt;p&gt;所以才造就現在看到的偉大 framework : Rails 3。&lt;/p&gt;

&lt;p&gt;apply 到一些場景，真是感觸良多啊 /_\&lt;/p&gt;
</description>
                <link>http://liwei78.github.io/blog/rails-and-merb</link>
                <guid>http://liwei78.github.io/blog/rails-and-merb</guid>
                <pubDate>2013-10-29T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>Rack, 我忽视你了</title>
                <description>
&lt;h1 id=&quot;rack&quot;&gt;什么是Rack&lt;/h1&gt;

&lt;p&gt;Rack provides a minimal, modular and adaptable interface for developing web applications in Ruby. By wrapping HTTP requests and responses in the simplest way possible, it unifies and distills the API for web servers, web frameworks, and software in between (the so-called middleware) into a single method call.&lt;/p&gt;

&lt;p&gt;大意：Rack是个api，这个api会调用一个方法，它是call()。&lt;/p&gt;

&lt;h1 id=&quot;rack_application&quot;&gt;什么是Rack Application？&lt;/h1&gt;

&lt;p&gt;A Rack application is an Ruby object (not a class) that responds to call. It takes exactly one argument, the environment and returns an Array of exactly three values: The status, the headers, and the body.&lt;/p&gt;

&lt;p&gt;大意：Rack App需要提供一个方法，它就是call()。&lt;/p&gt;

&lt;h1 id=&quot;rackweb_server&quot;&gt;一个误解：Rack不是web server&lt;/h1&gt;

&lt;ol&gt;
&lt;li&gt;一个浏览器请求&lt;/li&gt;

&lt;li&gt;web server 将请求交给了Rack&lt;/li&gt;

&lt;li&gt;Rack告诉了app&lt;/li&gt;

&lt;li&gt;app想了想，告诉Rack我的返回结果是什么&lt;/li&gt;

&lt;li&gt;Rack告诉web server 它要的结果&lt;/li&gt;

&lt;li&gt;web server 告诉浏览器一个可解析的结果&lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&quot;racksprockets&quot;&gt;Rack为我做了什么？让Sprockets代表大伙发个言。&lt;/h1&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/sstephenson/sprockets&quot;&gt;看看Sprockets&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;之前我对Sprockets的概念完全被Rails给代替了，那么注意下面标注的文字，原来只是Rails替我做了额外的事情，我没有察觉。&lt;/p&gt;

&lt;p&gt;You’ll need an instance of the Sprockets::Environment class to access and serve assets from your application. Under Rails 3.1 and later, &lt;code&gt;YourApp::Application.assets is a preconfigured Sprockets::Environment instance&lt;/code&gt;. For Rack-based applications, create an instance in config.ru.&lt;/p&gt;

&lt;p&gt;那么，我如果自己单独使用Sprockets呢？&lt;/p&gt;

&lt;p&gt;If you are using Sprockets with a Rack application, you will need to mount the environment yourself. A good way to do this is with the map method in config.ru:&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='ruby'&gt;&lt;span class='nb'&gt;require&lt;/span&gt; &lt;span class='s1'&gt;&amp;#39;sprockets&amp;#39;&lt;/span&gt;
&lt;span class='n'&gt;map&lt;/span&gt; &lt;span class='s1'&gt;&amp;#39;/assets&amp;#39;&lt;/span&gt; &lt;span class='k'&gt;do&lt;/span&gt;
  &lt;span class='n'&gt;environment&lt;/span&gt; &lt;span class='o'&gt;=&lt;/span&gt; &lt;span class='ss'&gt;Sprockets&lt;/span&gt;&lt;span class='p'&gt;:&lt;/span&gt;&lt;span class='ss'&gt;:Environment&lt;/span&gt;&lt;span class='o'&gt;.&lt;/span&gt;&lt;span class='n'&gt;new&lt;/span&gt;
  &lt;span class='n'&gt;environment&lt;/span&gt;&lt;span class='o'&gt;.&lt;/span&gt;&lt;span class='n'&gt;append_path&lt;/span&gt; &lt;span class='s1'&gt;&amp;#39;app/assets/javascripts&amp;#39;&lt;/span&gt;
  &lt;span class='n'&gt;environment&lt;/span&gt;&lt;span class='o'&gt;.&lt;/span&gt;&lt;span class='n'&gt;append_path&lt;/span&gt; &lt;span class='s1'&gt;&amp;#39;app/assets/stylesheets&amp;#39;&lt;/span&gt;
  &lt;span class='n'&gt;run&lt;/span&gt; &lt;span class='n'&gt;environment&lt;/span&gt;
&lt;span class='k'&gt;end&lt;/span&gt;

&lt;span class='n'&gt;map&lt;/span&gt; &lt;span class='s1'&gt;&amp;#39;/&amp;#39;&lt;/span&gt; &lt;span class='k'&gt;do&lt;/span&gt;
  &lt;span class='n'&gt;run&lt;/span&gt; &lt;span class='no'&gt;YourRackApp&lt;/span&gt;
&lt;span class='k'&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Sprockets 可以支持SCSS/SASS，LESS，CoffeeScript，甚至.scss.erb。&lt;/p&gt;

&lt;h1 id=&quot;rack_2&quot;&gt;我能用Rack做什么？&lt;/h1&gt;

&lt;p&gt;注意那个不起眼的config.ru，我可以用它来写一个自己的Ruby框架。当然啦，这个框架现在什么也不做。&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='ruby'&gt;&lt;span class='c1'&gt;# config.ru&lt;/span&gt;
&lt;span class='nb'&gt;require&lt;/span&gt; &lt;span class='o'&gt;::&lt;/span&gt;&lt;span class='no'&gt;File&lt;/span&gt;&lt;span class='o'&gt;.&lt;/span&gt;&lt;span class='n'&gt;expand_path&lt;/span&gt;&lt;span class='p'&gt;(&lt;/span&gt;&lt;span class='s1'&gt;&amp;#39;../my_app.rb&amp;#39;&lt;/span&gt;&lt;span class='p'&gt;,&lt;/span&gt;  &lt;span class='bp'&gt;__FILE__&lt;/span&gt;&lt;span class='p'&gt;)&lt;/span&gt; &lt;span class='c1'&gt;# 这句话copy自Rails，吼吼&lt;/span&gt;
&lt;span class='n'&gt;run&lt;/span&gt; &lt;span class='ss'&gt;MyApp&lt;/span&gt;&lt;span class='p'&gt;:&lt;/span&gt;&lt;span class='ss'&gt;:Application&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='ruby'&gt;&lt;span class='c1'&gt;# my_app.rb&lt;/span&gt;
&lt;span class='k'&gt;module&lt;/span&gt; &lt;span class='nn'&gt;MyApp&lt;/span&gt;
  &lt;span class='k'&gt;class&lt;/span&gt; &lt;span class='nc'&gt;Application&lt;/span&gt;
    &lt;span class='k'&gt;def&lt;/span&gt; &lt;span class='nc'&gt;self&lt;/span&gt;&lt;span class='o'&gt;.&lt;/span&gt;&lt;span class='nf'&gt;call&lt;/span&gt;&lt;span class='p'&gt;(&lt;/span&gt;&lt;span class='n'&gt;env&lt;/span&gt;&lt;span class='p'&gt;)&lt;/span&gt;
      &lt;span class='o'&gt;[&lt;/span&gt;&lt;span class='mi'&gt;200&lt;/span&gt;&lt;span class='p'&gt;,&lt;/span&gt; &lt;span class='p'&gt;{&lt;/span&gt;&lt;span class='s2'&gt;&amp;quot;Content-Type&amp;quot;&lt;/span&gt; &lt;span class='o'&gt;=&amp;gt;&lt;/span&gt; &lt;span class='s2'&gt;&amp;quot;text/html&amp;quot;&lt;/span&gt;&lt;span class='p'&gt;},&lt;/span&gt; &lt;span class='o'&gt;[&lt;/span&gt;&lt;span class='s2'&gt;&amp;quot;&amp;lt;h1&amp;gt;It&amp;#39;s My App&amp;lt;/h1&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class='p'&gt;,&lt;/span&gt; &lt;span class='s1'&gt;&amp;#39;&amp;lt;p&amp;gt;Yeah!!!&amp;lt;/p&amp;gt;&amp;#39;&lt;/span&gt;&lt;span class='o'&gt;]]&lt;/span&gt;
    &lt;span class='k'&gt;end&lt;/span&gt;
  &lt;span class='k'&gt;end&lt;/span&gt;
&lt;span class='k'&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;rackup -s WEBrick -p 1212&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;如果你看过&lt;a href=&quot;https://github.com/JuanitoFatas/Guides/blob/master/guides/edge-translation/rails-on-rack-zh_CN.md&quot;&gt;这篇文章&lt;/a&gt;，那么你会发现，我们熟知的Rails启动方式，还可以这样完成：&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='ruby'&gt;&lt;span class='c1'&gt;# Rails.root/config.ru&lt;/span&gt;
&lt;span class='nb'&gt;require&lt;/span&gt; &lt;span class='o'&gt;::&lt;/span&gt;&lt;span class='no'&gt;File&lt;/span&gt;&lt;span class='o'&gt;.&lt;/span&gt;&lt;span class='n'&gt;expand_path&lt;/span&gt;&lt;span class='p'&gt;(&lt;/span&gt;&lt;span class='s1'&gt;&amp;#39;../config/environment&amp;#39;&lt;/span&gt;&lt;span class='p'&gt;,&lt;/span&gt; &lt;span class='bp'&gt;__FILE__&lt;/span&gt;&lt;span class='p'&gt;)&lt;/span&gt;

&lt;span class='n'&gt;use&lt;/span&gt; &lt;span class='ss'&gt;Rack&lt;/span&gt;&lt;span class='p'&gt;:&lt;/span&gt;&lt;span class='ss'&gt;:Debugger&lt;/span&gt;
&lt;span class='n'&gt;use&lt;/span&gt; &lt;span class='ss'&gt;Rack&lt;/span&gt;&lt;span class='p'&gt;:&lt;/span&gt;&lt;span class='ss'&gt;:ContentLength&lt;/span&gt;
&lt;span class='n'&gt;run&lt;/span&gt; &lt;span class='no'&gt;Rails&lt;/span&gt;&lt;span class='o'&gt;.&lt;/span&gt;&lt;span class='n'&gt;application&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h1 id=&quot;sinatra&quot;&gt;试试sinatra&lt;/h1&gt;

&lt;p&gt;写这篇文章的缘由，是在开发一个功能时，想到它可以包装成一个gem，而后有看了&lt;a href=&quot;http://guides.rubyonrails.org/v3.2.13/engines.html&quot;&gt;Rails Guides: Getting Started with Engines&lt;/a&gt;，&lt;a href=&quot;http://guides.ruby-china.org/engines.html&quot;&gt;中文在这里&lt;/a&gt;，这之后有了对Rails进行解构的想法，而后，便是更加清楚的意识到Rack的存在了。&lt;/p&gt;

&lt;p&gt;那么，sinatra，和其他同类型的Rack-based app（非Rails），都是我们可以尝试的选择。&lt;/p&gt;

&lt;h1 id=&quot;rails&quot;&gt;继续对Rails解构，我们还会发现什么？&lt;/h1&gt;

&lt;p&gt;当我们&lt;code&gt;rake middleware&lt;/code&gt;的时候，我们可以看到Rails加载了哪些middleware，这些不是写在Gemfile里的，但是他们可以来自gem。这就有点奇怪的感觉了，不是么？&lt;/p&gt;

&lt;p&gt;如果我们选择sinatra，选择一些自己要使用的gem，再挑选一些middleware，我们就可以搭建一个app了。比如，一个管理jekyll的app blog。&lt;/p&gt;

&lt;h1 id=&quot;&quot;&gt;写在后面&lt;/h1&gt;

&lt;p&gt;这篇短文的意图，是想通过Rails的解构，对Rack和其他Rack-based App有一个清楚的了解，当我们选择功能方案的时候，会从另外一些角度，选择我们合适的实现途径。Rails给我们的贡献，就像Prem在RubyConf上讲到的，我们可以看看，把Rails的哪些东西可以放到我们的项目里。&lt;/p&gt;

&lt;p&gt;这篇博文是两次完成的，因为期间要参加RubyConfChina，所以在之前把半成品放了出去，听听大家的意见。回来后发现了一些新的资源，一并补充进来。再次感谢提出意见的ruby-china.org的小伙伴们。&lt;/p&gt;

&lt;h1 id=&quot;_2&quot;&gt;参考资料&lt;/h1&gt;

&lt;p&gt;&lt;a href=&quot;http://guides.rubyonrails.org/v3.2.13/rails_on_rack.html&quot;&gt;http://guides.rubyonrails.org/v3.2.13/rails_on_rack.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://m.onkey.org/ruby-on-rack-1-hello-rack&quot;&gt;Ruby on Rack #1 - Hello Rack!&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://m.onkey.org/ruby-on-rack-2-the-builder&quot;&gt;Ruby on Rack #2 - The Builder&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://m.onkey.org/2008/11/10/rails-meets-sinatra&quot;&gt;Rails meets Sinatra&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://m.onkey.org/rails-meets-sinatra-2-mix-n-match&quot;&gt;Rails meets Sinatra #2 - Mix n’ Match&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://gauravchande.com/post/58760237018/what-is-rack-in-ruby-rails&quot;&gt;What is ‘Rack’ in Ruby/Rails?&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://rack.rubyforge.org/doc/&quot;&gt;Rack Doc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.sinatrarb.com/&quot;&gt;sinatra&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/JuanitoFatas/Guides/blob/master/guides/edge-translation/rails-on-rack-zh_CN.md&quot;&gt;Rails on Rack&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://railser.cn/blog/rails-and-merb/&quot;&gt;(转载)Rails 與 Merb 合併背後的故事&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;里克，2013年10月29日&lt;/p&gt;

&lt;p&gt;转载请注明出处：里克的自习室 Railser.cn&lt;/p&gt;
</description>
                <link>http://liwei78.github.io/blog/rack-i-ignore-u</link>
                <guid>http://liwei78.github.io/blog/rack-i-ignore-u</guid>
                <pubDate>2013-10-23T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>Jekyll，和它的generateors</title>
                <description>
&lt;p&gt;写在前面：在每篇开头写一些文字，是我的习惯。这次翻新我的博客，把全部的博客都导成了.textile格式，然后一篇篇的做了校对（未完成），其间发现我从07年到现在，只写了170多篇，且有朋友贡献的几十篇。自己真正原创的寥寥几篇。倒是一些闲言碎语很让我感动，毕竟，年头久了，有旧情。本来想把非技术的东西删掉，索性还是留着回味当时的心境吧。&lt;/p&gt;

&lt;p&gt;第一次，用自己的编辑器，用一个全新的方式来写博客。说说这次的经历吧。&lt;/p&gt;

&lt;p&gt;改版我的博客，已经打算很久了，这次动手是因为发现了Jekyll，这个名字奇怪，不过还算新鲜的东西。折腾了2天，终于搞定，至于细节，还要在接下来的时间去完善，比如，把bootstrap和bootswatch快捷的放入Jekyll site 里，快速的新建一个新的site，且不仅限于博客。&lt;/p&gt;

&lt;p&gt;Jekyll流行因为github pages，创建的时候推荐了它。今天下午发现了很多同类功能的工具，来看看别人整理的static site generators.&lt;/p&gt;

&lt;p&gt;原地址：http://nanoc.ws/about/#similar-projects&lt;/p&gt;
&lt;table class='comparison'&gt;
&lt;tbody&gt;&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://github.com/botanicus/ace'&gt;Ace&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Ruby&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/botanicus/ace'&gt;botanicus/ace&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://github.com/posativ/acrylamid'&gt;acrylamid&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Python&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/posativ/acrylamid'&gt;posativ/acrylamid&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://awestruct.org/'&gt;awestruct&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Ruby&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/awestruct/awestruct'&gt;awestruct/awestruct&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://github.com/ap0calypse/bazinga'&gt;bazinga&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Perl&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/ap0calypse/bazinga'&gt;ap0calypse/bazinga&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://github.com/flatiron/blacksmith'&gt;Blacksmith&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Node.js&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/flatiron/blacksmith'&gt;flatiron/blacksmith&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://bitbucket.org/jek/blatter'&gt;Blatter&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Python&lt;/td&gt;
        &lt;td /&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://www.blogofile.com/'&gt;Blogofile&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Python&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/EnigmaCurry/blogofile'&gt;EnigmaCurry/blogofile&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://tinytree.info/'&gt;Bonsai&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Ruby&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/benschwarz/bonsai'&gt;benschwarz/bonsai&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://github.com/koenbok/Cactus'&gt;Cactus&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Python&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/koenbok/Cactus'&gt;koenbok/Cactus&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://github.com/dz/chisel'&gt;Chisel&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Python&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/dz/chisel'&gt;dz/chisel&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://www.cliki.net/coleslaw'&gt;coleslaw&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Common Lisp&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/redline6561/coleslaw'&gt;redline6561/coleslaw&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://github.com/shazow/composer'&gt;Composer&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Python&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/shazow/composer'&gt;shazow/composer&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://pypi.python.org/pypi/cyrax'&gt;cyrax&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Python&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/piranha/cyrax'&gt;piranha/cyrax&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://github.com/cdn64/deplot'&gt;Deplot&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Ruby&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/cdn64/deplot'&gt;cdn64/deplot&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://github.com/46Bit/fairytale'&gt;Fairytale&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Ruby&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/46Bit/fairytale'&gt;46Bit/fairytale&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://github.com/nikcub/floyd'&gt;Floyd&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Python&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/nikcub/floyd'&gt;nikcub/floyd&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://fmpp.sourceforge.net/'&gt;FMPP&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Java&lt;/td&gt;
        &lt;td /&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://github.com/blahed/frank'&gt;Frank&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Ruby&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/blahed/frank'&gt;blahed/frank&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='https://gitorious.org/fugitive'&gt;fugitive&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Shell&lt;/td&gt;
        &lt;td /&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://github.com/piranha/gostatic'&gt;gostatic&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Go&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/piranha/gostatic'&gt;piranha/gostatic&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://github.com/mikoskinen/graze'&gt;Graze&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;C#&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/mikoskinen/graze'&gt;mikoskinen/graze&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://github.com/xfire/growl'&gt;Growl&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Python&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/xfire/growl'&gt;xfire/growl&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://jaspervdj.be/hakyll/'&gt;Hakyll&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Haskell&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/jaspervdj/hakyll'&gt;jaspervdj/hakyll&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://hammerformac.com/'&gt;Hammer&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;language-agnostic&lt;/td&gt;
        &lt;td /&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://github.com/mkaz/hastie'&gt;Hastie&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Go&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/mkaz/hastie'&gt;mkaz/hastie&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://zespia.tw/hexo/'&gt;Hexo&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Node.js&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/tommy351/hexo'&gt;tommy351/hexo&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://github.com/hobix/hobix'&gt;Hobix&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Ruby&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/hobix/hobix'&gt;hobix/hobix&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://github.com/lakshmivyas/hyde'&gt;Hyde&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Python&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/lakshmivyas/hyde'&gt;lakshmivyas/hyde&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://github.com/mojombo/jekyll'&gt;Jekyll&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Ruby&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/mojombo/jekyll'&gt;mojombo/jekyll&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://github.com/jokull/jinjet'&gt;jinjet&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Python&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/jokull/jinjet'&gt;jokull/jinjet&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://github.com/drone/jkl'&gt;jkl&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Go&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/drone/jkl'&gt;drone/jkl&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://github.com/jaredhanson/kerouac'&gt;Kerouac&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Node.js&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/jaredhanson/kerouac'&gt;jaredhanson/kerouac&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://github.com/sandal/korma'&gt;Korma&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Ruby&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/sandal/korma'&gt;sandal/korma&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://lanyon.readthedocs.org/'&gt;Lanyon&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Python&lt;/td&gt;
        &lt;td /&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://github.com/an0/Letterpress'&gt;Letterpress&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Python&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/an0/Letterpress'&gt;an0/Letterpress&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://github.com/petebrowne/machined'&gt;Machined&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Ruby&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/petebrowne/machined'&gt;petebrowne/machined&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://github.com/donmelton/magneto'&gt;Magneto&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Ruby&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/donmelton/magneto'&gt;donmelton/magneto&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://github.com/myfreeweb/markbox'&gt;Markbox&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Python&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/myfreeweb/markbox'&gt;myfreeweb/markbox&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://markdoc.org/'&gt;Markdoc&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Python&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/zacharyvoase/markdoc'&gt;zacharyvoase/markdoc&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://github.com/middleman/middleman'&gt;Middleman&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Ruby&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/middleman/middleman'&gt;middleman/middleman&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://mynt.mirroredwhite.com/'&gt;mynt&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Python&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/Anomareh/mynt'&gt;Anomareh/mynt&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://nanoc.stoneship.org/'&gt;nanoc&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Ruby&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/nanoc/nanoc'&gt;nanoc/nanoc&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://nikola.ralsina.com.ar/'&gt;Nikola&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Python&lt;/td&gt;
        &lt;td /&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://pagegen.phnd.net/'&gt;Pagegen&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Bash&lt;/td&gt;
        &lt;td /&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://github.com/ametaireau/pelican'&gt;Pelican&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Python&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/ametaireau/pelican'&gt;ametaireau/pelican&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://github.com/caolan/petrify'&gt;Petrify&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Node.js&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/caolan/petrify'&gt;caolan/petrify&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://phrozn.info'&gt;Phrozn&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;PHP&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/farazdagi/phrozn'&gt;farazdagi/phrozn&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://bolt80.com/piecrust/'&gt;PieCrust&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;PHP&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/ludovicchabant/piecrust'&gt;ludovicchabant/piecrust&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://inky.github.com/pilcrow/'&gt;Pilcrow&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Python&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/inky/pilcrow'&gt;inky/pilcrow&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://github.com/mdub/pith'&gt;Pith&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Ruby&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/mdub/pith'&gt;mdub/pith&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='https://bitbucket.org/obensonne/poole'&gt;poole&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Python&lt;/td&gt;
        &lt;td /&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://github.com/laktek/punch'&gt;Punch&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Node.js&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/laktek/punch'&gt;laktek/punch&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://github.com/arthurk/pyll'&gt;Pyll&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Node.js&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/arthurk/pyll'&gt;arthurk/pyll&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='https://npmjs.org/package/quill'&gt;Quill&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Node.js&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/theycallmeswift/quill'&gt;theycallmeswift/quill&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://rubyforge.org/projects/rakeweb/'&gt;RakeWeb&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Ruby&lt;/td&gt;
        &lt;td /&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://rassmalog.rubyforge.org/'&gt;Rassmalog&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Ruby&lt;/td&gt;
        &lt;td /&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://github.com/fifthposition/rizzo'&gt;Rizzo&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Groovy&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/fifthposition/rizzo'&gt;fifthposition/rizzo&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://rog.rubyforge.org/'&gt;Rog&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Ruby&lt;/td&gt;
        &lt;td /&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://github.com/felixge/node-romulus'&gt;romulus&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Node.js&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/felixge/node-romulus'&gt;felixge/node-romulus&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://rote.rubyforge.org/'&gt;Rote&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Ruby&lt;/td&gt;
        &lt;td /&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://www.apeth.com/RubyFrontierDocs/default.html'&gt;RubyFrontier&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Ruby&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/mattneub/RubyFrontier'&gt;mattneub/RubyFrontier&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://ruhoh.com/'&gt;Ruhoh&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;language-agnostic&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/ruhoh/ruhoh.rb'&gt;ruhoh/ruhoh.rb&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://sculpin.io/'&gt;Sculpin&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;PHP&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/sculpin/sculpin'&gt;sculpin/sculpin&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://www.marco.org/secondcrack'&gt;Second Crack&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;PHP&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/marcoarment/secondcrack'&gt;marcoarment/secondcrack&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://honza.ca/socrates/'&gt;Socrates&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Python&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/honza/socrates'&gt;honza/socrates&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://github.com/alvesjnr/speechhub'&gt;Speechhub&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Python&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/alvesjnr/speechhub'&gt;alvesjnr/speechhub&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://stasis.me/'&gt;Stasis&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Ruby&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/winton/stasis'&gt;winton/stasis&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://github.com/Ceasar/staticjinja'&gt;staticjinja&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Python&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/Ceasar/staticjinja'&gt;Ceasar/staticjinja&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://rubyforge.org/projects/staticmatic/'&gt;StaticMatic&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Ruby&lt;/td&gt;
        &lt;td /&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://github.com/mindeavor/staticmatic2'&gt;StaticMatic2&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Ruby&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/mindeavor/staticmatic2'&gt;mindeavor/staticmatic2&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://staticweb.rubyforge.org/'&gt;StaticWeb&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Ruby&lt;/td&gt;
        &lt;td /&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://github.com/sebastien/tahchee'&gt;Tahchee&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Python&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/sebastien/tahchee'&gt;sebastien/tahchee&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://www.loup-vaillant.fr/projects/ussm/'&gt;Ultra simple Site Maker&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Ocaml&lt;/td&gt;
        &lt;td /&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://webby.rubyforge.org/'&gt;Webby&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Ruby&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/TwP/webby'&gt;TwP/webby&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://webgen.rubyforge.org/'&gt;webgen&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Ruby&lt;/td&gt;
        &lt;td /&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://www.thewml.org/'&gt;Website Meta Language&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;C and Perl&lt;/td&gt;
        &lt;td /&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://jnordberg.github.com/wintersmith/'&gt;Wintersmith&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Node.js&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/jnordberg/wintersmith'&gt;jnordberg/wintersmith&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://github.com/mythmon/wok'&gt;wok&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Python&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/mythmon/wok'&gt;mythmon/wok&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='https://npmjs.org/package/yassg'&gt;yassg&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Node.js&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/sma/yassg'&gt;sma/yassg&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://github.com/jgm/yst'&gt;yst&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Haskell&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/jgm/yst'&gt;jgm/yst&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='even'&gt;
&lt;td&gt;&lt;a href='http://yurtcms.roberthahn.ca/'&gt;Yurt CMS&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Ruby&lt;/td&gt;
        &lt;td /&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;tr class='odd'&gt;
&lt;td&gt;&lt;a href='http://www.zenspider.com/ZSS/Products/ZenWeb/'&gt;ZenWeb&lt;/a&gt;&lt;/td&gt;
        &lt;td&gt;Ruby&lt;/td&gt;
        &lt;td&gt;&lt;a href='http://github.com/seattlerb/zenweb'&gt;seattlerb/zenweb&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;tr /&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;昨天用了 http://jekyllbootstrap.com/ 来美化我当前的代码，今天发现作者已经不再维护它，并且新搞了一个类似Jekyll的工具，&lt;a href=&quot;http://ruhoh.com/&quot;&gt;http://ruhoh.com/&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;我的博客代码在 &lt;a href=&quot;https://github.com/liwei78/blog&quot;&gt;https://github.com/liwei78/blog&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;如果你还在看，我表示一下感谢。希望我在接下来的几天里，多写一些东西，因为，我辞职了。&lt;/p&gt;

&lt;p&gt;2013年10月22日，里克&lt;/p&gt;
</description>
                <link>http://liwei78.github.io/blog/write-from-jekyll</link>
                <guid>http://liwei78.github.io/blog/write-from-jekyll</guid>
                <pubDate>2013-10-21T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>if a|| b 的重构</title>
                <description>&lt;hr /&gt;
&lt;p&gt;当遇到 if a || b 的时候，我们要先看一下，a 和 b 到底是不是可以用区间来覆盖。&lt;/p&gt;
&lt;p&gt;初中老师会让我们算，a &amp;lt; 3 或 a &amp;gt; 5 的那些整数。那么a一定是在这2个区间了，所以，if 中的那个，一定是两个区间中的一个。&lt;/p&gt;
&lt;p&gt;这次我见到的代码是，&lt;br /&gt;
if !a || a.user.name.nil?&lt;/p&gt;
&lt;p&gt;这就不合符or的区间判断，or两边就不是一回事！！&lt;/p&gt;
&lt;p&gt;写代码的小伙伴们，这是种坏习惯。&lt;/p&gt;
&lt;p&gt;建议：&lt;/p&gt;
&lt;p&gt;先从区间上看，再从条件上看，这不是一个or查询，而是一个嵌套的if判断。&lt;/p&gt;
&lt;p&gt;我们先改动如下：&lt;/p&gt;
&lt;p&gt;@&lt;br /&gt;
if a.nil?&lt;br /&gt;
    gem&lt;br /&gt;
else&lt;br /&gt;
    if a.user.name.nil?&lt;br /&gt;
        gem&lt;br /&gt;
    end&lt;br /&gt;
end&lt;br /&gt;
@&lt;/p&gt;
&lt;p&gt;但是既然写到重构板块，那么我们应该从测试的角度，再做一次优化。&lt;/p&gt;
&lt;p&gt;@&lt;br /&gt;
if a.nil?&lt;br /&gt;
    gem&lt;br /&gt;
else&lt;br /&gt;
    a_new_method&lt;br /&gt;
end&lt;/p&gt;
&lt;p&gt;def a_new_method(aa)&lt;/p&gt;
if aa.user.name.nil?
gem
end
&lt;p&gt;end&lt;br /&gt;
@&lt;/p&gt;
&lt;p&gt;这样，我们就可以测试a_new_method，是否完成了一个单元功能，再测试if是否完成了条件判断。&lt;/p&gt;
&lt;p&gt;以上是一次很典型的重构加测试的实践。&lt;/p&gt;
&lt;p&gt;里克，2013-9-7&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/refactoring-if-a-or-b</link>
                <guid>http://liwei78.github.io/blog/refactoring-if-a-or-b</guid>
                <pubDate>2013-09-07T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>nil 不等于0</title>
                <description>&lt;hr /&gt;
&lt;p&gt;小提示：&lt;/p&gt;
&lt;p&gt;&amp;gt; nil == 0&lt;/p&gt;
&lt;p&gt;false&lt;/p&gt;
&lt;p&gt;那么，migrate的时候，integer的column就要给一个 default: 0的限制，这样，你查询时候的幸福指数会提升很多。&lt;/p&gt;
&lt;p&gt;否则，user.read_count&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/nil-not-equal-zero</link>
                <guid>http://liwei78.github.io/blog/nil-not-equal-zero</guid>
                <pubDate>2013-09-03T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>在mac os 10.8.4 上安装 imagemagick</title>
                <description>&lt;hr /&gt;
&lt;p&gt;写在前面：&lt;/p&gt;
&lt;p&gt;许久没有用Rails开发项目了，现在回想起来，已经有一年了。好的项目不可期，我们只有耐心的准备着。做程序就像是场耐力赛。&lt;/p&gt;
&lt;p&gt;我没有想到在10.8.4上安装imagemagick如此的麻烦，因为缺少的 Magick-config 总是无法找到，这个问题在 10.6.2 上是不存在的。当然，在ubuntu和centos上也没遇到过。&lt;/p&gt;
&lt;p&gt;在10.6.2上只要安装magick-wand就可以解决，并顺利的安装imagemagick，但是到了10.8.4，就再也找不到合适的magick-wand了。&lt;/p&gt;
&lt;p&gt;当然，我已经用了port，我不想让brew再次引起冲突，导致我大范围的重装。那是一场噩梦。&lt;/p&gt;
&lt;p&gt;还好，我找到了magick-installer，fork之后修正了一个文件的地址，这次正常的安装成功了。&lt;/p&gt;
&lt;p&gt;说起来简单，解决和测试它，竟然用了3个多小时。&lt;/p&gt;
&lt;p&gt;地址：https://github.com/liwei78/magick-installer&lt;/p&gt;
&lt;p&gt;liwei 2013-8-16&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/install-imagemagick-on-mac-os-10-8-4</link>
                <guid>http://liwei78.github.io/blog/install-imagemagick-on-mac-os-10-8-4</guid>
                <pubDate>2013-08-16T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>openerp 7.0</title>
                <description>&lt;hr /&gt;
&lt;p&gt;写在前面：&lt;/p&gt;
&lt;p&gt;最近半年一直在从事openerp的开发工作，这是一个新的挑战，还好十年前学的会计常识有一些帮助，初期的入门阶段已过，接下来就是不断的学习了。&lt;/p&gt;
&lt;p&gt;下面是一些文章连接，发在这里是为了索取7.0的开发教程。虽然英文也可阅读，但是就财会经验上看，还是翻译一下的术语更容易理解。&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;OpenERP 7.0版本发布: &lt;a href=&quot;http://shine-it.net/index.php/topic,5807.msg14435.html#msg14435&quot; target=&quot;_blank&quot;&gt;http://shine-it.net/index.php/topic,5807.msg14435.html#msg14435&lt;/a&gt;&lt;br /&gt;
对不起SAP，我要终结你！&amp;#8212;OpenERP 7.0发布之前: &lt;a href=&quot;http://www.openerpchina.org/forum.php?mod=viewthread&amp;tid=300&quot; target=&quot;_blank&quot;&gt;http://www.openerpchina.org/forum.php?mod=viewthread&amp;amp;tid=300&lt;/a&gt;&lt;br /&gt;
OpenERP进入中国大学课堂: &lt;a href=&quot;http://shine-it.net/index.php/topic,5808.0.html&quot; target=&quot;_blank&quot;&gt;http://shine-it.net/index.php/topic,5808.0.html&lt;/a&gt;&lt;br /&gt;
OpenERP 7.0成倍提高并发处理能力： &lt;a href=&quot;http://shine-it.net/index.php/topic,5810.0.html&quot; target=&quot;_blank&quot;&gt;http://shine-it.net/index.php/topic,5810.0.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;10万雪花银换来的开源ERP经验： &lt;a href=&quot;http://shine-it.net/index.php/topic,4422.0.html&quot; target=&quot;_blank&quot;&gt;http://shine-it.net/index.php/topic,4422.0.html&lt;/a&gt;&lt;br /&gt;
排名最前的6款开源ERP软件比较： &lt;a href=&quot;http://bbs.erp100.com/thread-254957-1-1.html&quot; target=&quot;_blank&quot;&gt;http://bbs.erp100.com/thread-254957-1-1.html&lt;/a&gt;&lt;br /&gt;
盘点世界排名最前的5款开源ERP软件： &lt;a href=&quot;http://shine-it.net/index.php/topic,4425.0.html&quot; target=&quot;_blank&quot;&gt;http://shine-it.net/index.php/topic,4425.0.html&lt;/a&gt;&lt;br /&gt;
OpenERP连获大奖： &lt;a href=&quot;http://shine-it.net/index.php/topic,4392.0.html&quot; target=&quot;_blank&quot;&gt;http://shine-it.net/index.php/topic,4392.0.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;OpenERP——下一代ERP： &lt;a href=&quot;http://shine-it.net/index.php/topic,5809.0.html&quot; target=&quot;_blank&quot;&gt;http://shine-it.net/index.php/topic,5809.0.html&lt;/a&gt;&lt;br /&gt;
OpenERP PK SAP： &lt;a href=&quot;http://shine-it.net/index.php/topic,4421.0.html&quot; target=&quot;_blank&quot;&gt;http://shine-it.net/index.php/topic,4421.0.html&lt;/a&gt;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/openerp-7-0</link>
                <guid>http://liwei78.github.io/blog/openerp-7-0</guid>
                <pubDate>2013-03-20T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>2013第一帖</title>
                <description>&lt;hr /&gt;
&lt;p&gt;最近半年，一直在做OpenERP的全职开发，说是开发，也是用ruby来调用OE的api，还为真正进入到python的开发中。目前要尝试做一些python代码，加油。&lt;/p&gt;
&lt;p&gt;这半年一直使用ubuntu开发，sublime text 2.0真是ubuntu上的好东西。&lt;/p&gt;
&lt;p&gt;sublime最赞的是右侧的缩略图代替滚动条，找代码真是舒服呀，只是在打开log文件时候，缩略图没什么用了，显得定位也不准。但是对普通代码，少了它真不习惯。&lt;/p&gt;
&lt;p&gt;分享个资源帖 http://www.qianduan.net/essential-to-sublime-the-text-2-plugins.html&lt;/p&gt;
&lt;p&gt;目前已经不做rails开发，专心往ERP方向上发展了，加油加油。&lt;/p&gt;
&lt;p&gt;10年前埋怨会计专业，十年后用它赚钱，生活说是无常，实则是我们没有领悟它的短暂。&lt;/p&gt;
&lt;p&gt;liwei，2013年2月28日，2013第一帖&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/2013-first-blog</link>
                <guid>http://liwei78.github.io/blog/2013-first-blog</guid>
                <pubDate>2013-02-28T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>我一直在用的香港云主机，推荐给大家</title>
                <description>&lt;hr /&gt;
&lt;p&gt;地址：&lt;a href=&quot;http://mya.vpshosting.com.hk/aff.php?aff=083&quot; target=&quot;_blank&quot;&gt;http://www.vpshosting.com.hk&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;今年5月份买的云服务器，用到现在，大家都说挺快的，所以推荐给大家吧。如果有想放些个人网站，企业网站的，也可以联系我。我的服务器2G内存，还有不少空间。&lt;/p&gt;
&lt;p&gt;我的配置php5.2.17 + zend + mysql.&lt;/p&gt;
&lt;p&gt;谢谢各位。&lt;/p&gt;
&lt;p&gt;博主最近几个月开始从事OpenERP的工作，目前在用ruby脚本完成一些期初建账的事情，有erp经验的朋友可以交流下。如果有靠谱的erp培训，可以提供给我，不胜感激。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/hk-vps</link>
                <guid>http://liwei78.github.io/blog/hk-vps</guid>
                <pubDate>2012-12-06T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>升级09款mac mini笔记</title>
                <description>&lt;hr /&gt;
&lt;p&gt;今天凌晨，苹果发布了多款新的mac产品，最让我心动的是iMac，当然，还有价格又再降的mac mini。手里工作用的mac mini是09年款的，至今还在用着2G内存。因为最近工作经常要开虚拟机，所以我决定升级我的mini到8G。&lt;/p&gt;
&lt;p&gt;网上有一篇帖子，讲述了如何给09年mini拆机。可是文章不是针对更换内存讲的，而且细节的部分还是不太到位，所以，来吧，我自己贴图讲解。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/blog/mac-mini%E5%88%B0%E5%BA%95%E6%9C%89%E5%A4%9Amini%EF%BC%9F%EF%BC%9F&quot; target=&quot;_blank&quot;&gt;这还是mini到手时候的得瑟贴&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;首先，先拆开它的盖子。其实拆开它并没有网贴写的那么复杂，我是按照下图的方式打开它的。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/P241012_19.12.jpg&quot;&gt;&lt;img title=&quot;S&quot; src=&quot;http://railser.cn/wp-content/uploads/P241012_19.12-300x225.jpg&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;225&quot; /&gt;&lt;/a&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/P241012_19.12.jpg&quot;&gt;&lt;br /&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;我是从耳机的插孔上方，用小刀一点点撬开一个缝隙，然后，用咖啡勺，撬开的。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/P241012_19.11_01.jpg&quot;&gt;&lt;img title=&quot;S&quot; src=&quot;http://railser.cn/wp-content/uploads/P241012_19.11_01-300x225.jpg&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;225&quot; /&gt;&lt;/a&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/P241012_19.11_01.jpg&quot;&gt;&lt;br /&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;撬开一些后，只需要垂直上下的撬动，就可以把其他几个边带开，不用逐个边去撬。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/P241012_19.11.jpg&quot;&gt;&lt;img title=&quot;S&quot; src=&quot;http://railser.cn/wp-content/uploads/P241012_19.11-300x225.jpg&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;225&quot; /&gt;&lt;/a&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/P241012_19.11.jpg&quot;&gt;&lt;br /&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;所以，不要觉得里面暗扣很多，会很难撬。这个过程我还是很顺利的。里克自习室railser.cn。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/P241012_17.51_01.jpg&quot;&gt;&lt;img title=&quot;S&quot; src=&quot;http://railser.cn/wp-content/uploads/P241012_17.51_01-300x225.jpg&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;225&quot; /&gt;&lt;/a&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/P241012_17.51_01.jpg&quot;&gt;&lt;br /&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;打开后的第一个难点，是如何找到内存的位置。网上文章讲的，是需要拆掉6个螺丝，拿下来光驱，再拆开下面的底座。其实，不要拆掉光驱。换内存，只需要把四个角的螺丝去掉，拿下底座即可。&lt;/p&gt;
&lt;p&gt;在掀起光驱和下面的框架（里面有硬盘）前，需要去掉3个天线，上边两个还是好去掉的，下边这个，按照我的手势，把底下的暗扣夹一下，就可以顺利取下了，千万别用蛮力。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/P241012_19.05.jpg&quot;&gt;&lt;img title=&quot;S&quot; src=&quot;http://railser.cn/wp-content/uploads/P241012_19.05-300x225.jpg&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;225&quot; /&gt;&lt;/a&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/P241012_19.05.jpg&quot;&gt;&lt;br /&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;下图是取下来的光驱，硬盘和风扇，他们是一个主体。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/P241012_17.55_02.jpg&quot;&gt;&lt;img title=&quot;S&quot; src=&quot;http://railser.cn/wp-content/uploads/P241012_17.55_02-300x225.jpg&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;225&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;下面是另一部分主体，左下角就是内存。换掉它吧。里克自习室railser.cn。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/P241012_17.55.jpg&quot;&gt;&lt;img title=&quot;S&quot; src=&quot;http://railser.cn/wp-content/uploads/P241012_17.55-300x225.jpg&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;225&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这里有1个地方要注意，就是三个天线的连接点很容易掉，每次要检查一下，不要松动。另外，内存也要插牢。&lt;/p&gt;
&lt;p&gt;主板上只有一个插槽，很容易和主体分开，如果觉得哪里卡住了，千万别用蛮力。里面只有四角的螺丝固定主体，整体就像一个拼接好的玩具，空间很紧密。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/P241012_17.55_01.jpg&quot;&gt;&lt;img title=&quot;S&quot; src=&quot;http://railser.cn/wp-content/uploads/P241012_17.55_01-300x225.jpg&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;225&quot; /&gt;&lt;/a&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/P241012_17.55_01.jpg&quot;&gt;&lt;br /&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;到这里，重新开机测试，没问题，可以把盖子再装回去了。&lt;/p&gt;
&lt;p&gt;讲讲最近的工作。8月底找了一份全职开发的工作，有Rails的部分，目前主要做OpenERP的维护和开发，用python和postgresql。希望大家多交流吧。&lt;/p&gt;
&lt;p&gt;转载的时候请保留里克自习室的字样，谢谢观赏。&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/update-09-mac-mini</link>
                <guid>http://liwei78.github.io/blog/update-09-mac-mini</guid>
                <pubDate>2012-10-27T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>Rails不要这么写查询了</title>
                <description>&lt;hr /&gt;
&lt;p&gt;周末2天，升级客户程序的代码。这次升级要解决性能问题，因为项目用了很久，工作日期间mysql的cpu消耗率一直很高，log里已经出现miss cache 的提示。这次要彻底查出问题。&lt;/p&gt;
&lt;p&gt;表面上看，sql的反复查询是个问题，如下：&lt;/p&gt;
&lt;p&gt;这是未修正前的/users/5的查询&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/wp-content/uploads/snapshot-2012-09-02-03.01.26.png&quot;&gt;&lt;img src=&quot;/wp-content/uploads/snapshot-2012-09-02-03.01.26.png&quot; alt=&quot;&quot; width=&quot;520&quot; height=&quot;270&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;之前我可以很无视这个cache，这不是rails的特点么，在我翻译的文章里，我觉得这是很酷的地方。可是，当mysql消耗掉cpu 90% 的性能时，这个cache真不让人乐观的以为它会起到作用。于是决定：去掉cache的部分。&lt;/p&gt;
&lt;p&gt;如何去掉，就是用controller变量来取代实例查询，一次查询，整个page都引用它。&lt;/p&gt;
&lt;p&gt;接着，运行全部的页面测试，看是否有遗漏。没有测试？好吧，我用了很久才把测试都加上。使用的是rails自己的测试。rake test:functionals&lt;/p&gt;
&lt;p&gt;接下来一个问题，是这篇文章的关键。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/wp-content/uploads/snapshot-2012-09-02-03.16.01.png&quot;&gt;&lt;img src=&quot;/wp-content/uploads/snapshot-2012-09-02-03.16.01.png&quot; alt=&quot;&quot; width=&quot;1003&quot; height=&quot;176&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;两个粉色的字体，同样的操作，这是重复的事情，却是如何出现的？&lt;/p&gt;
&lt;p&gt;原来，答案在model里。&lt;/p&gt;
&lt;p&gt;self.user_messages.present? ? self.user_messages.unread.count : 0&lt;/p&gt;
&lt;p&gt;这种写法当然很rails，可是确造成了多余的浪费，对于大量浏览的user show页面，mysql的负载可想而知。&lt;/p&gt;
&lt;p&gt;改成下面的写法&lt;br /&gt;
UserMessage.count(:conditions =&amp;gt; [&amp;#8220;user_id = ? and read = ?&amp;#8221;, self.id, false])&lt;/p&gt;
&lt;p&gt;页面的sql查询终于达到我的期望了。如下&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/wp-content/uploads/snapshot-2012-09-02-03.22.54.png&quot;&gt;&lt;img src=&quot;/wp-content/uploads/snapshot-2012-09-02-03.22.54.png&quot; alt=&quot;&quot; width=&quot;792&quot; height=&quot;150&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;一条用户查询，一条查询未读信息，一条分页显示。&lt;/p&gt;
&lt;p&gt;这个笔记的目的是，提醒自己和开发Rails的朋友，不要太多依赖Rails的美感，关键页面，性能最重要。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/donot-write-this-way-in-rails-query</link>
                <guid>http://liwei78.github.io/blog/donot-write-this-way-in-rails-query</guid>
                <pubDate>2012-09-02T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>无法安装icu4c的解决办法。</title>
                <description>&lt;hr /&gt;
&lt;p&gt;网站无法连接，所以无法安装，解决办法是：&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;-brew install http://railser.cn/soft/icu4c-4_4_1-src.tgz&lt;/p&gt;
&lt;p&gt;就可以了。&lt;/p&gt;
&lt;p&gt;-&lt;/p&gt;
&lt;p&gt;写错了，纠正下。按照提示，下载的是一个压缩包，里面有说明文件和源代码。解压后进入里面的source，在make &amp;amp;&amp;amp; make install，才能完成安装。&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/brew-install-icu4c</link>
                <guid>http://liwei78.github.io/blog/brew-install-icu4c</guid>
                <pubDate>2012-07-15T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>cms系列五：一饮东坡醒复醉</title>
                <description>&lt;hr /&gt;
&lt;p&gt;写在前面：&lt;/p&gt;
&lt;p&gt;前面写了四篇介绍Rails cms的文章，分别是&lt;br /&gt;
&lt;ul&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a title=&quot;cms系列四：输赢成败，又争由人算&quot; href=&quot;http://railser.cn/blog/cms-part-iv&quot;&gt;cms系列四：输赢成败，又争由人算&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a title=&quot;cms系列三：长安古道马迟迟&quot; href=&quot;http://railser.cn/blog/cms-part-iii&quot;&gt;cms系列三：长安古道马迟迟&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a title=&quot;cms系列二：塞下秋来风景异&quot; href=&quot;http://railser.cn/blog/cms-part-ii&quot;&gt;cms系列二：塞下秋来风景异&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a title=&quot;cms系列一：东风夜放花千树&quot; href=&quot;http://railser.cn/blog/cms-part-i&quot;&gt;cms系列一：东风夜放花千树&lt;/a&gt;&lt;/li&gt;&lt;/p&gt;
&lt;/ul&gt;
&lt;p&gt;里面涉及的cms来自《&lt;a href=&quot;http://blog.arunace.com/12-ruby-on-rails-content-management-systems-cms/&quot; target=&quot;_blank&quot;&gt;12个基于Rails框架的CMS系统推荐&lt;/a&gt;》，&lt;a href=&quot;http://www.iteye.com/news/23222&quot; target=&quot;_blank&quot;&gt;中文翻译在这里&lt;/a&gt; 。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/wp-content/uploads/2008328153753877_2.jpg&quot;&gt;&lt;img src=&quot;/wp-content/uploads/2008328153753877_2.jpg&quot; alt=&quot;&quot; width=&quot;500&quot; height=&quot;333&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;之前有个Q友问过我cms的事情，还发给过我他设计的cms结构。我看完之后只有2点意见，一是把“友情链接”改成“连接管理”，一是&amp;quot;广告管理&amp;quot;改成“展示单元管理”。&lt;/p&gt;
&lt;p&gt;原因很简单，cms不能把功能写固定了。“友情链接”仅限于连接交换等，这个概念存在于至少十年以上，在很多人的概念里根深蒂固。但是，他不是cms的组成部分。“广告”也是如此，cms不是为友情和广告服务的。&lt;/p&gt;
&lt;p&gt;cms是管理网站资源的。&lt;/p&gt;
&lt;p&gt;网站的资源有哪些？A：文章，B：用户，C：图片，D：文件，E：评论，F：页面，这是到多选题，你选哪些作为cms的资源呢？&lt;/p&gt;
&lt;p&gt;A：文章，入选。只要它有内容，即便没有标题，也是当做文章，进入Article表，作为管理的第一内容。&lt;/p&gt;
&lt;p&gt;B：用户，不选。用户系统是单独的系统，不是吗？尤其加上OpenID之后，用户的管理更加的独立于cms。&lt;/p&gt;
&lt;p&gt;C：图片，入选。&lt;/p&gt;
&lt;p&gt;D：文件，入选。&lt;/p&gt;
&lt;p&gt;E：评论，不选。它虽然附属到其他资源上，但是由于评论的审核，显示，性能等原因，它也应该独立出去。&lt;/p&gt;
&lt;p&gt;F：页面，入选。&lt;/p&gt;
&lt;p&gt;对于Rails cms，该如何管理所有的资源呢？plugin更适合去做B和E的管理。cms做好A，C，D，F的组织。&lt;/p&gt;
&lt;p&gt;上面的描述，适合做小型网站，如果是一个大型站点，该如何进一步设计呢？&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/wp-content/uploads/2133640_101557004797_2.jpg&quot;&gt;&lt;img src=&quot;/wp-content/uploads/2133640_101557004797_2.jpg&quot; alt=&quot;&quot; width=&quot;350&quot; height=&quot;335&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;问题一：目前的项目是一个综合门户网站，含有大量新闻资讯，文章，图片，视频（含连接）等。该如何用cms管理这个门户网站？&lt;/p&gt;
&lt;p&gt;问题二：如果cms支持多站点，又该如何设计呢？&lt;/p&gt;
&lt;p&gt;我的考虑：&lt;/p&gt;
&lt;p&gt;1、全站html静态化。这个特点来自dede的长期使用，静态化的优点不用多说。&lt;/p&gt;
&lt;p&gt;2、独立的评论模块。其实只要一个唯一的url，就可以显示它的评论了。评论的ajax加载，审核，添加，显示等要求，没必要交给cms去处理。评论的独立，也减少了垃圾评论攻击导致cms的性能下降。&lt;/p&gt;
&lt;p&gt;3、独立的用户模块。sns热起来之后，很多人更加关注人与人，人与资源之间的互动。对于资源，用户需要做的是分享，对于人，用户需要关注。（关注后，用户需要得到关注资源的动态。）&lt;/p&gt;
&lt;p&gt;4、plugin支持。最近研究redmine，现在研究cms，对plugin的使用更加有体会。&lt;/p&gt;
&lt;p&gt;5、多站点与单站点。cms应该支持多站点，但是具体实现方案，如编辑器，图文混排，文件上传，模版编辑等，还可以作为单站点使用方案。&lt;/p&gt;
&lt;p&gt;6、云平台部署。这是最深刻的一点，如何快速的利用云平台资源，如盛大云，将站点快速的让客户看到，使用到，是cms应该解决的。很多cms只卖代码，但是像locomotive cms，即卖代码，又提供hosting解决方案，是我个人倾向的模式。&lt;/p&gt;
&lt;p&gt;7、私有代码库。我认为，对于一个服务型的项目，私有的代码库可以最大程度避免误操作，可以让代码人员不必关心业务部分，而直接升级主体代码，还可以让整体开发流程更易于控制。&lt;/p&gt;
&lt;p&gt;8、开发者社区。开发者是容易孤独的群体，围绕cms，拥有一个活跃的开发者社区，会让参与的人快乐一点，不是吗？&lt;/p&gt;
&lt;p&gt;9、开发者在线交易平台。作为开发者，任何一个开发出来的作品，只要符合开发标准，就可以在开放平台交易。这里需要解决的是，标准的制定。&lt;/p&gt;
&lt;p&gt;10、教学平台。4月份的北京之行，让我更坚信这个教学平台的意义。&lt;/p&gt;
&lt;p&gt;声明：以上观点，出于个人承接的项目对cms的需求，以及个人在工作中的经验思考，总结而来。仅作参考。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/wp-content/uploads/0140760085.jpg&quot;&gt;&lt;img src=&quot;/wp-content/uploads/0140760085.jpg&quot; alt=&quot;&quot; width=&quot;360&quot; height=&quot;360&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;写到这里，对cms的想法差不多写完了。这5篇系列的文章，属于李玮个人原创，如有转载，请注明出处为“里克的自习室”。感谢您对Rails的支持。&lt;/p&gt;
&lt;p&gt;最后再送给大家一首词，以供消遣。&lt;/p&gt;
&lt;p&gt;秦观，《如梦令》&lt;/p&gt;
&lt;p&gt;莺嘴啄花红溜，燕尾点波绿皱。指冷玉笙寒，吹彻小梅春透。依旧，依旧，人与绿杨俱瘦。&lt;/p&gt;
&lt;p&gt;李清照的《如梦令》大家都熟悉，时间上，秦观去世的时候，李清照刚刚16岁。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/cms-part-v</link>
                <guid>http://liwei78.github.io/blog/cms-part-v</guid>
                <pubDate>2012-06-14T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>cms系列四：输赢成败，又争由人算</title>
                <description>&lt;hr /&gt;
&lt;p&gt;写在前面：&lt;/p&gt;
&lt;p&gt;今天的标题语，出自金庸《天龙八部》的《洞仙歌》。词的主旨是纠结，&lt;/p&gt;
&lt;p&gt;12款rails cms，&lt;a href=&quot;http://blog.arunace.com/12-ruby-on-rails-content-management-systems-cms/&quot; target=&quot;_blank&quot;&gt;点击这里查看&lt;/a&gt;，&lt;a href=&quot;http://www.iteye.com/news/23222&quot; target=&quot;_blank&quot;&gt;中文翻译在这里&lt;/a&gt;。继续最后四个cms的介绍。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/wtg/flagship_docs&quot; target=&quot;_blank&quot;&gt;Flagship Docs&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这是一个文档管理系统，有搜索功能，我并未调试它的代码，不多做评价。从github的记录看，2011年至今，它为更新过。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.caseincms.com/&quot; target=&quot;_blank&quot;&gt;Casein&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Casein是个干净的系统，按照Install说明安装之后，可以看到它比较清新的后台界面。&lt;/p&gt;
&lt;p&gt;Casein的用法也很简单，自己scaffold一个资源，然后在后台去管理，至于其他的设计，还是自己按照Rails的要求去设计，总体的看，Casein适合做一些典型企业站。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/wp-content/uploads/snapshot-2012-06-14-02.20.34.png&quot;&gt;&lt;img src=&quot;/wp-content/uploads/snapshot-2012-06-14-02.20.34-300x151.png&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;151&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;点击看大图，网上没有例子，大家自己调试吧，会发现一个错误。哎。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.browsercms.org/&quot; target=&quot;_blank&quot;&gt;Browser &lt;span class=&quot;caps&quot;&gt;CMS&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Browser CMS是为团队写作设计的，它使用了最新的Rails3.2运行环境，可以设置各种写作控制权限，按照workflow控制编写发布流程。&lt;/p&gt;
&lt;p&gt;遗憾的是我gem没有安装成功它，提示连接错误，也没有google到它的demo。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/svenfuchs/adva_cms&quot; target=&quot;_blank&quot;&gt;Adva cms&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Adva的特点没有多写，只有一个，它安装在vender里。这是一个不影响主体开发的设计，如果急需一个管理工具，可以试试Adva cms。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/wp-content/uploads/adva_cms_admin.jpg&quot;&gt;&lt;img src=&quot;/wp-content/uploads/adva_cms_admin-300x188.jpg&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;188&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;到此，12款cms的介绍就结束了，可是我心中cms的设想还没结束。下一篇将继续讨论，我心中的cms。&lt;/p&gt;
&lt;p&gt;最后，把《洞仙歌》的全文贴一下：&lt;/p&gt;
&lt;p&gt;输赢成败，又争由人算？且自逍遥没人管。&lt;/p&gt;
&lt;p&gt;奈天昏地暗、斗转星移。风骤紧、缥缈峰头云乱。&lt;/p&gt;
&lt;p&gt;红颜弹指老、刹那芳华。&lt;/p&gt;
&lt;p&gt;梦里真真语真幻。同一笑，到头万事俱空。&lt;/p&gt;
&lt;p&gt;胡涂醉、情长计短。解不了、名缰系嗔贪。&lt;/p&gt;
&lt;p&gt;却试问、几时把痴心断？&lt;/p&gt;
&lt;p&gt;声明：本文属李玮原创作品，所引用的内容均来自互联网。转载请注明出处为“里克的自习室”，谢谢您对Rails的支持。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/cms-part-iv</link>
                <guid>http://liwei78.github.io/blog/cms-part-iv</guid>
                <pubDate>2012-06-14T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>cms系列三：长安古道马迟迟</title>
                <description>&lt;hr /&gt;
&lt;p&gt;写在前面：&lt;br /&gt;
&lt;a href=&quot;http://baike.baidu.com/view/2134.htm&quot; target=&quot;_blank&quot;&gt;柳永的百科&lt;/a&gt;里，讲了很多故事，有兴趣的朋友可以一看，“奉旨填词”一段，不知是真是假。&lt;/p&gt;
&lt;p&gt;12款rails cms，&lt;a href=&quot;http://blog.arunace.com/12-ruby-on-rails-content-management-systems-cms/&quot; target=&quot;_blank&quot;&gt;点击这里查看&lt;/a&gt;，&lt;a href=&quot;http://www.iteye.com/news/23222&quot; target=&quot;_blank&quot;&gt;中文翻译在这里&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;前两篇文章里，写了zena，webiva，type，内容有点少，今天多写一些吧。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://slatecms.wvu.edu/&quot; target=&quot;_blank&quot;&gt;Slate&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Slate不能直接下载代码，需要WVU的开发者向官方申请，并且要说明使用的目的。slate的目标是快速的建立传统类型网站，这可能和它的团队背景，&lt;a href=&quot;http://www.wvu.edu/&quot; target=&quot;_blank&quot;&gt;西弗吉尼亚大学&lt;/a&gt;有关，当然，这是臆测，说传统类型网站，我第一个想到的是要给40-60岁客户使用的网站，并且要面临无数的要求。当然，客户要求的就是合理的，关键在于我们在开始的时候，如何做出选择，来应对这种改变，和改变带来的风险。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://slatecms.wvu.edu/about&quot; target=&quot;_blank&quot;&gt;slate的fixtures&lt;/a&gt;，看上去很适合企业应用，依照它的功能列表开发，省却很多功能思考的时间。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.skylinecms.nl/&quot; target=&quot;_blank&quot;&gt;Skyline cms&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这是一个让我有点失望的cms，不是它不好，是它不适合我的审美。它进入后台，是可视化编辑所有页面。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/wp-content/uploads/snapshot-2012-06-13-02.03.21.png&quot;&gt;&lt;img src=&quot;/wp-content/uploads/snapshot-2012-06-13-02.03.21-300x177.png&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;177&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;来自荷兰的cms，&lt;a href=&quot;http://www.skylinecms.nl/overview/live_demo&quot; target=&quot;_blank&quot;&gt;点击这里&lt;/a&gt;进入它的演示入口。&lt;/p&gt;
&lt;p&gt;skyline cms 符合seo优化要求，提供了外部数据接口，和基于solr的全文检索，所有的页面，内容和文件，都可以加入到索引中。缺点是，它不支持多站点。&lt;/p&gt;
&lt;p&gt;接下来是三个经常被提到的cms了。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://refinerycms.com/&quot; target=&quot;_blank&quot;&gt;Refinery cms&lt;/a&gt; 和 &lt;a href=&quot;http://radiantcms.org/&quot; target=&quot;_blank&quot;&gt;Radiant cms&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;介绍上讲的“模块化、可扩展、设计灵活、支持多语言”，已经是众多cms的共同特点了，相比其他支持多站点的cms，refinery只支持单站点。&lt;/p&gt;
&lt;p&gt;refinery的&lt;a href=&quot;http://demo.refinerycms.com/&quot; target=&quot;_blank&quot;&gt;管理后台&lt;/a&gt;界面是亮点。&lt;/p&gt;
&lt;p&gt;radiant和refinery有太多的相似，而且同样不支持多站点。radiant的特性里，自定义模版语言是其亮点所在。&lt;/p&gt;
&lt;p&gt;两者相比，refinery更老一些，也展示了更多的&lt;a href=&quot;http://refinerycms.com/showcase&quot; target=&quot;_blank&quot;&gt;客户案例&lt;/a&gt;，radiant就保守很多，2010年7月发布了0.9版本，目前的版本是1.0.0。官网上提供了一些扩展，但是跟refinery比起来，缺少showcase的支持，显得底气不足。&lt;/p&gt;
&lt;p&gt;Rails本身是个优秀的产品，基于它的cms，无论是新人旧者，都是很好的学习对象，每一款都有自己的生存空间，驾驭好一款，都是对Rails的深造。所以各位看客，我只是从一个不客观的角度去看他们，因为，我要找一款合适的cms，为之投入我大量的时间和经历，为客户提供有质量的开发。仅此而已。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.locomotivecms.com/&quot; target=&quot;_blank&quot;&gt;locomotive cms&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这是一款cms大作，使用MongoDB作为自己的数据库，支持快速部署到Heroku和Amazon ec2上，使用Liqid模版引擎。&lt;/p&gt;
&lt;p&gt;打开locomotive的页面时间痛苦的事情，这里是它的&lt;a href=&quot;https://github.com/locomotivecms/engine&quot; target=&quot;_blank&quot;&gt;github页面&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;能够使用Rails与Heroku的组合是无比幸福的，cms为企业站服务的时候，最重要的是要让客户先看到，先用到，节省一切可以节省的时间。&lt;/p&gt;
&lt;p&gt;如果你打算用loco来开发一系列的企业站，就做好加入他们团队的准备吧。这是一个运营时间不长的项目，如果碰到致命的bug，就只能求救与开发团队了，如果他们有时间的话。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/wp-content/uploads/ms_large.jpg&quot;&gt;&lt;img src=&quot;/wp-content/uploads/ms_large-300x202.jpg&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;202&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;它的后台页面还是挺精致的&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/wp-content/uploads/ie_large.jpg&quot;&gt;&lt;img src=&quot;/wp-content/uploads/ie_large-300x175.jpg&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;175&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;可以在前台自主编辑&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/wp-content/uploads/cc_large.jpg&quot;&gt;&lt;img src=&quot;/wp-content/uploads/cc_large-288x300.jpg&quot; alt=&quot;&quot; width=&quot;288&quot; height=&quot;300&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;表单很漂亮，都是外在美&lt;/p&gt;
&lt;p&gt;:-P 感谢朋友的信息，这里是locomotive的&lt;a href=&quot;http://www.locomotivehq.com/&quot; target=&quot;_blank&quot;&gt;演示站点&lt;/a&gt;，可以申请自己的站点。看得出来，locomotive是在朝着heroku的商用开发前进的，有了很好的hosting解决方案，locomotive需要做的就是为客户提供便捷的建站服务。&lt;/p&gt;
&lt;p&gt;写到这里，先做一个小结。cms不是万能的，每个cms都有自己设立时候的初衷，由此，而产生出它独特的特点。&lt;/p&gt;
&lt;p&gt;最后，继续分享给大家一首柳永的词《蝶恋花》&lt;/p&gt;
&lt;p&gt;伫倚危楼风细细，望极春愁，黯黯生天际。&lt;/p&gt;
&lt;p&gt;草色烟光残照里，无言谁会凭阑意。&lt;/p&gt;
&lt;p&gt;拟把疏狂图一醉，对酒当歌，强乐还无味。&lt;/p&gt;
&lt;p&gt;衣带渐宽终不悔，为伊消得人憔悴。&lt;/p&gt;
&lt;p&gt;声明：本文属李玮原创作品，所引用的内容均来自互联网。转载请注明出处为“里克的自习室”，谢谢您对Rails的支持。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/cms-part-iii</link>
                <guid>http://liwei78.github.io/blog/cms-part-iii</guid>
                <pubDate>2012-06-13T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>cms系列二：塞下秋来风景异</title>
                <description>&lt;hr /&gt;
&lt;p&gt;写在前面：&lt;/p&gt;
&lt;p&gt;标题来自范仲淹的《渔家傲》。古人的诗词里经常写到银河，可是现在的居住环境，连星星也只能看到最亮的那几颗了。&lt;/p&gt;
&lt;p&gt;12款rails cms，&lt;a href=&quot;http://blog.arunace.com/12-ruby-on-rails-content-management-systems-cms/&quot; target=&quot;_blank&quot;&gt;点击这里查看&lt;/a&gt;，&lt;a href=&quot;http://www.iteye.com/news/23222&quot; target=&quot;_blank&quot;&gt;中文翻译在这里&lt;/a&gt;。继续按照它的罗列，来详细的分析下这些cms。当然，我不是个太规矩的人。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://webiva.org/&quot; target=&quot;_blank&quot;&gt;webiva&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&amp;#8220;Webiva是一个基于Rails开发的Web 2.0的开源网站构建系统，提供可扩展模块系统，允许轻松对功能进行扩展。&amp;#8221;&lt;/p&gt;
&lt;p&gt;每一款cms，都有它出生的来由，都有它服务的客户，这是它继续发展的动力。所以每个cms不是来解决cms面临的一切问题的。webiva就是这样，它界面很清新，或者叫卡通，管理上有比较清楚的按钮，这第一感觉，让它看起来更适合做学校，幼儿园的网站。&lt;/p&gt;
&lt;p&gt;但是人家的目的不那么小家子气。它的几个特点，可视化编辑网站模版，快速的调整网站栏目结构和页面，支持更多的module，并且可以内建多个站点，并绑定各自的域名。按照它介绍里的说法，webiva是快速建站系统，而不是传统的cms。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/wp-content/uploads/files5.png&quot;&gt;&lt;img src=&quot;/wp-content/uploads/files5-300x210.png&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;210&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://webiva.org/screenshots&quot; target=&quot;_blank&quot;&gt;点击这里，还有大量的网站截图&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;webiva的作者是典型的技术流家庭，老婆做设计，老公做代码，webiva的想法来自2006年的micro-cms，项目1.0使用的是Rails2.3.5，2.0或许已经迁移到了Rails3上。&lt;/p&gt;
&lt;p&gt;如果各位想深入的使用webiva，可以到它的开发论坛上，跟作者交流下，地址：&lt;a href=&quot;http://www.webiva.net/forum&quot; target=&quot;_blank&quot;&gt;http://www.webiva.net/forum&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/wp-content/uploads/snapshot-2012-06-10-05.31.36.png&quot;&gt;&lt;img src=&quot;/wp-content/uploads/snapshot-2012-06-10-05.31.36-300x194.png&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;194&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;不要着急，休息，休息一下&lt;/p&gt;
&lt;p&gt;好，开始介绍下一个。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://fdv.github.com/typo/&quot; target=&quot;_blank&quot;&gt;typo&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;typo是一个强大的博客系统，从2005年至今，它可以算作是最古老的rails博客系统，它有自己的引擎，有很好的SEO优化，支持theme和插件扩展。&lt;/p&gt;
&lt;p&gt;typo是很正统的博客系统，现在看上去就像是Rails里的wordpress，当然，wp越走越快。type 6.0使用的是Rails3.0.10，type6.1使用的是ruby1.9，并且是Rails3.0系列的最后一个。&lt;/p&gt;
&lt;p&gt;typo的代码也是很值得仔细研究的，讲到这，想到了当时的另一套博客程序，&lt;a href=&quot;http://www.mephistoblog.com/&quot; target=&quot;_blank&quot;&gt;mephistoblog&lt;/a&gt;，它的代码也值得研究。但是现在看了一下它，还是停留在2011年的版本上，一年来没有什么改变，相比其他cms的活跃程度，mephisto真的是“长烟落日孤城闭”了。可能改叫大菠萝，或许会火吧。&lt;/p&gt;
&lt;p&gt;typo和mephisto当时都提供了转移wp到自己平台的方法，也有很多Rails博客，至于用他们来制作企业级项目，我没有找到。可能他们只适合博客群体和Rails的Geek吧。&lt;/p&gt;
&lt;p&gt;typo的demo在&lt;a href=&quot;http://demo.typosphere.org/&quot; target=&quot;_blank&quot;&gt;这里&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/wp-content/uploads/20120610192321.png&quot;&gt;&lt;img src=&quot;/wp-content/uploads/20120610192321-300x145.png&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;145&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;后台的模板，貌似5美元就可以买到&lt;/p&gt;
&lt;p&gt;本篇介绍了两套cms，下一篇会有重量级Rails cms登场了。来，再为各位送上一首宋词：&lt;/p&gt;
&lt;p&gt;姜夔，《扬州慢》&lt;/p&gt;
&lt;p&gt;淳熙丙申正日，予过维扬。夜雪初霁，荠麦弥望。入其城则四壁萧条，寒水自碧，暮色渐起，戍角悲吟。予怀怆然，感慨今昔，因自度此曲。千岩老人以为有“黍离”之悲也。&lt;/p&gt;
&lt;p&gt;淮左名都，竹西佳处，解鞍少驻初程。过春风十里，尽荠麦青青。自胡马窥江去后，废池乔木，犹厌言兵。渐黄昏，清角吹寒，都在空城。&lt;/p&gt;
&lt;p&gt;杜郎俊赏，算而今重到须惊。纵豆蔻词工，青楼梦好，难赋深情。二十四桥仍在，波心荡冷月无声。念桥边红药，年年知为谁生？&lt;/p&gt;
&lt;p&gt;评：&lt;/p&gt;
&lt;p&gt;《白石道人歌曲》收词八十首，其中十七首带有曲谱。《扬州慢》、《杏花天影》、《姜凉犯》、《暗香》《疏影》、《徵招》、《角招》等十四首是他自创的词调和乐曲；三首是填词配曲的，内有一首填的是范成大的《玉梅令》。这十七首，每首定有宫调，并以宋代工尺字谱(与今流行的工尺谱有所不同)斜行注节，扣于字旁。&lt;/p&gt;
&lt;p&gt;白石创制的词调《扬州慢》，是他成熟时期的代表作。孝宗淳熙三年(1176)冬，他二十二岁，自汉阳出游，途经金人两次蹂躏、惨遭兵燹的扬州，看到昔日繁华的商业都城，已是“市尘尽荠麦，号角吹宵寒”，更显得空荡凄凉。眼前的景象和爱国的情思，激起他强烈的感情，用警辟对比的词藻度成此曲，传为佳作。&lt;/p&gt;
&lt;p&gt;姜白石一生困蹇，怀才不遇，他在饱经颠沛转徙的困顾生活后，嘉定元年（1208）病卒于临安(今杭州)水磨方氏馆旅邸。幸得友人捐助，始获就近安葬。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/cms-part-ii</link>
                <guid>http://liwei78.github.io/blog/cms-part-ii</guid>
                <pubDate>2012-06-10T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>cms系列一：东风夜放花千树</title>
                <description>&lt;hr /&gt;
&lt;p&gt;写在前面：&lt;/p&gt;
&lt;p&gt;写东西有时候爱应景，比如心里高兴就写上“舌尖上的cms”，但是自己看完也觉得肉麻。可是，再这么平铺的写下去，没有点新鲜感，估计自己都不愿意看了。手里有一套《诗词曲赋文》集，从高中一直读到现在，就用宋词里的章句，作为每一篇的标题吧。&lt;/p&gt;
&lt;p&gt;什么是cms&lt;/p&gt;
&lt;p&gt;内容管理系统，缩写cms。这是本系列文章里要讨论的主角。它有很多面孔，每个cms都有各自的功能，各自的卖点。&lt;/p&gt;
&lt;p&gt;作为网站的内容管理系统，cms要担当起多种管理任务。最简单和常见的，是它要管理文章，和文章内的图片等。再多一些要求，cms要管理管理员和其他角色权限。再多一些要求，它还要管理网站的模版，注册用户，评论信息等等。&lt;/p&gt;
&lt;p&gt;这就是cms，一个网站的管理核心。&lt;/p&gt;
&lt;p&gt;有了cms做核心，我们再为它换上不同的壳，去扮演不同的网站，学校，企业，购物，博客，社区，等等等等。&lt;/p&gt;
&lt;p&gt;国内的cms&lt;/p&gt;
&lt;p&gt;目前国内的cms，&lt;a href=&quot;http://www.baidu.com/s?wd=cms&quot; target=&quot;_blank&quot;&gt;从百度的结果看&lt;/a&gt;，有6个比较靠谱（不点名）。我个人常用的是dedecms，大大小小做了几十个网站，虽然不懂php，但是dede做网站也不用懂php，只要会用dede的各种功能，会html，css，jquery这几个基本技能，就可以搞定一个普通的企业站了。当然，还需要美工配合。剩下的，就是教客户如何使用他们。&lt;/p&gt;
&lt;p&gt;“客户的要求，就是cms要达到的目的。”&lt;/p&gt;
&lt;p&gt;cms要以客户为中心，以项目为中心，所以一套cms定天下是不科学的。每个cms有自身的发展史，有自身的界面特点，使用特点。为了满足各种客户需求，开发人员需要不断的调整自己的思路和代码实现。一个小小的文字改变，比如“广告管理”改成“内容块管理”，就让一些企业网站用户使用起来不那么意外了。&lt;/p&gt;
&lt;p&gt;国外的cms&lt;/p&gt;
&lt;p&gt;国外的cms中，有一些是博客类型的。在众多外包站点里，博客建站的成交量很大，也有着众多的专业团队来制作博客型的网站。一套博客程序完全可以承担企业网站，新闻网站，团队网站，产品网站的制作。wordpress，就是个典型。本系列将重点讨论的是Rails cms，但是也要学习其他各种类型的cms，做一个笔记总结。&lt;/p&gt;
&lt;p&gt;有一篇文章，详细的列举了国外的12款rails cms，&lt;a href=&quot;http://blog.arunace.com/12-ruby-on-rails-content-management-systems-cms/&quot; target=&quot;_blank&quot;&gt;点击这里查看&lt;/a&gt;，&lt;a href=&quot;http://www.iteye.com/news/23222&quot; target=&quot;_blank&quot;&gt;中文翻译在这里&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;国内cms特点&lt;/p&gt;
&lt;p&gt;不敢大肆的讲自己的观点，我只是讲讲自己看到的特点，至于不周和不对的地方，请大家在留言里指出。&lt;/p&gt;
&lt;p&gt;特点一：整站可静态化html&lt;/p&gt;
&lt;p&gt;特点二：“友情链接”，“广告管理”等字样明显，对cms有很大的误导&lt;/p&gt;
&lt;p&gt;特点三：适合国人操作，尤其适合企业用户。我关注的不是站长的想法。&lt;/p&gt;
&lt;p&gt;特点四：可以抓取&lt;/p&gt;
&lt;p&gt;上几个截图：&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/wp-content/uploads/snapshot-2012-06-05-09.54.49.png&quot;&gt;&lt;img src=&quot;/wp-content/uploads/snapshot-2012-06-05-09.54.49-300x180.png&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;180&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;phpcms的登陆界面，很多年没有变的布局&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/wp-content/uploads/snapshot-2012-06-05-10.10.58.png&quot;&gt;&lt;img src=&quot;/wp-content/uploads/snapshot-2012-06-05-10.10.58-300x155.png&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;155&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;清晰的页面布局，功能分配很明确&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/wp-content/uploads/snapshot-2012-06-09-11.15.55.png&quot;&gt;&lt;img src=&quot;/wp-content/uploads/snapshot-2012-06-09-11.15.55-300x138.png&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;138&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;java的泽元cms&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/wp-content/uploads/snapshot-2012-06-09-11.19.44.png&quot;&gt;&lt;img src=&quot;/wp-content/uploads/snapshot-2012-06-09-11.19.44-300x225.png&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;225&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;版本依旧是200909281030的帝国cms，失落的帝国&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/wp-content/uploads/snapshot-2012-06-09-11.23.45.png&quot;&gt;&lt;img src=&quot;/wp-content/uploads/snapshot-2012-06-09-11.23.45-300x217.png&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;217&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;.net的siteserver，可以多站点发布，只是界面比较gem.咳咳&lt;/p&gt;
&lt;p&gt;315时刻：百度某cms的产品时，发现其公司软件开发资质证书是假的，各位留神。&lt;/p&gt;
&lt;p&gt;特点五、国产的cms，在布局上都使用了frame嵌套，左右两部分，上方导航和左侧导航。整体框架无刷新，即可实现各种管理界面的切换。&lt;/p&gt;
&lt;p&gt;好了，接下来，逐个看看国外的Rails cms。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://zenadmin.org/en&quot; target=&quot;_blank&quot;&gt;zena&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Zena是一个基于Rails框架开发的CMS内容管理系统，支持多语言，版本控制，基于组的权限控制，图片剪裁和大小调整，对开发者非常友好。&lt;/p&gt;
&lt;p&gt;zena的安装很简单，直接用gem安装，github上有器代码，非常有学习价值。http://zenadmin.org/en/features 这里讲了它的几个特性，吸引我的是它后台编辑的能力，一个数据库支持多个站点管理，在线模版编辑和模版预定义。&lt;/p&gt;
&lt;p&gt;zena非常适合Rails的学习和教学，遗憾的是，它可怜的后台界面gem和它只能在ruby 1.8.7上运行。它的运行命令是 zena init。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/wp-content/uploads/snapshot-2012-06-09-11.47.26.png&quot;&gt;&lt;img src=&quot;/wp-content/uploads/snapshot-2012-06-09-11.47.26-300x136.png&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;136&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;真的可能大概或许，它只适合教学吧&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;好了，今天介绍了第12位的rails cms，明天按照上面提到的文章，介绍其他的cms。&lt;/p&gt;
&lt;p&gt;最后送上一首宋词，给大家欣赏：&lt;/p&gt;
&lt;p&gt;破阵子·为陈同甫赋壮词以寄之&lt;/p&gt;
&lt;p&gt;醉里挑灯看剑，梦回吹角连营。八百里分麾下炙，五十弦翻塞外声。沙场秋点兵。&lt;/p&gt;
&lt;p&gt;马作的卢飞快，弓如霹雳弦惊。了却君王天下事，赢得生前身后名。可怜白发生！&lt;/p&gt;
&lt;p&gt;作者：辛弃疾，出生的时候，金已经占了北方，处在南宋和金对抗的时代。有郭靖那种人的性格特点，正统思想严重，一生都在战斗状态。&lt;/p&gt;
&lt;p&gt;声明：本文属里克原创作品，所引用的内容均来自互联网。转载请注明出处为“里克的自习室”，谢谢对Rails的支持。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/cms-part-i</link>
                <guid>http://liwei78.github.io/blog/cms-part-i</guid>
                <pubDate>2012-06-10T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>走铁轨的人</title>
                <description>&lt;hr /&gt;
&lt;p&gt;Part I&lt;/p&gt;
&lt;p&gt;这是一份2012年上半年的总结。&lt;/p&gt;
&lt;p&gt;最近经历了一个失败项目，在这里写写心得。&lt;/p&gt;
&lt;p&gt;项目是用Rails实现一个类pinterest的项目，具体形式和之美，葡萄，美丽说，蘑菇街等网站类似。&lt;/p&gt;
&lt;p&gt;可是，这么一个目标明确的项目，为什么会失败呢。&lt;/p&gt;
&lt;p&gt;Part II&lt;/p&gt;
&lt;p&gt;Rails的开发貌似进入到一个淘汰期，3.0后的Rails，部署上是一个大难题，开发上面临更多的选择障碍。当然，一切一切，取决于经验。经过半年的折磨，笔记写了好多，最终还是会碰到各种编译问题，典型的是版本问题，部署问题。&lt;/p&gt;
&lt;p&gt;在aws上部署rails是件很开心的事情，但是拿回国内的服务器部署，就完全是另一个样子，各种无法访问，只能 package 所有的gem，只是，没有用过的东西，在第一次用的时候总有障碍，当障碍多了以后，我们就像超级玛丽一样，虽然能到终点，但是总要蹦蹦跳跳的。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/01200000007181115881009551065.jpg&quot;&gt;&lt;img class=&quot;aligncenter size-full wp-image-668&quot; title=&quot;01200000007181115881009551065&quot; src=&quot;http://railser.cn/wp-content/uploads/01200000007181115881009551065.jpg&quot; alt=&quot;&quot; width=&quot;430&quot; height=&quot;281&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Part &lt;span class=&quot;caps&quot;&gt;III&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;好吧，整理思路，重新开始。&lt;/p&gt;
&lt;p&gt;最近给别人的建议，都是能用php的，就不要用Rails，在部署上，开发人员的组合上，php可以有很好的团队和个人，可以有很现成的方案，甚至可以直接买到源代码，改一改就可以实现客户要求。&lt;/p&gt;
&lt;p&gt;而Rails呢？&lt;/p&gt;
&lt;p&gt;Part IV&lt;/p&gt;
&lt;p&gt;Rails已经不再适合做外包开发，这个想法有几点理由，1、找不到代码合作者，2、和美工严重脱节，在没有一个明确的项目经理的情况下，效率很低，3、维护期很难进行功能外包，维护的费用低，而占用的时间长，如果以外包为生，就是无穷尽的修改。&lt;/p&gt;
&lt;p&gt;当然，我讲的仅限于我自己，一个人的Rails开发者。&lt;br /&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/1282236489274.jpg&quot;&gt;&lt;img class=&quot;aligncenter  wp-image-669&quot; title=&quot;1282236489274&quot; src=&quot;http://railser.cn/wp-content/uploads/1282236489274.jpg&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;361&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Part V&lt;/p&gt;
&lt;p&gt;下一步，该怎么继续自己的Rails开发之路呢？&lt;/p&gt;
&lt;p&gt;最近酝酿写一些cms的分析，包括几套Rails cms 的使用笔记，和服务器管理的经验分享。&lt;/p&gt;
&lt;p&gt;现在想的，不是这个月要做什么，而是这个星期要做什么，然后把它做完。&lt;/p&gt;
&lt;p&gt;ok，Let&amp;#8217;s move.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/man-on-rails</link>
                <guid>http://liwei78.github.io/blog/man-on-rails</guid>
                <pubDate>2012-06-04T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>2012，忙，忙，忙</title>
                <description>&lt;hr /&gt;
&lt;p&gt;最近问我干嘛呢，我的回答都会是：忙。&lt;/p&gt;
&lt;p&gt;忙Rails项目，忙客户的网站维护，忙各种小事情。&lt;/p&gt;
&lt;p&gt;最近几个月对云平台的接触，让我内心的某个念头又开始“活动”了。基于云平台的企业网站管理架构，非常适合小作坊的管理。可是小作坊管理的代价，就是天天为电话担心，为Q留言担心，而最不想听到的，就是xxxx改一下，xxx访问不了了。。。&lt;/p&gt;
&lt;p&gt;怎么办？&lt;/p&gt;
&lt;p&gt;要想想如何解决小作坊管理的弊端，后面会一点点的写吧。（心里偷笑 :-P ，其实我知道如何写，就是太忙没时间。）&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/2012-busy-busy-busy</link>
                <guid>http://liwei78.github.io/blog/2012-busy-busy-busy</guid>
                <pubDate>2012-02-26T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>2012，云</title>
                <description>&lt;hr /&gt;
&lt;p&gt;最近研究各种云平台，Amazon AWS，盛大云，阿里云。5月份设计的appflying.com，看来可以移到云平台上继续它的2012旅程了。在云上，还有好多想法可以去实施，而且价格也都不贵，看来，2012从云开始吧。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/2012-cloud</link>
                <guid>http://liwei78.github.io/blog/2012-cloud</guid>
                <pubDate>2011-12-20T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>一个带BOM的utf-8文件引来的麻烦</title>
                <description>&lt;hr /&gt;
&lt;p&gt;很多朋友应该碰到过这句话吧：“Cannot modify header information &amp;#8211; headers already sent bygem(php文件)”。&lt;/p&gt;
&lt;p&gt;今天碰到了，起因是用ftp，在windows环境下，使用ftp的编辑功能，在线编辑了一个配置文件。然后就出现了这个提示。&lt;/p&gt;
&lt;p&gt;不论是百度还是google，都会给出一堆解决办法，可是，那个最正中要害呢？毕竟我们不是在做学术研究，而且我们碰到的也都是一些常见问题。&lt;/p&gt;
&lt;p&gt;好，找到了最关键的一句话：&lt;/p&gt;
&lt;p&gt;“如果使用utf-8编码，一定要去掉UTF-8中的BOM，这都是因为utf-8编码文件含有的bom原因，而php4,5都是不支持bom的。去掉bom，可以用Notepad++打开转换一下。”&lt;/p&gt;
&lt;p&gt;问题解决了。在此笔记一下。&lt;/p&gt;
&lt;p&gt;这里有一篇文章讲了一下原理：&lt;a href=&quot;http://blog.sina.com.cn/s/blog_570f6d940100h3vk.html&quot;&gt;http://blog.sina.com.cn/s/blog_570f6d940100h3vk.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;简单的说，utf-8不需要BOM，utf-16才需要它。&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/bom-in-utf8-file</link>
                <guid>http://liwei78.github.io/blog/bom-in-utf8-file</guid>
                <pubDate>2011-10-20T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>令人反感的discuz7.2论坛无提示音解决办法</title>
                <description>&lt;hr /&gt;
&lt;p&gt;最近的一个网站单子里，需要给客户用discuz7.2实现一个会员功能，dz是大品牌，何况康盛又被腾讯收购，质量应该可靠。所以反复衡量，dz成为首选了。（跟DZ和康盛的系列产品源渊太多了。）&lt;/p&gt;
&lt;p&gt;客户提出的问题还算顺利的一一解决，客户最后提出一个要求，要对最新的消息有一个提示。这个实现很简单，给客户讲解了如何设定声音，可是问题来了，我这里怎么都听不到声音，客户那里也是如此。&lt;/p&gt;
&lt;p&gt;怎么会这样，开始我以为是我浏览器的问题，但是几个浏览器测试都无声，这个是绝对不应该的。代码是官网下载的discuz7.2 utf8。什么情况？怎么办？&lt;/p&gt;
&lt;p&gt;网上查了一下竟然很多人反馈了这个问题，可是没有几个提出解决办法的，有两篇的解决办法尝试了一下，没有解决问题。难道是我的特例？？&lt;/p&gt;
&lt;p&gt;外包方式开发最可怕的是耽误进度和过多的向客户解释，为客户选择的产品，如果质量不过关，影响的绝对就是制作方的信誉。&lt;/p&gt;
&lt;p&gt;现在问题来了，如何解决。&lt;/p&gt;
&lt;p&gt;解决办法：&lt;/p&gt;
&lt;p&gt;1、先参考官方提供的一个解决办法，仅做参考，因为它也没解决问题。所以我真不知道官方的维护是干什么吃的。&lt;/p&gt;
&lt;p&gt;http://www.discuz.net/forum.php?mod=viewthread&amp;amp;tid=1523437&amp;amp;page=7#pid12811924&lt;/p&gt;
&lt;p&gt;2、因为mp3,wav等格式均无效，我让合作的美工把声音文件转成了swf，可以在这里下载。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/pm_sound.zip&quot; target=&quot;_blank&quot;&gt;下载论坛提示音swf格式&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;3、按照上面那篇提示文章，修改一下对应的文件，引用改成swf，并且简化swf的文件引用，因为那个player已经无用了，直接引用swf声音即可。下面是代码，希望能帮助一些朋友。&lt;/p&gt;
&lt;p&gt;templates/default/memcp_profile.htm 499行&lt;/p&gt;
&lt;p&gt;$(&amp;#8216;soundplayerlayer&amp;#8217;).innerHTML = AC_FL_RunContent(&amp;#8216;id&amp;#8217;, &amp;#8216;pmsoundplayer&amp;#8217;, &amp;#8216;name&amp;#8217;, &amp;#8216;pmsoundplayer&amp;#8217;, &amp;#8216;width&amp;#8217;, &amp;#8216;0&amp;#8217;, &amp;#8216;height&amp;#8217;, &amp;#8216;0&amp;#8217;, &amp;#8216;src&amp;#8217;, &amp;#8216;{$boardurl}images/sound/pm_&amp;#8217;+file+&amp;#8217;.swf&amp;#8217;, &amp;#8216;menu&amp;#8217;, &amp;#8216;false&amp;#8217;,  &amp;#8217;allowScriptAccess&amp;#8217;, &amp;#8216;sameDomain&amp;#8217;, &amp;#8216;swLiveConnect&amp;#8217;, &amp;#8216;true&amp;#8217;);							}&lt;/p&gt;
&lt;p&gt;templates/default/pm_checknew.htm 可以不改动，因为在我的方案里它已经没用了，如果有尝试的朋友，可以对应替换这段代码&lt;/p&gt;
&lt;pre&gt;
&amp;lt;script type=&quot;text/javascript&quot; reload=&quot;1&quot;&amp;gt;$('pmsound').innerHTML = AC_FL_RunContent('id', 'pmsoundplayer', 'name', 'pmsoundplayer', 'width', '0', 'height', '0', 'src', '{$boardurl}images/sound/pm_$pmsound.swf',  'menu', 'false',  'allowScriptAccess', 'sameDomain', 'swLiveConnect', 'true');&amp;lt;/script&amp;gt;
&lt;/pre&gt;
&lt;p&gt;两段代码的含义是一样的，都是直接引用swf声音文件。&lt;/p&gt;
&lt;p&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;templates/default/header.htm 在40行位置，增加&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style=&quot;color: #0000ff;&quot;&gt;&lt;span id=&quot;pmsound&quot;&gt;&lt;/span&gt;&lt;/span&gt; &lt;!--{if $prompt}--&gt;&lt;script type=&quot;text/javascript&quot; reload=&quot;1&quot;&gt;$('pmsound').innerHTML = AC_FL_RunContent('id', 'pmsoundplayer', 'name', 'pmsoundplayer', 'width', '0', 'height', '0', 'src', '{$boardurl}images/sound/pm_$pmsound.swf',  'menu', 'false',  'allowScriptAccess', 'sameDomain', 'swLiveConnect', 'true');&lt;/script&gt;&lt;!--{/if}--&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;此段是解决问题的关键，注意蓝色的部分，论坛代码里是缺失这个的，经检查，pm_checknew里的执行结果被插入到id=&amp;quot;append_parent&amp;quot;的一个 div中，而且，里面的&lt;span style=&quot;color: #0000ff;&quot;&gt;&lt;!--{if $s}--&gt;是无效的&lt;/span&gt;。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;4、到后台更新缓存，重新测试，声音提示成功。&lt;/p&gt;
&lt;p&gt;从发现问题到解决问题经历了几天的时间，这里问题解决不了，终究不能卡住不前的。所以选择好的产品，使用正确的方法，实在太关键。康盛将太多的心思用到了一些花哨的功能上，代码质量一直未见提高，产品硬伤内伤依旧，一个画皮一样的产品，只能靠忽悠来支撑了。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/discuz72-pm_sound</link>
                <guid>http://liwei78.github.io/blog/discuz72-pm_sound</guid>
                <pubDate>2011-08-23T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>readline load error的解决办法</title>
                <description>&lt;hr /&gt;
&lt;p&gt;服务器总算都调试完了，今天打算看一下一个app的具体信息，发现 rails c提示错误。&lt;/p&gt;
&lt;p&gt;这是个常见的错误：`require&amp;#8217;: no such file to load &amp;#8212; readline (LoadError)&lt;/p&gt;
&lt;p&gt;原因：缺少readline&lt;/p&gt;
&lt;p&gt;解决办法：进入rvm ruby1.9.7的src，安装readline&lt;/p&gt;
&lt;p&gt;具体：&lt;/p&gt;
&lt;p&gt;&amp;gt;&amp;gt; which ruby&lt;/p&gt;
&lt;p&gt;/usr/local/rvm/rubies/ruby-1.9.2-p180/bin/ruby&lt;/p&gt;
&lt;p&gt;&amp;gt;&amp;gt; cd /usr/local/rvm/src/ruby-1.9.2-p180/ext/readline&lt;/p&gt;
&lt;p&gt;&amp;gt;&amp;gt; ruby extconf.rb&lt;/p&gt;
&lt;p&gt;&amp;gt;&amp;gt; make&lt;/p&gt;
&lt;p&gt;&amp;gt;&amp;gt; make install&lt;/p&gt;
&lt;p&gt;再次rails c，解决问题了。&lt;/p&gt;
&lt;p&gt;笔记太有用了，都省去了回忆的时间。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/readline-load-error-rails307</link>
                <guid>http://liwei78.github.io/blog/readline-load-error-rails307</guid>
                <pubDate>2011-06-20T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>crontab的写法误解</title>
                <description>&lt;hr /&gt;
&lt;p&gt;crontab的标准写法参照这里，http://www.centos.org/docs/5/html/Deployment_Guide-en-US/ch-autotasks.html&lt;/p&gt;
&lt;p&gt;那么，每阁特定小时运行命令如何写呢？&lt;/p&gt;
&lt;p&gt;每隔30分钟，运行一次命令，可以写&lt;/p&gt;
&lt;p&gt;*/30 * * * * /sbin/do_something&lt;/p&gt;
&lt;p&gt;每隔4小时，可以写成&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;*/4 * * * /sbin/do&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;吗？不可以，这样会产生很严重的错误，导致我每分钟运行一次命令，直到某种情况下被中止。想到这我真心疼我的mysql和cpu。&lt;/p&gt;
&lt;p&gt;这里正确的写法应该是&lt;/p&gt;
&lt;p&gt;0 0,4,8,12,16,20 * * * /sbin/do (&lt;a href=&quot;https://github.com/javan/whenever&quot; target=&quot;_blank&quot;&gt;whenever&lt;/a&gt; 给出的写法)&lt;/p&gt;
&lt;p&gt;或者&lt;/p&gt;
&lt;p&gt;0 */4 * * * /sbin/do (我认为可行的写法，不过至今未确认，这个写法可以从保存时开始，每隔4小时执行一次)&lt;/p&gt;
&lt;p&gt;两个写法，都要在第一个位置，指定执行开始的分钟数。&lt;/p&gt;
&lt;p&gt;请各位指正，我也继续验证一下我的写法。&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/crontab</link>
                <guid>http://liwei78.github.io/blog/crontab</guid>
                <pubDate>2011-06-20T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>在CentOS5上部署Rails3应用</title>
                <description>&lt;hr /&gt;
&lt;p&gt;1、安装rvm&lt;/p&gt;
&lt;p&gt;安装rvm前，要先安装git。因为rvm的安装教程就是一个git的小脚本。&lt;/p&gt;
&lt;p&gt;&amp;gt;&amp;gt;wget http://kernel.org/pub/software/scm/git/git-1.7.5.3.tar.bz2&lt;/p&gt;
&lt;p&gt;Oop！这里有个问题，我tar不常用，这里tar xvfz git-gem 是会提出格式错误的，查了一下需要换一个命令：tar -xvjpf git-gem&lt;/p&gt;
&lt;p&gt;之后，&lt;/p&gt;
&lt;p&gt;make prefix=/usr/local all&lt;/p&gt;
&lt;p&gt;make prefix=/usr/local install&lt;/p&gt;
&lt;p&gt;看到git 版本后，安装rvm&lt;/p&gt;
&lt;p&gt;git &amp;#8212;version&lt;/p&gt;
&lt;p&gt;剩下的，就是按照 https://rvm.beginrescueend.com/rvm/install/ 的讲解一步步安装吧，最后，阿？为什么&lt;br /&gt;
&lt;pre&gt;type rvm | head -1&lt;/pre&gt;&lt;br /&gt;
会提示错误呢？我也被搞糊涂了，按照提示，我重新打开一个终端窗口，这下正常了。所以再看看文档吧。&lt;/p&gt;
&lt;p&gt;接着，安装1.8.7&lt;/p&gt;
&lt;p&gt;2、安装ruby 1.8.7和gem&lt;/p&gt;
&lt;p&gt;rvm install 1.8.7&lt;/p&gt;
&lt;p&gt;注：我又将用户切换回了root，而在进行到Load &lt;span class=&quot;caps&quot;&gt;RVM&lt;/span&gt; into your shell sessions as a function的时候，我不得不切换回user。&lt;/p&gt;
&lt;p&gt;rvm use 1.8.7&lt;/p&gt;
&lt;p&gt;显示正常了。&lt;/p&gt;
&lt;p&gt;安装gems&lt;/p&gt;
&lt;p&gt;http://rubygems.org/pages/download&lt;/p&gt;
&lt;p&gt;3、安装rails&lt;/p&gt;
&lt;p&gt;gem install rails &lt;del&gt;v 3.0.7 &lt;/del&gt;-no-rdoc &amp;#8212;no-ri&lt;/p&gt;
&lt;p&gt;如果安装rdoc和ri，我出现了问题，具体的情况未明。&lt;/p&gt;
&lt;p&gt;问题又来了，&amp;gt;&amp;gt; rails -v 找不到命令&lt;/p&gt;
&lt;p&gt;翻看文章的过程中，有一句话很重要，“gem install rails     # 注意不要加sudo，否则会安到系统的ruby下，而不是rvm的ruby下”&lt;/p&gt;
&lt;p&gt;这是在百度里查到的，可是不用root，rvm也没安装成功，还是我最开始忘记使用user，而在安装完rvm后，ruby也用了root权限安装。不知道这里的影响会有什么，总之，我犯了一个错误，版本搭配错误。&lt;/p&gt;
&lt;p&gt;应该是 ruby1.9.2搭配rails3.0.7。&lt;/p&gt;
&lt;p&gt;好吧，还好有rvm，安装ruby1.9.2，再 gem install rails，竟然没有出现第一次时候的 ri 错误。欣慰吧。&lt;/p&gt;
&lt;p&gt;这里还有一些细节，不影响整体即可，现在 rails new testrails 成功创建了一个应用。&lt;/p&gt;
&lt;p&gt;4、安装svn&lt;/p&gt;
&lt;p&gt;曾经熟悉的svn页面，已经转移到 apache 下，地址在这，http://subversion.apache.org/ ，用户手册在 http://svnbook.red-bean.com/ 。&lt;/p&gt;
&lt;p&gt;按照一些文章介绍，安装svn实在太复杂了，突然我想起来yum和apt-get。来试一下。&lt;/p&gt;
&lt;p&gt;yum install subversion&lt;/p&gt;
&lt;p&gt;成功了。&lt;/p&gt;
&lt;p&gt;按照&lt;a href=&quot;http://www.hostingrails.com/Subversion-Rails-Implement-Your-Own-Version-Control-System&quot; target=&quot;_blank&quot;&gt;这个文档&lt;/a&gt;，我配置过两次，这里不再详述了，又需要的朋友看一下。&lt;/p&gt;
&lt;p&gt;我每次都会参照它ignore的操作。&lt;/p&gt;
&lt;p&gt;5、&lt;span style=&quot;color: #ff0000;&quot;&gt;ssh配置&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;在我本地重新生成一个key，其实没必要的，我只是出于练习的目的。&lt;/p&gt;
&lt;p&gt;&amp;gt;&amp;gt; ssh-keygen -t rsa&lt;/p&gt;
&lt;p&gt;在服务器上&lt;/p&gt;
&lt;p&gt;&amp;gt;&amp;gt; mkdir .ssh (其实没太大必要了，因为我的key不打算放到这里了)&lt;/p&gt;
&lt;p&gt;然后传输这个key上去&lt;/p&gt;
&lt;p&gt;&amp;gt;&amp;gt; scp ~/.ssh/id_rsa.pub loginname@hostdomain:.ssh/authorized_keys&lt;/p&gt;
&lt;p&gt;这里把key命名为authorized_keys。按照一些教程的说明，综合起来简单笔记一下。&lt;/p&gt;
&lt;p&gt;在/etc/ssh/&lt;username&gt;建立文件夹，将authorized_keys mv进来，并给予权限&lt;/p&gt;
&lt;p&gt;&amp;gt;&amp;gt; chmod 755 &lt;username&gt;&lt;/p&gt;
&lt;p&gt;&amp;gt;&amp;gt; chmod 644 &lt;username&gt;/authorized_keys&lt;/p&gt;
&lt;p&gt;编辑/etc/ssh/sshd_config，改写这一行&lt;/p&gt;
&lt;p&gt;AuthorizedKeysFile    /etc/ssh/%u/authorized_keys&lt;/p&gt;
&lt;p&gt;并取消注释这两行&lt;/p&gt;
&lt;p&gt;RSAAuthentication yes&lt;/p&gt;
&lt;p&gt;PubkeyAuthentication yes&lt;/p&gt;
&lt;p&gt;保存后，&lt;/p&gt;
&lt;p&gt;&amp;gt;&amp;gt; /etc/init.d/sshd restart&lt;/p&gt;
&lt;p&gt;启动另一个终端，登录时弹出一个窗口提示输入密码，其实就是刚才生成key时候的passphrase。确认后，就不用输入密码直接登录了。&lt;/p&gt;
&lt;p&gt;这里有一个调试经验。&lt;/p&gt;
&lt;p&gt;&amp;gt;&amp;gt; ssh -v name@domain&lt;/p&gt;
&lt;p&gt;会输出交互信息，这里我发现它先校验key，如果不通过，就校验登录密码了。所以，如果上面的任何一个步骤有问题，比如权限不对或者写错字母，这里就会继续提示需要密码。&lt;/p&gt;
&lt;p&gt;如果上面的都正确了，这时就不用再次输入密码直接登录了。&lt;/p&gt;
&lt;p&gt;感谢&lt;a href=&quot;https://help.ubuntu.com/community/SSH/OpenSSH/Keys&quot; target=&quot;_blank&quot;&gt;这篇文章&lt;/a&gt;，让我节省了如此多的时间。感谢分享的精神。&lt;/p&gt;
&lt;p&gt;接着需要提高一些安全性了，常见的有&lt;/p&gt;
&lt;p&gt;PermitRootLogin no （禁止用root登录，这是默认的，当然有些时候会被其他的开发人员打开，检查一下是必要的）&lt;/p&gt;
&lt;p&gt;StrictModes yes （也是默认的）&lt;/p&gt;
&lt;p&gt;PasswordAuthentication no （禁用密码登录，加上这个安全性就足够了，当然还有其他，欢迎各位指点。）&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;时间过去了一个星期，这期间我在调试一个Rails程序，打算下面部署到服务器上，而不是随便用个railstest应付了事。这里又温习了很多rails得技巧，不过时间好快，一下子就是8天的时间。&lt;/p&gt;
&lt;p&gt;好了，我的Rails程序已经基本完成小样了，开始用capistrano设置。&lt;/p&gt;
&lt;p&gt;6、Capistrano&lt;/p&gt;
&lt;p&gt;这里稍微特殊一些的地方，是我用的svn+ssh（注意顺序，写反了不行）链接服务器并cap命令。这里没有办法证明一件事情，写出来供大家参考，就是私钥设置完，在服务器上也测试一下，比如&lt;/p&gt;
&lt;p&gt;svn checkout -q  -r5 svn+ssh://domain.com/test/trunk tmp&lt;/p&gt;
&lt;p&gt;这里会要求输入passphrase，或者添加host到know_host，都可能潜在的影响第一次cap的成功。当然，第一次cap失败可能是必然的，关键是下面分享一下我的deploy.rb给大家参考，减少一些查询的时间，当然很多东西还得看过说明才了解，建议看&lt;a href=&quot;http://help.github.com/capistrano/&quot; target=&quot;_blank&quot;&gt;这篇文章&lt;/a&gt;，很有帮助。&lt;/p&gt;
&lt;p&gt;下面是我的代码&lt;/p&gt;
&lt;p&gt;(略过)&lt;/p&gt;
&lt;p&gt;在配置svn的时候，会有不同的权限设置，比如网站目录会放到/var/www/中，我觉得这是安全性的问题，超过这个笔记的范围，就不记述了。不过这其间还是看了一些文章，后面做安全调整的时候会用上的。&lt;/p&gt;
&lt;p&gt;补充几个命令&lt;/p&gt;
&lt;p&gt;cap -H 查看帮助&lt;/p&gt;
&lt;p&gt;cap -T 查看任务，-vT查看更多任务&lt;/p&gt;
&lt;p&gt;cap -e deploy:cold 查看deploy:cold 的说明&lt;/p&gt;
&lt;p&gt;7、apapche，nginx和passenger&lt;/p&gt;
&lt;p&gt;因为CentOS上的apache已经安装好了，所以这里只要安装一下passenger就可以了，安装起来竟然无比简单，缺少的lib按照提示yum一下就可以了。&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;8、安装sqlite3-ruby的问题&lt;/p&gt;
&lt;p&gt;google了一下发现很多人安装这个出现问题，yum install sqlite3-ruby 也不可以，这里很奇怪，yum竟然找不到这个包。&lt;/p&gt;
&lt;p&gt;省去一些步骤，直接 yum search sqlite， 发现给出的包有：&lt;br /&gt;
&lt;div&gt;&lt;br /&gt;
&lt;div&gt;&lt;br /&gt;
&lt;div&gt;mono-data-sqlite.i386 : sqlite database connectivity for Mono&lt;/div&gt;&lt;br /&gt;
&lt;div&gt;pdns-backend-sqlite.i386 : SQLite backend for pdns&lt;/div&gt;&lt;br /&gt;
&lt;div&gt;php-pear-Log.noarch : Abstracted logging facility for &lt;span class=&quot;caps&quot;&gt;PHP&lt;/span&gt;&lt;/div&gt;&lt;br /&gt;
&lt;div&gt;python-sqlite.i386 : Python bindings for sqlite.&lt;/div&gt;&lt;br /&gt;
&lt;div&gt;qt4-sqlite.i386 : SQLite drivers for Qt&amp;#8217;s &lt;span class=&quot;caps&quot;&gt;SQL&lt;/span&gt; classes&lt;/div&gt;&lt;br /&gt;
&lt;div&gt;sqlite.i386 : Library that implements an embeddable &lt;span class=&quot;caps&quot;&gt;SQL&lt;/span&gt; database engine&lt;/div&gt;&lt;br /&gt;
&lt;div&gt;sqlite-devel.i386 : Development tools for the sqlite3 embeddable &lt;span class=&quot;caps&quot;&gt;SQL&lt;/span&gt; database engine.&lt;/div&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;原来是包的名称不对，所以&lt;/p&gt;
&lt;p&gt;yum install sqlite.i386&lt;/p&gt;
&lt;p&gt;提示已经安装&lt;/p&gt;
&lt;p&gt;yum install sqlite-devel.i386&lt;/p&gt;
&lt;p&gt;安装成功，再次 gem install sqlite3，提示&lt;/p&gt;
&lt;p&gt;sqlite3-ruby only supports sqlite3 versions 3.6.16+, please upgrade!&lt;/p&gt;
&lt;p&gt;好，可算有了进展。下载 http://www.sqlite.org/download.html 最新版本的sqlite，安装后，再次 gem install sqlite3，成功了！！&lt;/p&gt;
&lt;p&gt;回到rails目录，再次 bundle install。胜利完成。&lt;/p&gt;
&lt;p&gt;9、rake任务出错，/lib/rake.rb:32: warning: already initialized constant &lt;span class=&quot;caps&quot;&gt;RAKEVERSION&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;临时的解决办法，bundle exec rake RAILS_ENV=production  db:migrate&lt;/p&gt;
&lt;p&gt;这不是最终解决办法，还在找，刚才心急一下给发布了，其实还没写完呢。。&lt;/p&gt;
&lt;p&gt;问题发现了，是rake的问题，卸载之后重新安装rake 0.8.7，问题暂时解决。&lt;/p&gt;
&lt;p&gt;10、No such file or directory &amp;#8211; /tmp/mysql.sock&lt;/p&gt;
&lt;p&gt;CentOS的位置和方法，在此备注，ln -s /var/lib/mysql/mysql.sock /tmp/mysql.sock&lt;/p&gt;
&lt;p&gt;11、invalid packet: sequence number mismatch(3 != 1(expected))&lt;/p&gt;
&lt;p&gt;说是ruby-mysql2.9.4的问题，暂时使用2.9.3。但是问题依旧。&lt;/p&gt;
&lt;p&gt;gem &amp;#8216;mysql2&amp;#8217;, &amp;#8216;0.2.7&amp;#8217; 和gem &amp;#8217;mysql&amp;#8217;的区别&lt;/p&gt;
&lt;p&gt;最新版本的mysql2，是0.3.2，这是集成进rails3.1的，不适用于rails3.0.7，所以需要指定版本为0.2.7，环境可以为Raisl 3.0.x和mysql 5.x&lt;/p&gt;
&lt;p&gt;gem &amp;#8216;ruby-mysql&amp;#8217;和gem &amp;#8216;mysql-ruby&amp;#8217;的区别：都不用了，直接用 gem &amp;#8216;mysql&amp;#8217;&lt;/p&gt;
&lt;p&gt;“invalid packet: sequence number mismatch”的问题已经解决，去掉ruby-mysql的gem，直接使用 gem &amp;#8216;mysql&amp;#8217;&lt;/p&gt;
&lt;p&gt;在我的版本环境里，gem &amp;#8217;mysql2&amp;#8217;也不行，我的环境，rvm, ruby1.9.2p180, rails 3.0.7&lt;/p&gt;
&lt;p&gt;12、rake 0.9.2和0.8.7，会被同时安装，也会因为0.9.2产生问题，建议删除0.9.2&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;13、自动执行rake任务&lt;/p&gt;
&lt;p&gt;看了一些介绍，其实总结起来是三个事情&lt;/p&gt;
&lt;p&gt;（1）参照系统默认的crontab任务，这方面资料很多&lt;/p&gt;
&lt;p&gt;（2）rails的好处是gem和实现方案很多，建议使用 &lt;a href=&quot;https://github.com/javan/whenever&quot; target=&quot;_blank&quot;&gt;whenever&lt;/a&gt; 来实现，它会直接提示代码如何写，粘贴到当前用户的crontab里就可以&lt;/p&gt;
&lt;p&gt;（3）具体做法，&lt;/p&gt;
&lt;p&gt;&amp;gt;&amp;gt; crontab -e   编辑当前用户的cron任务&lt;/p&gt;
&lt;p&gt;&amp;gt;&amp;gt;  */30 * * * * /bin/bash -l -c &amp;#8216;cd /home/liwei/wwwroot/appflying.com &amp;amp;&amp;amp; RAILS_ENV=production rake autorss:work &amp;#8212;silent&amp;#8217;&lt;/p&gt;
&lt;p&gt;其实这个文件就这一行就可以，我完整的代码是&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;caps&quot;&gt;SHELL&lt;/span&gt;=/bin/bash&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;caps&quot;&gt;PATH&lt;/span&gt;=/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/rvm/gems/ruby-1.9.2-p180@global/bin&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;caps&quot;&gt;MAILTO&lt;/span&gt;=root&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;caps&quot;&gt;HOME&lt;/span&gt;=/home/liwei&lt;br /&gt;
*/30 * * * * /bin/bash -l -c &amp;#8216;cd /home/liwei/wwwroot/appflying.com &amp;amp;&amp;amp; RAILS_ENV=production rake autorss:work &amp;#8212;silent&amp;#8217;&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;写在最后：算是大功告成？？其实我没感觉，但是总算把我想写的内容写完了。后面还会有一些笔记。这个笔记到此用了2周时间，留念。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/rails-on-centos-step-by-step</link>
                <guid>http://liwei78.github.io/blog/rails-on-centos-step-by-step</guid>
                <pubDate>2011-06-07T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>hello, rails3.1 pre 第二部分</title>
                <description>&lt;hr /&gt;
&lt;p&gt;接着上一篇，问题继续。&lt;/p&gt;
&lt;p&gt;rake db:migrate&lt;/p&gt;
&lt;p&gt;&amp;gt;&amp;gt; rake aborted!&lt;/p&gt;
&lt;p&gt;&amp;gt;&amp;gt; undefined method `task&amp;#8217; for #&lt;Rails31test::Application:0x00000100de6a60&gt;&lt;/p&gt;
&lt;p&gt;好吧，继续找答案，此处还是省略一些细节，&lt;a href=&quot;http://community.engineyard.com/discussions/problems/1391-you-have-already-activated-rake-083-but-your-gemfile-requires-rake-087-consider-using-bundle-exec&quot; target=&quot;_blank&quot;&gt;直接看这里&lt;/a&gt;吧。&lt;/p&gt;
&lt;p&gt;&amp;gt;&amp;gt; bundle exec rake db:migrate&lt;/p&gt;
&lt;p&gt;问题暂时解决。&lt;/p&gt;
&lt;p&gt;至此，projects已经可以看到了，剩下的还在琢磨。&lt;/p&gt;
&lt;p&gt;补充一些链接：&lt;/p&gt;
&lt;p&gt;CoffeeScript  &lt;a href=&quot;http://jashkenas.github.com/coffee-script/&quot; target=&quot;_blank&quot;&gt;http://jashkenas.github.com/coffee-script/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;acronym title=&quot;Ruby Version Manager&quot;&gt;&lt;span class=&quot;caps&quot;&gt;RVM&lt;/span&gt;&lt;/acronym&gt;  &lt;a href=&quot;https://rvm.beginrescueend.com/&quot; target=&quot;_blank&quot;&gt;https://rvm.beginrescueend.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;caps&quot;&gt;SASS&lt;/span&gt;/&lt;span class=&quot;caps&quot;&gt;SCSS&lt;/span&gt;  &lt;a href=&quot;http://sass-lang.com/&quot; target=&quot;_blank&quot;&gt;http://sass-lang.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Sprockets  &lt;a href=&quot;http://getsprockets.org/&quot; target=&quot;_blank&quot;&gt;http://getsprockets.org/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/hello-rails31-pre-part2</link>
                <guid>http://liwei78.github.io/blog/hello-rails31-pre-part2</guid>
                <pubDate>2011-05-22T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>Hello, Rails3.1 pre</title>
                <description>&lt;hr /&gt;
&lt;p&gt;Rails3.1面世了，赶紧尝鲜吧。可是，第一个问题就出现了，更新失败。此处略过一堆字，直接笔记：安装rvm吧。&lt;/p&gt;
&lt;p&gt;https://rvm.beginrescueend.com/rvm/install/&lt;/p&gt;
&lt;p&gt;rvm简直是多版本ruby开发环境下的救世主。补充一下笔记：&lt;/p&gt;
&lt;p&gt;在安装完rvm后，rails new rails31test 新建了一个测试项目，一切正常，可是bundle的时候出错，就连 gem list都出错。查了一下，原来我们要重新安装gem，也要重新装rails。&lt;/p&gt;
&lt;p&gt;ps：各位是不是会觉得，我刚才安装了阿，为什么又要装一次？你是不是也看这个视频了？http://railscasts.com/episodes/265-rails-3-1-overview&lt;/p&gt;
&lt;p&gt;一切都没错，只是rvm 1.9.2@railspre &amp;#8212;create 是新建了一个gemsets，（此语法为简写）。这样我们还得安装一下bundler&lt;/p&gt;
&lt;p&gt;rails31test liwei$ gem install bundler&lt;/p&gt;
&lt;p&gt;rails31test liwei$ bundle&lt;/p&gt;
&lt;p&gt;rails31test liwei$ rails g scaffold project name:string&lt;/p&gt;
&lt;p&gt;/Users/apple/.rvm/gems/ruby-1.9.2-p180/gems/actionpack-3.1.0.beta1/lib/sprockets/railtie.rb:37:in `block (2 levels) in &lt;class:Railtie&gt;&amp;#8216;: undefined method `context&amp;#8217; for #&lt;Sprockets::Environment:0x0000010312c420&gt; (NoMethodError)&lt;/p&gt;
&lt;p&gt;查到这个问题的解决办法：https://github.com/rails/rails/issues/453&lt;/p&gt;
&lt;p&gt;在Gemfile里写：&lt;/p&gt;
&lt;p&gt;gem &amp;#8216;sprockets&amp;#8217;, &amp;#8216;2.0.0.beta.2&amp;#8217;&lt;/p&gt;
&lt;p&gt;原因：beta.2 is required by rails 3.1.0beta1&lt;/p&gt;
&lt;p&gt;&lt;span style=&quot;color: #ff0000;&quot;&gt;注意：安装的时候，使用的是 gem &amp;#8216;sprockets&amp;#8217;, &amp;#8216;2.0.0.beta.5&amp;#8217;，所以还要 bundle update sprockets 降回到beta.2&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;再次&lt;/p&gt;
&lt;p&gt;rails31test liwei$ rails g scaffold project name:string&lt;/p&gt;
&lt;p&gt;成功&lt;/p&gt;
&lt;p&gt;未完待续吧&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/hello-rails31-pre</link>
                <guid>http://liwei78.github.io/blog/hello-rails31-pre</guid>
                <pubDate>2011-05-21T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>redmine插件开发心得</title>
                <description>&lt;hr /&gt;
&lt;p&gt;上上周经Q友介绍，接了一个redmine插件开发的小项目。我很感兴趣的是可以借此机会把redmine熟悉一下，所以没太考虑价钱就答应了下来。现在想想，这次开发学到的东西很多，也认识了专业的开发团队，很值得。下面把redmine插件开发的经验笔记一下。&lt;/p&gt;
&lt;p&gt;先来截图：&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/wp-content/uploads/snapshot-2011-03-20-11.08.28.png&quot;&gt;&lt;img src=&quot;/wp-content/uploads/snapshot-2011-03-20-11.08.28-300x193.png&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;193&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;地址：&lt;a href=&quot;http://www.cocos2d-x.org/projects/cocos2d-x/apps&quot; target=&quot;_blank&quot;&gt;http://www.cocos2d-x.org/projects/cocos2d-x/apps&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;简单介绍下&lt;/p&gt;
&lt;p&gt;cocos2d-x is a multi-platform, light weight &amp;amp; developer-friendly C++ 2D mobile game engine, open source and released under &lt;span class=&quot;caps&quot;&gt;MIT&lt;/span&gt; License. It is a child branch of the famous &amp;#8220;cocos2d-iphone&amp;#8221; project, and will keep the primary features sync with it.&lt;/p&gt;
&lt;p&gt;更多细节请访问 &lt;a href=&quot;http://www.cocos2d-x.org/projects/cocos2d-x/wiki&quot; target=&quot;_blank&quot;&gt;http://www.cocos2d-x.org/projects/cocos2d-x/wiki&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;好了，说下这个插件实现的功能。&lt;/p&gt;
&lt;p&gt;一是管理发布平台，比如iOS，Android，WoPhone，Windows，Other，未来它还会有其他的平台。&lt;/p&gt;
&lt;p&gt;二是在这些平台分类里，上传app，比如时下最火的iOS app，android app等。当上传iOS app时，可自动采集该信息。&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;一、让我们开始&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;插件如何开发呢？下载其他插件的代码来研究是关键的第一步。因为之前对redmine插件开发一无所知，所以下面的笔记有点啰唆。&lt;/p&gt;
&lt;p&gt;先看一下官方发布的插件开发文档，&lt;a href=&quot;http://www.redmine.org/projects/redmine/wiki/Plugin_Tutorial&quot; target=&quot;_blank&quot;&gt;http://www.redmine.org/projects/redmine/wiki/Plugin_Tutorial&lt;/a&gt;，请大概的了解一下。然后，我们去&lt;a href=&quot;http://www.redmine.org/plugins&quot; target=&quot;_blank&quot;&gt;redmine插件列表&lt;/a&gt;，下载两个很有代表性的插件，redmine_polls和redmine_bookmarks，把它们放到 vendor/plugins 里。选择这两个插件的原因是它们都是自主上传，填写内容的。&lt;/p&gt;
&lt;p&gt;注意：在最新版本的redmine1.1中，polls会引起个异常。&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;二、如何管理插件&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;a href=&quot;/wp-content/uploads/snapshot-2011-03-29-10.10.25.png&quot;&gt;&lt;img src=&quot;/wp-content/uploads/snapshot-2011-03-29-10.10.25-300x105.png&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;105&quot; /&gt;&lt;/a&gt;这是插件管理界面，如果你按照上面插件教程开发的话，你会发现缺少了Configure功能。如何加入这个功能，并且它可以做什么？可以完全的参考上面两个插件中的init.rb 和games插件里的写法。&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;  &lt;span class=&quot;n&quot;&gt;settings&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:default&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt;
           &lt;span class=&quot;ss&quot;&gt;:partial&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;platforms/manage&amp;#39;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这两行代码的作用，使得我们可以编辑一个页面，这个页面里，实现了games的platform管理。当然，你也可以在configure里增加apps的管理，丰富管理员功能。&lt;/p&gt;
&lt;p&gt;这里要注意的是，权限如何分配了。&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;三、如何分配权限&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;按照文档的描述，我们可以很妥善的分配各个角色的权限。public =&amp;gt; true，即可将所指定的action开放给所有人，如果想屏蔽掉未登录的账号访问，:require =&amp;gt; :loggedin 即可。如果想对登录账号做区别，就需要针对每个action做以分别了。&lt;/p&gt;
&lt;p&gt;权限设置的文档不够全，建议大家多参考别人的代码，和看源代码分析一些用法。&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;四、设置导航菜单&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;在插件的init.rb文件里，需要单独写一遍插件所使用的路由规则，为了是插件地址更没关，我们的做一些代码上的牺牲。&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;ss&quot;&gt;ActionController&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:Routing&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Routes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;draw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;connect&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;projects/:project_id/apps&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:controller&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;apps&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:action&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;index&amp;quot;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;connect&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;projects/:project_id/apps/all&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:controller&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;apps&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:action&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;all&amp;quot;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;connect&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;projects/:project_id/apps/:id&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:controller&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;apps&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:action&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;show&amp;quot;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;resources&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:apps&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;:member&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:recommend&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:delete_pic&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:snatching&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:doing&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:post&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;:collection&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:all&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这是games里的设置，只是将三个方法做了前缀处理，这样可以和其他导航链接类似，都是 /projects/text_proj/apps/9 的形式。否则，按照resource的形式，将会是很难看（客户也不会接受的）/apps/9?project_id=text_proj&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;五、开发插件代码&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;这是我们最熟悉的部分了，此处省略一万字节。&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;六、使用js和css&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;这个地方有点麻烦，每次改动都得重启一下服务，因为每次重启才会将js代码和css文件同步到public下，当然我们可以在public下去写，收工前拿回到插件目录下，可是插件用的文件都不大，何况我都是production下开发，改哪个代码都得重启。（development下的执行速度你们是知道的）。&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;七、抓取app store&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;games插件有一个很重要的功能，就是到app store页面去采集app信息。代码在lib下的app_snatcher.rb，功能比较简单，仅做参考吧。&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;八、其他插件和gem&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;出于尝试的目的，我使用了will_paginate插件来实现分页，paperclip来保存app采集时候的icon和screenshot，在采集时使用了两个gem，请编辑你的environment.rb，增加&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;  &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;hpricot&amp;#39;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;mechanize&amp;#39;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol&gt;
	&lt;li&gt;九、总结&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;如果你觉得这个代码对你开发redmine插件又帮助，可以在这里下载它：https://github.com/liwei78/redmine-games 。&lt;/p&gt;
&lt;p&gt;欢迎和各位交个朋友，我个人的博客：&lt;a href=&quot;http://liwei.me&quot; target=&quot;_blank&quot;&gt;http://liwei.me&lt;/a&gt;，目前正在设计新的界面，会把我的介绍，包括工作内容，都整理发布到上面。&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;十：广告一下&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;目前我还运营这另外两个博客，&lt;a href=&quot;http://www.echangchun.net&quot; target=&quot;_blank&quot;&gt;电子长春&lt;/a&gt; 和 &lt;a href=&quot;http://top360buy.com&quot; target=&quot;_blank&quot;&gt;京东购物导航 &lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;前者关注电子商务动态和IT业内新闻，后者为京东商城点评，购物推介点评。&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;Update at 2011-6-15&lt;/p&gt;
&lt;p&gt;升级了一下，0.0.1到0.0.2，增加了lightbox显示screenshots&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/redmine-plugin-dev-note</link>
                <guid>http://liwei78.github.io/blog/redmine-plugin-dev-note</guid>
                <pubDate>2011-03-29T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>errors.add_to_base和errors.add</title>
                <description>&lt;hr /&gt;
&lt;p&gt;我们在页面上进行ajax校验属性的时候，有两种情况会碰到。&lt;/p&gt;
&lt;p&gt;一种是，只要出错，就给一个提示。这个比较常见的就是“您填写的用户名或密码不正确”。因为这里可能做了三组判断，先判断用户名是否存在，然后是密码是否为空，三是两者能否检索出一条纪录。如果那个出现为空，就直接返回false，controller也就直接宣布了上面那句话。&lt;/p&gt;
&lt;p&gt;第二种比较复杂，就是每个属性都会给一个详细的解释，甚至多个解释，比如邮件格式不正确，邮件不能为空，邮件应该以字母开头等等。因为ajax判断有时候不一定会把model实例传回来，而可能只给一个message，让view去针对该输入进行提示，比如那个经典的输入矿失去焦点时校验。&lt;/p&gt;
&lt;p&gt;针对上面两种方法，我经常用到的就是 errors.add_to_base 和 errors.add 方法。这里做以笔记。内容来自rdoc&lt;br /&gt;
&lt;pre lang=&quot;ruby&quot;&gt;&lt;br /&gt;
def validate!&lt;br /&gt;
    errors.add(:name, &amp;#8220;can not be nil&amp;#8221;) if name == nil&lt;br /&gt;
end&lt;br /&gt;
&lt;/pre&gt;&lt;/p&gt;
&lt;pre lang=&quot;ruby&quot;&gt;
def validate!
    errors.add_to_base(&quot;can not be nil&quot;) if name == nil
end
&lt;/pre&gt;
&lt;p&gt;其实，它们是一样的&lt;br /&gt;
&lt;pre lang=&quot;ruby&quot;&gt;&lt;br /&gt;
def add_to_base(msg)&lt;br /&gt;
    add(:base, msg)&lt;br /&gt;
end&lt;br /&gt;
&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;做以笔记，因为有时候真的会忘记这些小代码。&lt;/p&gt;
&lt;p&gt;补充几个方法：&lt;br /&gt;
&lt;pre lang=&quot;ruby&quot;&gt;&lt;br /&gt;
def Person.human_attribute_name(attr, options = {})&lt;br /&gt;
    attr&lt;br /&gt;
end&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
它可以把名称更人性化的输出，比如“first_name” 输出为 &amp;#8220;First name&amp;#8221;。但是它是一个过时的方法，我们会得到一个提示：&amp;quot;ActiveRecord::Errors#generate_message has been deprecated. Please use ActiveRecord::Error.new().to_s.&amp;quot;&lt;/p&gt;
&lt;pre lang=&quot;ruby&quot;&gt;
    company = Company.create(:address =&amp;gt; '123 First St.')
    company.errors.on(:name)      # =&amp;gt; [&quot;is too short (minimum is 5 characters)&quot;, &quot;can't be blank&quot;]
    company.errors.on(:email)     # =&amp;gt; &quot;can't be blank&quot;
    company.errors.on(:address)   # =&amp;gt; nil
&lt;/pre&gt;
&lt;p&gt;显而易见&lt;/p&gt;
&lt;pre lang=&quot;ruby&quot;&gt;
def on_base
    on(:base)
end
&lt;/pre&gt;
&lt;p&gt;对上面方法的一个补充。&lt;/p&gt;
&lt;p&gt;我喜欢netbeans的一个很重要原因就是查看这些代码的doc很方便，有时候一个简单的方法附近的doc就能读上和体会一阵子。呵呵。&lt;/p&gt;
&lt;p&gt;其他实用的方法欢迎各位补充。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/add_to_base-and-add-in-rails-model-errors</link>
                <guid>http://liwei78.github.io/blog/add_to_base-and-add-in-rails-model-errors</guid>
                <pubDate>2011-03-20T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>2011，让APP飞一会吧</title>
                <description>&lt;hr /&gt;
&lt;p&gt;2011，我有个惊奇的开始，我的iTouch有一天突然可以上网了，原因不明。紧接着几天，接触了一个开发项目，是做一个APP介绍的网站。可以用Rails。这一点实在让我暗地里欢喜：可算有得发挥了。接着，《让子弹飞》上映，那就让APP也跟着飞一会吧。&lt;/p&gt;
&lt;p&gt;经过一个多月的敲敲打打，&lt;a href=&quot;http://www.myappblog.net&quot; target=&quot;_blank&quot;&gt;www.myappblog.net&lt;/a&gt; 正式上线了，这里把以往Rails2.x用过的技术，在Rails3.0平台上又加强了一遍，认真体会了一下Rails 3带来的变革。&lt;/p&gt;
&lt;p&gt;MyAPPBlog网站是一个iPhone，iPad应用推荐，点评的网站，上面还增加了很多视频，&lt;a href=&quot;http://www.myappblog.net/videos/9&quot; target=&quot;_blank&quot;&gt;讲解游戏的玩法&lt;/a&gt;，看得我实在兴奋阿。对于不经常逛app store的我来说，没事看看MyAppBlog的资讯，能发现太多不知道的事情。MyAPPBlog就像一本App杂志，很方便，而且，它是我的又一个五星级的程序作品。（哈哈）&lt;/p&gt;
&lt;p&gt;从MyAPPBlog的网站定位上，可以看到它的特点：一是信息分享，比如最新的资讯，免费的app，二是APP操作视频，强烈建议把怒鸟的攻略发布一下，因为某人。。。。&lt;/p&gt;
&lt;p&gt;说说程序，MyAPPBlog用了haml和sass，这极大的提高了页面的可维护性。这不是一点点的改变，而是把页面结构，设定的更加规范，比如div class的设计&lt;/p&gt;
&lt;p&gt;.title&lt;/p&gt;
&lt;p&gt;= @app.title&lt;/p&gt;
&lt;p&gt;这样就实现了一个div层的结构。sass我目前用到它三个特性，变量，命名空间和继承。&lt;/p&gt;
&lt;p&gt;Rails3让MyAPPBlog的维护更加方便，尤其是之前很难受的fckeditor的附件处理，Rails3上可用的ckeditor gem，直接用了paperclip，图片文件上传省了很多代码。&lt;/p&gt;
&lt;p&gt;后面的工作集中在app store的数据分析上，任务挑战很大，但应用前景非常看好。&lt;/p&gt;
&lt;p&gt;这里稍微提一下，个人对工作的定义也有了一些改进，目前的工作应该叫技术支持。&lt;/p&gt;
&lt;p&gt;大多数人理解的外包是拿钱走人的形式，所以，技术支持，就是一个长期的服务状态，在Rails的领域里进行不断的积累，将自身的成果分享给每一个客户。&lt;/p&gt;
&lt;p&gt;写在最后：&lt;/p&gt;
&lt;p&gt;夜深人静，32岁的人，已经没有了当年创业时候的冲动，也没有开发搜索引擎时候的韧劲。事情按部就班的继续，看着一群比自己小10岁的年轻人，他们是不是也在经历我过去10年所做过的事情呢？我现在做的，未来做的，是不是他们10年后也要来做的呢？&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/myappblog-and-2011-new-wish</link>
                <guid>http://liwei78.github.io/blog/myappblog-and-2011-new-wish</guid>
                <pubDate>2011-02-25T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>paperclip上传后的原图大小</title>
                <description>&lt;hr /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;一时想不起来如何拼写了，写在这里作为笔记。&lt;/div&gt;
&lt;div&gt;&lt;/div&gt;
&lt;div&gt;has_attached_file :icon,&lt;/div&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;:styles =&amp;gt; &lt;span style=&quot;color: #ff0000;&quot;&gt;{ :original =&amp;gt; &amp;#8220;74&amp;#215;74&amp;#8221; }&lt;/span&gt;, # 将paperclip上传原图做大小限制&lt;/div&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;:url =&amp;gt; &amp;#8220;/:class/:attachment/:id/:style_:basename.:extension&amp;#8221;,&lt;/div&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;:path =&amp;gt; &amp;#8220;:rails_root/public/:class/:attachment/:id/:style_:basename.:extension&amp;#8221;,&lt;/div&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;:default_url =&amp;gt; &amp;#8220;/images/sample_icon.png&amp;#8221;&lt;/div&gt;</description>
                <link>http://liwei78.github.io/blog/paperclip-original-file-size</link>
                <guid>http://liwei78.github.io/blog/paperclip-original-file-size</guid>
                <pubDate>2011-01-06T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>heroku部署问题，是gem升级导致的这个问题</title>
                <description>&lt;hr /&gt;
&lt;p&gt;/Library/Ruby/Site/1.8/rubygems/remote_fetcher.rb:176:in `fetch_path&amp;#8217;: timed out (http://rubygems.org/quick/Marshal.4.8/mail-2.2.13.gemspec.rz) (Gem::RemoteFetcher::FetchError)&lt;/p&gt;
&lt;p&gt;先把Gemfile.lock中的&lt;br /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;mail (2.2.6.1)&lt;/div&gt;&lt;br /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;改成&lt;/div&gt;&lt;br /&gt;
&lt;div&gt;&lt;br /&gt;
&lt;div&gt;mail (2.2.5)&lt;/div&gt;&lt;br /&gt;
&lt;div&gt;&lt;/div&gt;&lt;br /&gt;
&lt;div&gt;然后bundle update 一下 （这是参照 http://stackoverflow.com/questions/4574176/heroku-push-rejected-failed-to-install-gems-via-bundler 的意见）&lt;/div&gt;&lt;br /&gt;
&lt;div&gt;&lt;/div&gt;&lt;br /&gt;
&lt;div&gt;这时mail的一行已经改为&lt;/div&gt;&lt;br /&gt;
&lt;div&gt;mail(2.2.13)&lt;/div&gt;&lt;br /&gt;
&lt;div&gt;&lt;/div&gt;&lt;br /&gt;
&lt;div&gt;然后再次部署，搞定。yeah！！&lt;/div&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div&gt;&lt;/div&gt;
&lt;div&gt;ps：我的rails是3.0.0，这是一个&lt;a href=&quot;http://moreappsweb.heroku.com/&quot; target=&quot;_blank&quot;&gt;小项目&lt;/a&gt;，页面是客户设计的，很漂亮。为了保持磨沙的效果，png比较大，以后再去优化图片吧。&lt;/div&gt;</description>
                <link>http://liwei78.github.io/blog/heroku-deploy-error-with-mail-2-2-13</link>
                <guid>http://liwei78.github.io/blog/heroku-deploy-error-with-mail-2-2-13</guid>
                <pubDate>2011-01-02T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>如何安装TextMate的haml.tmbundle</title>
                <description>&lt;hr /&gt;
&lt;p&gt;网上的文章讲的都是在  ~/Library/&amp;#8220;Application Support&amp;#8221;/TextMate/Bundles/ 目录下，可我的偏偏不是，难道是。。。？&lt;/p&gt;
&lt;p&gt;所以，笔记下我的安装方法：&lt;/p&gt;
&lt;p&gt;cd /Applications/TextMate.app/Contents/SharedSupport/Bundles/&lt;/p&gt;
&lt;p&gt;安装haml&lt;/p&gt;
&lt;p&gt;git clone git://github.com/textmate/ruby-haml.tmbundle.git&lt;/p&gt;
&lt;p&gt;安装sass&lt;/p&gt;
&lt;p&gt;git clone git://github.com/charlesr/ruby-sass-tmbundle.git &amp;#8220;Ruby Sass.tmbundle&amp;#8221;&lt;/p&gt;
&lt;p&gt;安装scss&lt;/p&gt;
&lt;p&gt;git clone git://github.com/kuroir/&lt;span class=&quot;caps&quot;&gt;SCSS&lt;/span&gt;.tmbundle.git &amp;#8220;&lt;span class=&quot;caps&quot;&gt;SCSS&lt;/span&gt;.tmbundle&amp;#8221;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/install-haml-tmbundle-on-my-macmini</link>
                <guid>http://liwei78.github.io/blog/install-haml-tmbundle-on-my-macmini</guid>
                <pubDate>2010-12-29T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>糟糕之极的豆瓣电台ui设计</title>
                <description>&lt;hr /&gt;
&lt;p&gt;我再也忍受不了豆瓣电台的ui设计了，这是一个极其糟糕的设计和用户体验。我刚才又忘记哪个是暂停功能了。（这是一个新功能，之前只能是无奈的关闭播放功能）&lt;/p&gt;
&lt;p&gt;有图有真相：&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/bad.jpg&quot;&gt;&lt;img class=&quot;alignleft size-full wp-image-562&quot; title=&quot;bad&quot; src=&quot;http://railser.cn/wp-content/uploads/bad.jpg&quot; alt=&quot;&quot; width=&quot;417&quot; height=&quot;271&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;A：“换台”，功能。&lt;/p&gt;
&lt;p&gt;B：暂停功能。&lt;/p&gt;
&lt;p&gt;这种隐藏功能是需要你鼠标放上去看文字提示才会懂的东西，居然还放错了位置。当我想切换电台的时候，会去找一个抽象的图标，还是直接点击“欧美”来换台呢？我的下意识当然告诉我要点最直接的，这难道不正是dont make me think 的事情吗？可是，豆瓣电台的实事不会这样，真有点像和我儿子玩点头不算摇头算的游戏。&lt;/p&gt;
&lt;p&gt;之后，B竟然是暂停，然后再点一下，才能恢复。如图：&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/pause.png&quot;&gt;&lt;img class=&quot;alignleft size-full wp-image-563&quot; title=&quot;pause&quot; src=&quot;http://railser.cn/wp-content/uploads/pause.png&quot; alt=&quot;&quot; width=&quot;415&quot; height=&quot;266&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;也就是说：点击“欧美”，可以暂停的狗shi逻辑。&lt;/p&gt;
&lt;p&gt;我受不了啦！如果想做的好，就不要给对手留下漏洞，“防守是门艺术”，送上此句。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/bad-of-douban-fm-ui-design</link>
                <guid>http://liwei78.github.io/blog/bad-of-douban-fm-ui-design</guid>
                <pubDate>2010-12-16T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>Autotest and Growl</title>
                <description>&lt;hr /&gt;
&lt;p&gt;第一步安裝Growl &lt;br /&gt;
http://growl.info/index.php 注意要安裝擴展中的 growlnotify。 growlnotify is a command-line tool to post Growl notifications.&lt;/p&gt;
&lt;p&gt;第二步設置Growl &lt;br /&gt;
Open the Growl Preference Panel (System &amp;gt; Growl) and activate &amp;#8220;Listen for incoming notifications&amp;#8221; and &amp;#8220;Allow remote application registration&amp;#8221; options on the Network tab.&lt;/p&gt;
&lt;p&gt;第三步安裝相關gem&lt;br /&gt;
1 gem install autotest&lt;br /&gt;
2 gem install ZenTest&lt;br /&gt;
3 gem install autotest-rails-pure&lt;br /&gt;
autotest 和 ZenTest 缺一不可，下面的gem不用安裝，不過這講了 autotest-rails-pure 的功用。&lt;br /&gt;
https://github.com/svoop/autotest-growl&lt;/p&gt;
&lt;p&gt;4 gem install notifier  &lt;br /&gt;
https://github.com/fnando/notifier&lt;/p&gt;
&lt;p&gt;5 gem install test_notifier&lt;br /&gt;
https://github.com/fnando/test_notifier&lt;/p&gt;
&lt;p&gt;第四步配置 ~/.autotest 文件&lt;br /&gt;
添加如下 require &amp;#8220;test_notifier/runner/autotest&amp;#8221;&lt;/p&gt;
&lt;p&gt;附1：如果使用RSpec 2 需要在 spec_helper.rb 文件中添加 require &amp;#8220;test_notifier/runner/rspec&amp;#8221;&lt;br /&gt;
附2：不要相信什麼autotest和ZenTest裝一個就可以的鬼話，我親身測試，缺一不可。另外即便你使用Rails3，也不需要在Gemfile進行配置了，因為它要操作Growl的，你再怎麼配置文件也沒辦法保證其它開發者和你一樣安裝了Growl並且設置好了它的屬性，所以讓別人玩蛋去吧～&lt;br /&gt;
附3：考慮到看文章的人有可能還是從Rails1.×的時代過來的，那麼加一句，現在執行 autotest 後面不用加那個 . 了&lt;/p&gt;
&lt;p&gt;本文參考 http://exviva.posterous.com/running-autotest-with-rails-3&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/autotest-and-growl</link>
                <guid>http://liwei78.github.io/blog/autotest-and-growl</guid>
                <pubDate>2010-11-13T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>有了ultraviolet，可是没有uv，怎么办？</title>
                <description>&lt;hr /&gt;
&lt;p&gt;问题：&lt;br /&gt;
gem &amp;#8216;ultraviolet&amp;#8217;, &amp;#8216;0.10.2&amp;#8217;&lt;br /&gt;
bundle install &lt;br /&gt;
代码highlight的时候，require &amp;#8216;uv&amp;#8217; 失败。&lt;br /&gt;
提示：uninitialized constant PadsHelper::Uv&lt;/p&gt;
&lt;p&gt;解决办法：gemfile中，改为&lt;/p&gt;
&lt;p&gt;gem &amp;#8216;ultraviolet&amp;#8217;, &amp;#8216;0.10.2&amp;#8217;, :require =&amp;gt; &amp;#8220;uv&amp;#8221;&lt;/p&gt;
&lt;p&gt;搞定。&lt;/p&gt;
&lt;p&gt;最近在弄一个小项目，为程序员们提供一个简单舒适的代码经验管理工具。demo出来后希望大家支持。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/gem-ultraviolet-set-lib-as-uv</link>
                <guid>http://liwei78.github.io/blog/gem-ultraviolet-set-lib-as-uv</guid>
                <pubDate>2010-11-09T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>Flex build4 和Rails资源笔记</title>
                <description>&lt;hr /&gt;
&lt;p&gt;从infoq上看到了flex builder4的介绍。07年知道flex的时候就很关注它，也写了一点在这个博客上。那个时候还是测试版。现在已经发展到了4，并且flex的书越来越多。rails的新书貌似不多了。&lt;/p&gt;
&lt;p&gt;在这里下载中文版：http://www.infoq.com/cn/vendorcontent/show.action?vcr=664&lt;/p&gt;
&lt;p&gt;安装完看了一下，大概的思路还是懂的，然后写了个小测试，实现从 http://blog-in-rails3.heroku.com/ 获得members和posts数据。（这是一个Rails3的练习作品）&lt;/p&gt;
&lt;p&gt;在github上看到了 http://github.com/danielwanja/flexonrails，这里有很多代码实例，看完一个，收益很多。&lt;/p&gt;
&lt;p&gt;另外，http://www.manning.com/armstrong/ 有一些实例代码，可做参考。（有点老，书还是08年的，想想真是遥远阿，坎坷的08年。。。）&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/flex-build4-and-rails-note</link>
                <guid>http://liwei78.github.io/blog/flex-build4-and-rails-note</guid>
                <pubDate>2010-10-30T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>Rails3：rails destroy scaffold Page</title>
                <description>&lt;hr /&gt;
&lt;p&gt;笔记一下，不常用的destroy命令，和generate相反。有时候写错了一个关键的地方，随手想删掉，就想到它了。比如刚才。。。&lt;br /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;liwei$ rails destroy &lt;del&gt;-help&lt;/div&gt;&lt;br /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;Usage: rails destroy &lt;span class=&quot;caps&quot;&gt;GENERATOR&lt;/span&gt; [args] [options]&lt;/div&gt;&lt;br /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;General options:&lt;/div&gt;&lt;br /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;-h, [&lt;/del&gt;-help]     # Print generator&amp;#8217;s options and usage&lt;/div&gt;&lt;br /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;-p, [&amp;#8212;pretend]  # Run but do not make any changes&lt;/div&gt;&lt;br /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;-f, [&amp;#8212;force]    # Overwrite files that already exist&lt;/div&gt;&lt;br /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;-s, [&amp;#8212;skip]     # Skip files that already exist&lt;/div&gt;&lt;br /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;-q, [&amp;#8212;quiet]    # Suppress status output&lt;/div&gt;&lt;br /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;Please choose a generator below.&lt;/div&gt;&lt;br /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;Rails:&lt;/div&gt;&lt;br /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;controller&lt;/div&gt;&lt;br /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;generator&lt;/div&gt;&lt;br /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;helper&lt;/div&gt;&lt;br /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;integration_test&lt;/div&gt;&lt;br /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;mailer&lt;/div&gt;&lt;br /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;migration&lt;/div&gt;&lt;br /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;model&lt;/div&gt;&lt;br /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;observer&lt;/div&gt;&lt;br /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;performance_test&lt;/div&gt;&lt;br /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;plugin&lt;/div&gt;&lt;br /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;resource&lt;/div&gt;&lt;br /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;scaffold&lt;/div&gt;&lt;br /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;scaffold_controller&lt;/div&gt;&lt;br /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;session_migration&lt;/div&gt;&lt;br /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;stylesheets&lt;/div&gt;&lt;br /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;liwei$ rails destroy scaffold Page&lt;/div&gt;&lt;br /&gt;
&lt;div&gt;gem&lt;/div&gt;&lt;br /&gt;
&lt;div&gt;&lt;/div&gt;&lt;br /&gt;
&lt;div&gt;目前在学习Rails3，haml，scss和一些基础的东西。笔记比较零碎。对了，练习的代码都部署到heroku上了，我发现它真的好强大了。git还是不太熟，加油。&lt;/div&gt;&lt;br /&gt;
&lt;div&gt;&lt;/div&gt;&lt;br /&gt;
&lt;div&gt;地址：&lt;a href=&quot;http://blog-in-rails3.heroku.com&quot; target=&quot;_blank&quot;&gt;blog-in-rails3.heroku.com&lt;/a&gt;&lt;/div&gt;&lt;br /&gt;
&lt;div&gt;git：http://github.com/liwei78/blog&lt;/div&gt;&lt;br /&gt;
&lt;div&gt;&lt;/div&gt;&lt;br /&gt;
&lt;div&gt;欢迎加我的github：http://github.com/liwei78&lt;/div&gt;&lt;br /&gt;
&lt;div&gt;&lt;/div&gt;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/rails-destroy-scaffold-page</link>
                <guid>http://liwei78.github.io/blog/rails-destroy-scaffold-page</guid>
                <pubDate>2010-10-09T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>使用find_each提升批量发送效率</title>
                <description>&lt;hr /&gt;
&lt;p&gt;写在前面：&lt;/p&gt;
&lt;p&gt;过去的两年一直从事sns的开发，目前已经正式上限运营了，所以工作也稍微的调整一下。没有了大量的新功能的开发，开始对新版本的Rails进行笔记，并且翻译一些文章。整个十月，如果没有大的变化，会有很多时间更新我的railser.cn了。&lt;/p&gt;
&lt;p&gt;认领一下博客：QQREADERFFAB13389FAE8315&lt;/p&gt;
&lt;p&gt;在开发的时候会碰到全表检索，逐条发送或根据返回更新状态（当然这里讲的是真的无法用批量操作的时候）。在2。3等后续版本里，提供了find_each方法。默认会逐条操作id升序排列的前1000条。&lt;br /&gt;
&lt;pre lang=&quot;ruby&quot;&gt;&lt;br /&gt;
User.find_each do |user|&lt;/p&gt;
&lt;p&gt;NewsLetter.weekly_deliver(user)&lt;/p&gt;
&lt;p&gt;end&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
这里还可以增加两个参数，扩大应用的纪录集。1000的确有点小，10000或许有点大。对于邮件发送，更新订阅状态，生成动态，更新动态订阅和好友动态等操作，这个方法的确不错。&lt;br /&gt;
&lt;pre lang=&quot;ruby&quot;&gt;&lt;br /&gt;
﻿User.find_each(:batch_size =&amp;gt; 5000, :start =&amp;gt; 2000) do |user|&lt;/p&gt;
&lt;p&gt;NewsLetter.weekly_deliver(user)&lt;/p&gt;
&lt;p&gt;end&lt;br /&gt;
&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;参考：http://guides.rubyonrails.org/active_record_querying.html&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/user-find_each-for-select-multiple-records</link>
                <guid>http://liwei78.github.io/blog/user-find_each-for-select-multiple-records</guid>
                <pubDate>2010-10-04T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>Rails 中的try方法</title>
                <description>&lt;hr /&gt;
&lt;p&gt;在Rails2.3 等后续版本中可使用try方法，避免 nil 对象调用方法。&lt;/p&gt;
&lt;p&gt;比如&lt;/p&gt;
&lt;pre&gt;
user = User.find_by_id(0)

user.name
&lt;/pre&gt;
&lt;p&gt;必然会引起异常了，所以用try方法加以避免&lt;/p&gt;
&lt;pre&gt;
user.try(:name)
&lt;/pre&gt;</description>
                <link>http://liwei78.github.io/blog/try-method-in-rails</link>
                <guid>http://liwei78.github.io/blog/try-method-in-rails</guid>
                <pubDate>2010-10-04T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>打开新表单，并弹出thickbox提示框</title>
                <description>&lt;hr /&gt;
&lt;p&gt;在处理支付的时候，需要新打开支付页面完成流程，同时要在原页面提示后续处理链接。&lt;/p&gt;
&lt;p&gt;这里用thickbox来显示，但是直接点击按钮打开thickbox后，无法弹出新窗口的，所以在提交按钮上加入了&lt;/p&gt;
&lt;pre&gt;
onclick=&quot;tb_show('请选择下一步操作', '&amp;lt;%= process_payment_path(:oid=&amp;gt;@oid) %&amp;gt;', '');&quot;
&lt;/pre&gt;
&lt;p&gt;一个解决办法，有更好请大家指点。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/open-new-target-window-and-show-thickbox-frame</link>
                <guid>http://liwei78.github.io/blog/open-new-target-window-and-show-thickbox-frame</guid>
                <pubDate>2010-09-27T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>hash.invert的用法</title>
                <description>&lt;hr /&gt;
&lt;p&gt;对于多数的model的select列表，我都会用model属性＋方法的形式，做一个列表，然后在form里显示。&lt;/p&gt;
&lt;p&gt;很常见的，比如。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/1.png&quot;&gt;&lt;img class=&quot;aligncenter size-full wp-image-468&quot; title=&quot;1&quot; src=&quot;http://railser.cn/wp-content/uploads/1.png&quot; alt=&quot;&quot; width=&quot;485&quot; height=&quot;74&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;在form里，这样调用&lt;br /&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/3.png&quot;&gt;&lt;img class=&quot;aligncenter size-full wp-image-470&quot; title=&quot;3&quot; src=&quot;http://railser.cn/wp-content/uploads/3.png&quot; alt=&quot;&quot; width=&quot;445&quot; height=&quot;43&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;在一些list的地方，也会把这个值作为一个显示&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/2.png&quot;&gt;&lt;img class=&quot;aligncenter size-full wp-image-469&quot; title=&quot;2&quot; src=&quot;http://railser.cn/wp-content/uploads/2.png&quot; alt=&quot;&quot; width=&quot;485&quot; height=&quot;61&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;调用的时候：&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/4.png&quot;&gt;&lt;img class=&quot;aligncenter size-full wp-image-471&quot; title=&quot;4&quot; src=&quot;http://railser.cn/wp-content/uploads/4.png&quot; alt=&quot;&quot; width=&quot;379&quot; height=&quot;20&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这里，做笔记的目的是告诉自己，invert命令很简洁，之前，呵呵，我会用map的方法把每一个item都处理一遍，写代码的朋友一定知道，那样是很常见的思路，但是很不ruby。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/hash-invert</link>
                <guid>http://liwei78.github.io/blog/hash-invert</guid>
                <pubDate>2010-08-05T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>Rails如何不加载某插件？</title>
                <description>&lt;hr /&gt;
&lt;p&gt;在用paperclip的时候，碰到一个问题：&lt;/p&gt;
&lt;p&gt;在windows上用的插件和linux或mac上的不同，但是两个又在同一个版本库里，同步到别的环境时，要区别调用，所以，需要针对linux做一个设置。因为插件很多，不可能一一指定，所以google到了这个。。（PS：书上或许有，可是总不用也不记得了）&lt;br /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;config.plugins = [ :all ]&lt;/div&gt;&lt;br /&gt;
&lt;div id=&quot;_mcePaste&quot;&gt;config.plugins -= [ &amp;#8220;paperclip-win&amp;#8221; ]&lt;/div&gt;&lt;br /&gt;
ok，继续写代码去！&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/rails-config-plugins-array</link>
                <guid>http://liwei78.github.io/blog/rails-config-plugins-array</guid>
                <pubDate>2010-06-25T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>在mac上配制Rails开发环境</title>
                <description>&lt;hr /&gt;
&lt;p&gt;拿到mac后最重要的就是先把Rails开发环境装好。apple介绍上写的是，mac mini装的是server版本，这样开发环境应该是已经装好的。可我的不是，没有Rails环境，只有ruby 1.8.7。这样也好，体验一下配制开发环境的过程。&lt;/p&gt;
&lt;p&gt;1、gem 安装Rails&lt;/p&gt;
&lt;p&gt;这个没有问题，默认已经安装了2.2.2，只要再装上需要的几个版本就可以&lt;/p&gt;
&lt;p&gt;2、装xcode&lt;/p&gt;
&lt;p&gt;问题来了，rake的时候出错，按照ubuntu的经验，估计是缺少编译环境，ubuntu上是装了ruby－dev。&lt;/p&gt;
&lt;p&gt;装上xcode，问题解决。（本人绝对新人，欢迎朋友们指教，更多资料大家google吧）&lt;/p&gt;
&lt;p&gt;3、装MacPort&lt;/p&gt;
&lt;p&gt;这是一个奇怪的感觉，没有apt-get感觉不太习惯，所以装上MacPort，继续装ImageMagick，这个竟然用了一个多小时，具体安装方法参考：&lt;a href=&quot;http://rmagick.rubyforge.org/install-osx.html&quot;&gt;http://rmagick.rubyforge.org/install-osx.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;4、重点来了，mysql，apache，php环境&lt;/p&gt;
&lt;p&gt;其实本想一个个装一下，但是看到了mamp，就试验一下，没想到很容易就搞定了。。&lt;/p&gt;
&lt;p&gt;参考： &lt;a href=&quot;http://www.mamp.info/en/downloads/index.html&quot;&gt;http://www.mamp.info/en/downloads/index.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;可是，问题没结束，gem install mysql的时候出现了问题，因为mysql是俗话讲的集成，免安装过来的，不是默认配制，所以，需要重新编译一下mamp的mysql部分，才能正常gem安装mysql驱动。&lt;/p&gt;
&lt;p&gt;重点在：gem install&lt;span style=&quot;color: #ff0000;&quot;&gt; &lt;del&gt;v=2.7&lt;/span&gt; mysql -&lt;/del&gt; &amp;#8212;with-mysql-config=/Applications/&lt;span class=&quot;caps&quot;&gt;MAMP&lt;/span&gt;/Library/bin/mysql_config&lt;/p&gt;
&lt;p&gt;注意红色的部分，因为最新的2.8.1会提示“Virtual timer expired”。建议大家不要轻易升级gem，实在要升级，一定本地环境完全模拟一遍，包括各个gem版本，建议用rvm的朋友一定要多留意，rvm很好，一定要早入手熟悉。&lt;/p&gt;
&lt;p&gt;具体参考：&lt;a href=&quot;http://boonedocks.net/mike/archives/175-MAMP-and-the-Ruby-MySQL-Gem.html&quot;&gt;http://boonedocks.net/mike/archives/175-&lt;span class=&quot;caps&quot;&gt;MAMP&lt;/span&gt;-and-the-Ruby-MySQL-Gem.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;进行到这里感觉很幸福，发现分享自己的经验原来可以帮人解决那么多问题，也节省时间。这也是我写这个笔记，分享经历的动力。&lt;/p&gt;
&lt;p&gt;5、终于到textmate了&lt;/p&gt;
&lt;p&gt;macx.cn的软件栏目里有下载，总算见到textmate的样子了，之前netbeans也只是模仿一点点样子而已。&lt;/p&gt;
&lt;p&gt;更多的textmate使用见仁见智吧，不多说，目前很痴迷mac，好玩的东西都要用一下。&lt;/p&gt;
&lt;p&gt;写到这，环境基本ok了，开始Rails的工作吧。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/rails-on-mac</link>
                <guid>http://liwei78.github.io/blog/rails-on-mac</guid>
                <pubDate>2010-05-02T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>mac使用普通键盘的几个快捷键</title>
                <description>&lt;hr /&gt;
&lt;p&gt;mac的键盘都是专用的，上面有三个功能键，比windows下常见的ctrl和alt，多处一个中国结的键，呵呵，暂且这么叫吧。就是下图上的几个：&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;aligncenter size-full wp-image-453&quot; title=&quot;mac short cut key&quot; src=&quot;http://railser.cn/wp-content/uploads/mac-short-cut-key.png&quot; alt=&quot;mac short cut key&quot; width=&quot;306&quot; height=&quot;134&quot; /&gt;&lt;/p&gt;
&lt;p&gt;他们对应的，Option就是alt键，Command就是win键，那个经常在网吧被人扣掉的很讨厌的按键。&lt;/p&gt;
&lt;p&gt;当然，在我第一次进入mac时还是头晕，没搞明白键盘的多数按键，尤其是在键盘检测之前。所以，还是先看看偏好设置里的每一个项目吧。&lt;/p&gt;
&lt;p&gt;键盘的按键在检测完之后，会出现下面的几个应用了。&lt;/p&gt;
&lt;p&gt;win＋alt：切换输入法&lt;/p&gt;
&lt;p&gt;win＋tab：切换任务窗口&lt;/p&gt;
&lt;p&gt;ctrl＋tab：浏览器内标签切换&lt;/p&gt;
&lt;p&gt;win+shift+3：屏幕截图，自动保存到桌面&lt;/p&gt;
&lt;p&gt;win+shift+4：指定区域截图，跟qq截图一样。很爽，再也不用依赖qq了。&lt;/p&gt;
&lt;p&gt;其实我前几天把ctrl和win键的功能给对换了，比较适合正常的习惯，不过刚才换了回来，希望能更接近真实的mac专用键盘的感觉吧。&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;aligncenter size-medium wp-image-454&quot; title=&quot;mac keyboard&quot; src=&quot;http://railser.cn/wp-content/uploads/mac-keyboard-300x144.png&quot; alt=&quot;mac keyboard&quot; width=&quot;300&quot; height=&quot;144&quot; /&gt;&lt;/p&gt;
&lt;p&gt;另外，mac上的文件重命名很有意思，竟然是选中后，按enter，也就是会车键。这跟windows完全不一样。&lt;/p&gt;
&lt;p&gt;好了。写道这里，继续研究下编程的事情。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/mac-with-normal-keyboard</link>
                <guid>http://liwei78.github.io/blog/mac-with-normal-keyboard</guid>
                <pubDate>2010-05-01T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>我开始mac啦！！</title>
                <description>&lt;hr /&gt;
&lt;p&gt;上周在淘宝的苹果福利社订购了一台mac mini mc238，发货后第二天就到了。兴奋啊。我终于开始mac了！！&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;aligncenter size-medium wp-image-443&quot; title=&quot;T1HNBsXlxlXXXBc6_b_094607.jpg_310x310&quot; src=&quot;http://railser.cn/wp-content/uploads/T1HNBsXlxlXXXBc6_b_094607.jpg_310x310-300x300.jpg&quot; alt=&quot;T1HNBsXlxlXXXBc6_b_094607.jpg_310x310&quot; width=&quot;300&quot; height=&quot;300&quot; /&gt;&lt;/p&gt;
&lt;p&gt;下面分享一下这次的经历，当作日记，也是分享给大家一些经验吧。&lt;/p&gt;
&lt;p&gt;东西拿到了，第一件事是连接上我的显示器。这里介绍两个事情：一是mac mini和自己的显示器连接，用的是dvi线，二是这个线需要自己买，价格在20元左右。线的样子是&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;aligncenter size-medium wp-image-442&quot; title=&quot;T2hHJcXXRXXXXXXXXX_!!26761329.jpg_620x10000&quot; src=&quot;http://railser.cn/wp-content/uploads/T2hHJcXXRXXXXXXXXX_26761329.jpg_620x10000-300x300.jpg&quot; alt=&quot;T2hHJcXXRXXXXXXXXX_!!26761329.jpg_620x10000&quot; width=&quot;300&quot; height=&quot;300&quot; /&gt;&lt;/p&gt;
&lt;p&gt;注意的是，我的dvi接头是24＋1针脚的，一定要和显示器对应，还有另一种24＋5的，用途不太一样，具体详细介绍看这里：&lt;a href=&quot;http://baike.baidu.com/view/1297324.htm?fr=ala0_1_1&quot;&gt;http://baike.baidu.com/view/1297324.htm?fr=ala0_1_1&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;千万不要因为看错了买来的线不可用。（我就是，别人代给我的，买的时候就没区分是＋1还是＋5的针脚，结果白跑一趟。）&lt;/p&gt;
&lt;p&gt;dvi线如果网购的话可以看这里：&lt;a href=&quot;http://item.taobao.com/item.htm?id=3812883078&quot;&gt;http://item.taobao.com/item.htm?id=3812883078&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;好了，到这里，连接好，就开始mac的旅程了。&lt;/p&gt;
&lt;p&gt;这里想说的是，mac mini很适合上手，加上itouch，可算作是iphone开发的最节省开销了。（下个月买itouch，然后呢，本博就要以mac开发为主啦，会贴一些经验的总结，分享给需要的朋友。）&lt;/p&gt;
&lt;p&gt;来，上张图吧，很兴奋，不过遗憾的是不能语音通话，因为没有麦克风，单买的话太贵，usb话筒效果说未必好。&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;aligncenter size-medium wp-image-445&quot; title=&quot;screen&quot; src=&quot;http://railser.cn/wp-content/uploads/screen-300x169.jpg&quot; alt=&quot;screen&quot; width=&quot;300&quot; height=&quot;169&quot; /&gt;&lt;/p&gt;
&lt;p&gt;因为之前用过ubuntu，所以这次上手不算太陌生，不过好些东西还是不适应，比如快捷键。mac的三个键和win的不一样，需要在系统偏好里调整一下，当然不改也可，那就纯正的mac吧。&lt;/p&gt;
&lt;p&gt;下一篇分享下折腾了两天的环境配制。&lt;/p&gt;
&lt;p&gt;广告下，工作室目前定位在科技公司上，业务在网站制作和美工设计。我也算是带出来两个学员，一个做程序，一个做网络推广。后面会整理出来，看来Railser.cn该增加人员了。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/i-am-mac-now</link>
                <guid>http://liwei78.github.io/blog/i-am-mac-now</guid>
                <pubDate>2010-04-30T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>我们最近的很好，也很忙</title>
                <description>&lt;hr /&gt;
&lt;p&gt;最近很忙，在为工作室的未来设计，也在开发几个站点，有大有小。当然一直服务的sns社区开发也没停止。感谢来询问我进度的朋友，我的确牺牲了很多自己赚钱的时间，为这个工作室忙碌。2010年，我将和我的团队，带着我们的项目寻找合作，实现我们的公益创业目标。希望大家支持。&lt;/p&gt;
&lt;p&gt;上一张团队合影吧，比较全了，但是还有几个成员没在里面。&lt;/p&gt;
&lt;p&gt;&lt;img title=&quot;参加联想青年公益创业计划比赛现场&quot; src=&quot;/wp-content/uploads/DSC_0332.jpg&quot; alt=&quot;参加联想青年公益创业计划比赛现场&quot; width=&quot;400&quot; height=&quot;266&quot; /&gt;&lt;/p&gt;
&lt;p&gt;第一排最左面是海波姐，我们给她做了专门介绍的网页：&lt;a href=&quot;http://haibo.lol.org.cn&quot; target=&quot;_blank&quot;&gt;http://haibo.lol.org.cn&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;下面的是我御用很多年的美工，雪儿，她处理图片和flash的技术很好，美工的感觉非常到位&lt;/p&gt;
&lt;p&gt;&lt;img title=&quot;美工雪儿&quot; src=&quot;/wp-content/uploads/IMG0131A.jpg&quot; alt=&quot;美工雪儿&quot; width=&quot;400&quot; height=&quot;300&quot; /&gt;&lt;/p&gt;
&lt;p&gt;但是她是一位重度的脑瘫患者，在这里写出来，是想告诉大家，在我们身边有太多惊奇，我们需要了解他们。她语言不清，行动有些困难，但是她的设计很好，很好学。她也是工作室的重要成员。目前负责教育网的工作。在我们这里，人人平等，只要你有能力，就能找到位置。&lt;/p&gt;
&lt;p&gt;昨天买的书到了，用了几个小时把李开复自传的精彩部分读了一遍，启发很多，几乎每隔几页就能找到点感慨。剩下两本讲公益创业的，明年将开始这个全新的富有挑战的事业。当然，我还是做技术为主。&lt;/p&gt;
&lt;p&gt;本来不想多写的，没想到写了这么多，09年最后一个月了，该总结点什么呢？？？下一篇再说吧。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/i-am-fine-and-busy</link>
                <guid>http://liwei78.github.io/blog/i-am-fine-and-busy</guid>
                <pubDate>2009-12-08T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>新书推荐：《正在爆发的互联网革命》</title>
                <description>&lt;hr /&gt;
&lt;p&gt;&lt;a href=&quot;http://union.dangdang.com/transfer/transfer.aspx?from=P-272054&amp;backurl=http://product.dangdang.com/product.aspx?product_id=20680931&quot;&gt;&lt;img class=&quot;alignnone&quot; title=&quot;正在爆发的互联网革命&quot; src=&quot;http://img31.dangdang.com/29/3/20680931-1_b.jpg&quot; alt=&quot;&quot; width=&quot;200&quot; height=&quot;200&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://union.dangdang.com/transfer/transfer.aspx?from=P-272054&amp;backurl=http://product.dangdang.com/product.aspx?product_id=20680931&quot; target=&quot;_blank&quot;&gt;到当当购买这本书&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;里克：总算看到一本关于互联网和sns的书，保存了我们这个时代的记忆，建议入选中学教科书，告诉大家一个真实的互联网。&lt;/p&gt;
&lt;p&gt;30余位互联网大腕、100余家网站、报纸、杂志、电台、电视台鼎力推荐&lt;br /&gt;
全球网民正亲历SNS带来的巨大变革，只有洞悉先机，才能抓住革命的机遇，30余位互联网大腕、100余家网站和媒体一致推荐。&lt;br /&gt;
SNS火起来是有道理的：互联网是技术网络，SNS是社会网络，信息革命从技术网络发展到社会网络是必然的趋势。SNS进化的方向是为人人服务，让人人 开心。以人为本，是SNS的出发点和归宿。该书展开了一幅SNS时代的全景图，帮助SNS加速走向每个人，拨动每个人心中真实快乐的那根弦。&lt;br /&gt;
——姜奇平 中国社会科学院信息化研究中心秘书长/《互联网周刊》名誉主编&lt;br /&gt;
读完本书收获颇多，一个真正意义上的网民绝不能只会上网聊天、看新闻、用搜索，他还应该熟知SNS社会化网络，这样才能把握第三次次互联网革命带来的机遇。&lt;br /&gt;
——曾明发 中国网民文化节组委会执行主任/中国互联网大会组委会副秘书长&lt;br /&gt;
本书写得恰到好处。首先是时间恰到好处，中国互联网正需要这样一本书来系统阐释SNS的昨天、今天、明天，以及它的重要作用；其次是内容恰到好处，不仅 深刻而全面地分析了SNS对全球网民的重大意义，而且还探讨了SNS对整个互联网经济形态的影响。本书既包含大量丰富生动的故事，又融入了作者颇有见地的 思想。非常好，强烈推荐！&lt;br /&gt;
——庞升东 51.com &lt;span class=&quot;caps&quot;&gt;CEO&lt;/span&gt;&lt;br /&gt;
SNS这个已存在许久，但直至2008年才 大规模爆发的互联网应用，是网民将生活映射到互联网的趋势的体现。一大批细分的、垂直的、富有特色和创新精神的SNS网站，正在给我们的生活带来前所未有 的精彩体验。中国的网民已达3.5亿之多，如雨后春笋般涌现的UCenter Home站点能满足他们的个性化需求，它们将对整个互联网产业的发展和繁荣写下浓重的、历史性的一笔。 本书能让所有互联网从业人士从中受益，郑重推荐！&lt;br /&gt;
——戴志康 康盛创想CEO&lt;br /&gt;
互联网是终端的网络，SNS是网民的网络，互联网革命改变着人们的生活，火爆的SNS丰富了人们的生活。本书既演绎了国内外SNS的发展历程，也从相关 行业和领域多方位地诠释了由此带来的重大变革，堪称网络版“SNS那点事儿”， 是本难得的SNS通俗化读本。网民是有国籍的，但是SNS所带来的机遇是没有国界的，希望读者能从书中受益，敢做SNS时代的潮人。&lt;br /&gt;
——郑志昊 QQ空间产品中心总经理&lt;br /&gt;
SNS是互联网从“机器与机器”、“人与机器”向“人与人”演进的关键标志，是“人的网络”的开端，也是互联网发展史上的第三次重大变革。这场“正在爆发的互联网革命”将逐渐改变我们的工作、生活、学习和娱乐的方式，也必将使电子商务发生巨变。&lt;br /&gt;
——梁春晓 阿里巴巴集团副总裁/研究中心高级研究员&lt;br /&gt;
本书讲述了大量真实、生动的案例和故事，深刻揭示了SNS对我们的工作、生活、学习、娱乐以及对整个互联网的影响，像我这样的所谓专业的互联网从业人士看完后也不禁赞叹不已，强烈推荐！&lt;br /&gt;
——邹岭 若邻网创始人兼CEO&lt;br /&gt;
这是一本值得推荐给爱情公寓2000万白领用户阅读的好书&lt;br /&gt;
——张家铭 爱情公寓创始人兼CEO&lt;br /&gt;
互联网出现的那一天，我们都不知道网络会对我们的生活产生什么样的影响，但今天我们已经看到，所谓真实的生活和虚拟的网络其实已经没有严格意义上的分别。SNS的兴起和发展，会将这场互联网的革命进行得更加彻底。&lt;br /&gt;
——横戈 博客大巴CEO&lt;br /&gt;
SNS的本质就是人，关系中的人，商业中的人，社会中的人，以及所有这一切的数字化呈现。&lt;br /&gt;
——keso 5Gme.com创始人/著名IT博客作家&lt;br /&gt;
心理的亲近正在迅速取代地理的接近而成为营造社区的关键驱动力。SNS掀起的新一轮互联网革命是人类心灵对地理的超越。&lt;br /&gt;
——胡泳 资深互联网专家/北京大学副教授/《数字化生存》译者&lt;br /&gt;
本书让我们对SNS有了更全面的认识和更深刻的体会。我们更应该清晰地认识到：莫做观望者，要做实践家。正如书名点睛，SNS，对互联网来说，是一场巨 变，是一个挑战，更是一种机遇。古人云“乱世出英雄”，英雄只有在乱世中才能不受约束，充分展示他的雄才谋略，勇于创新。现在，是SNS英雄出世的时代 了。我们相信，诸如UCenter Home这样的SNS专业建站产品，如同锋利的宝剑，定会助英雄一臂之力！&lt;br /&gt;
——李国德 康盛UCH创始人&lt;br /&gt;
SNS浪潮的兴起，为中国的网络社区注入了新的活力。分享和互动成为关键，尤其是Social Game让用户之间的交流变得更加有效和轻松，但SNS绝不只是一个娱乐的平台，作为工具的属性，它还有更多的价值有待发现，而这本书正在帮我们发现，足 以启人，因此我郑重推荐。&lt;br /&gt;
——韩笑 奇虎网络社区研究机构总经理&lt;br /&gt;
当我们惊叹互联网让我们足不出户就能无所不能的时候，社会化网络已经在悄然深入到我们的人际关系中。现在，社会化网络已经与你和我息息相关。本书非常全面地介绍和展望了社会化网络的过去、现在和未来，打开精彩的篇章，你将获益匪浅。&lt;br /&gt;
——曾登 CSDN副总经理&lt;br /&gt;
人类从未面临如此纷繁绚丽的世界，在不到20年的时间里，互联网给了我们一次又一次惊喜和震撼，它孕育了很多伟大的公司。接下来它又会给我们带来什么惊 喜呢？当SNS和开放平台被广泛接受和认可后，是不是又到了下一场革命爆发的时候？本书对SNS时代的互联网做了全新的诠释，作者从资深从业者的角度为我 们阐述和评点了昨天、今天、明天的互联网，非常值得品味。&lt;br /&gt;
——卢亮 淘宝网资深总监&lt;br /&gt;
一口气读完本书，感慨颇深。作为一名互联网从业人士，更深刻地意识到了SNS给我们的生活带来的巨大变化，小到身边好友的情感互动、种菜偷菜、停车贴条，大到奥巴马的当选，SNS都发挥着其巨大的作用。QQ空间也希望能够把握住革命的机遇，伴随中国互联网一起成长。&lt;br /&gt;
——梁柱 腾讯创新中心资深总监&lt;br /&gt;
对于SNS的认识和研究，最初是因为工作的需要，我从未看到有人像西门、马良和清华他们一样把SNS分析得如此透彻和完整。从过去和现在，再到未来，从 人与人的关系到与传统互联网的结合，再到SNS与未来科技的融合，一切都是如此的详尽。透过这本书，我们将看到互联网传奇史中更加充满魔力的一页。&lt;br /&gt;
——Dalson 好耶广告全国区执行创意总监&lt;br /&gt;
偷菜、抢车位、养鱼、逗宠物等应用为何能以病毒般的速度扩散至整个白领群体而成为时下最热门的网络游戏？这一切都是因为它的载体——SNS，它的意义比游戏本身更加深远。这是一本既专业又有趣的书，我们可以从中了解到SNS的本质以及它是如何改变大众网络生活的。&lt;br /&gt;
——蒲忠杰 雅虎口碑SNS产品总监&lt;br /&gt;
作为一个互联网从业者，从门户时代到Web 2.0时代，再到如今的SNS时代，一路走来，我深刻深地领悟到人在各个阶段所扮演的不同角色。SNS的本质是真实的人与人之间的联系，但是在中国它却成 了娱乐的代名词。无论是互联网从业者还是普通网民，都能通过本书重新认识SNS——它能在我们的生活和工作中发挥越来越重要的作用。当SNS与摄影结合， 当SNS与美食结合，这不正是众多网友聚集在POCO的原因吗？POCO上不再只有简单的网页游戏，它更多的是把我们的生活、兴趣、职业甚至收入结合在了 一起。在不久的将来，SNS必定会成为每个网民生活中的一部分，通过阅读本书，我们会发现，每个人的网络生活甚至是现实生活都会因SNS而改变。&lt;br /&gt;
——姚鸿 &lt;span class=&quot;caps&quot;&gt;POCO&lt;/span&gt;.CN &lt;span class=&quot;caps&quot;&gt;CEO&lt;/span&gt;&lt;br /&gt;
世界在不断的创变中验证很多东西，比如SNS的出现和迅猛发展就验证了这世上还有“一网打尽”这回事儿！中国的成语真的很奇妙，相信先人创作“一网打 尽”这一词儿的时候，压根就没预见过什么数字时代，更别提将改变整个互联网的SNS，本书能让我们将一言难尽的SNS看个究竟，探个明白！强烈推荐！&lt;br /&gt;
——陶为民 安瑞索思ECD&lt;br /&gt;
SNS为何会风靡全球互联网？为何它具有改变整个世界的能量？国内外知名SNS网站的发展历程和成功秘诀是什么？SNS在互联网中的地位为何如此重要？SNS对于全球网民的重大意义何在……这一切都可以在本书中找到答案。&lt;br /&gt;
——刘勇 国内第一波SNS网站亿友网创始人/&lt;span class=&quot;caps&quot;&gt;SNS&lt;/span&gt; APP服务商热酷创始人&lt;br /&gt;
不了解SNS，就没法理解这个时代的互联网，而这本书里有你能想到的和想不到的关于SNS的一切。&lt;br /&gt;
——姬十三 科学作家/科学松鼠会创始人&lt;br /&gt;
SNS的流行绝非偶然。当论坛、博客让我们沉浸于结交更多素昧平生的新朋友的新奇时，SNS让我们重温了与多时未见的老友、老同学天天见面时的喜悦。 SNS的流行代表了互联网进化的趋势和方向。网名背后的虚假与不安，最终将回归实名下的真实与信赖。本书对这种流行与趋势进行了总结、分析和展望，融入了 作者的经验、智慧、以及作为资深网络从业者的敏锐与远见。我接触过很多互联网从业人士，也阅读了很多相关的著作，强烈推荐这本书。&lt;br /&gt;
——陆贤清 上汽乘用车媒介与互动营销高级经理&lt;br /&gt;
SNS的出现绝对是互联网发展史上的一次伟大变革，它不仅影响着我们的工作、生活和娱乐，而且更重要的是，它还在逐渐改变传统互联网的经济形态。本书对 SNS进行了全方位的阐释，无论你是普通网民还是资深的互联网从业者，都应该认真阅读本书，它必定能让你有所启发和收获。&lt;br /&gt;
——图王 中国最有声望的个人站长之一&lt;br /&gt;
“今天，你开心了吗？”似乎成了很多人见面时的问候语。虽然开心网等SNS社区现在异常火热，但SNS巨头Facebook在经过刚创立时的新鲜感后， 已经开始遭遇网民的口诛笔伐。国内大量“克隆”Facebook的本土化SNS网站如何度过信任危机？在一场更加激烈的SNS混战中能否找到自己的未来？ 本书的出版适逢其时，我们能从中找到答案。&lt;br /&gt;
——李琦 《IT时代周刊》/编委北京新闻中心主任&lt;br /&gt;
似乎， 我们还未完全意识到SNS即将风靡整个网络时，已顺势置身这股浪潮中。难得的，乐此不疲的“随波逐流”。SNS，人人也好，开心也罢，习惯了在这个社会中 疾步奔走的人们，是需要这样一个地方，养花种草颐养性情，争车位偷果实展颜一笑，会偶尔在这里遇到公事上打磨熟悉的面孔，在SNS这个用“欢腾”二字不足 为过的环境里，你、我或他，没有公事公办的正襟危坐，爱玲那句话怎讲？原来你也在这里！&lt;br /&gt;
这是一本极有趣的书，有悟空也有搁浅的鲸，旁征博引，深入浅出。在SNS上逗猫、遛狗、偷灵芝之余，我们不妨把此书也当作SNS的衍生服务，细品国内外知名SNS网站的前世今生，岂非美事一桩，且必有所得。&lt;br /&gt;
——张连会 《计世资讯》营销总监&lt;br /&gt;
古希腊戴尔菲神庙的入口有句名言：了解你自己。一个人需要广场也需要客厅，需要严肃也需要娱乐，需要虚拟也需要真实，需要归属也需要自由。SNS第一次 把个体作为社区聚合的中心，是多种诉求的平衡载体，它让生活更梦幻，让自我更真实。如果你想了解未来的社会和人生，就到SNS的入口来看看吧，带着这本 书。&lt;br /&gt;
——张静 《互联网周刊》专题组主任&lt;br /&gt;
当人们把大量的时间分配给SNS网站后，它就有了不可估量的营销价值。本书的价值在于，它将告诉你SNS网络如何改变了人们的生活方式和消费习惯，以及“如何让百万消费者主动成为你的促销员”的奥秘。&lt;br /&gt;
——王文正 《销售与市场》&lt;br /&gt;
对于我这样一个很少接触SNS社区的读者，本书激发了我强烈的兴趣，让我看到了SNS所带来的学习、工作、娱乐变革。身处互联网大潮，每一个人都应该了解SNS来应对这次互联网革命。&lt;br /&gt;
——李峥嵘 《北京晚报》&lt;br /&gt;
透过互联网看到整个世界，透过《正在爆发的互联网革命》看清互联网。&lt;br /&gt;
——马光 《沈阳晚报》&lt;/p&gt;
&lt;p&gt;第1章　社会化网络理论变奏曲&lt;br /&gt;
第1节　社会化网络——未来的新入口&lt;br /&gt;
社会化网络圆了奥巴马的总统梦&lt;br /&gt;
什么是社会化网络&lt;br /&gt;
第2节　六度之内，玩转世界&lt;br /&gt;
社会化网络的前世今生&lt;br /&gt;
六度分隔理论与150定律&lt;br /&gt;
第3节　以人为本——社会化网络建立真实的社交文化&lt;br /&gt;
第4节　全球互联网为社会化网络而疯狂&lt;br /&gt;
第2章　社会化网络的三波浪潮&lt;br /&gt;
第1节　第一波浪潮：鼻祖Friendster和国内的追随者们&lt;br /&gt;
第2节　第二波浪潮：MySpace旋风与中国SNS风暴&lt;br /&gt;
第3节　第三波浪潮：Facebook神话与校内网的传奇&lt;br /&gt;
第4节　第三浪后续:开心网的盛行与国内互联网巨头们的窥探&lt;br /&gt;
第3章　社会化网络狂飙实录&lt;br /&gt;
第1节　Facebook猛进史——六年创奇迹&lt;br /&gt;
你方唱罢我登场——MySpace的失势和Facebook的得意&lt;br /&gt;
Facebook的名字的由来&lt;br /&gt;
同学录背后的社交蓝海&lt;br /&gt;
Facebook的创业历程&lt;br /&gt;
Facebook缘何成为资本的宠儿&lt;br /&gt;
Facebook的收购风波&lt;br /&gt;
第2节　开心网的崛起——创造中国互联网发展史话&lt;br /&gt;
揭秘开心网的发展历程&lt;br /&gt;
SocialGame——开心网不走寻常路&lt;br /&gt;
开心网的未来在哪里&lt;br /&gt;
“真假”开心网&lt;br /&gt;
第3节　Twitter——简单、开放改变世界&lt;br /&gt;
失败鲸&lt;br /&gt;
140个字符创造的奇迹&lt;br /&gt;
Twitter的发家史&lt;br /&gt;
Twitter成功的奥秘&lt;br /&gt;
Twitter成功背后的社会学意义、营销学意义和开放平台的意义&lt;br /&gt;
第4章　社会化网络改变我们的生活&lt;br /&gt;
第1节　社会化网络改变我们的生活&lt;br /&gt;
免费环游世界&lt;br /&gt;
“大鲨鱼”奥尼尔与Twitter的故事&lt;br /&gt;
寻人记&lt;br /&gt;
“助产士”的故事&lt;br /&gt;
第2节　要Happy，要SocialGame&lt;br /&gt;
第3节　SNS式美丽新世界&lt;br /&gt;
第4节　SNS达人的小众生活圈&lt;br /&gt;
第5章　社会化网络让求职变得更容易&lt;br /&gt;
第1节　社会化网络时代的求职新途径&lt;br /&gt;
求职新利器&lt;br /&gt;
虚拟世界里的真实招聘&lt;br /&gt;
社会化网络颠覆传统的招聘方式&lt;br /&gt;
第2节　弱链接、人脉与社会资本&lt;br /&gt;
“微弱关系”&lt;br /&gt;
网络社交人脉演进史&lt;br /&gt;
第3节　找工作，你准备好了吗&lt;br /&gt;
让工作主动发现你的优势&lt;br /&gt;
学会管理你的社交网络&lt;br /&gt;
打造职场的双赢通道&lt;br /&gt;
第6章　社会化网络营销——网络营销新时代&lt;br /&gt;
第1节　社会化媒体——网络营销新力量&lt;br /&gt;
什么是社会化媒体&lt;br /&gt;
传统网络营销的变革&lt;br /&gt;
社会化网络营销时代来临&lt;br /&gt;
第2节　社会化网络营销&lt;br /&gt;
娱乐的才是互动的&lt;br /&gt;
娱乐与社会化网络营销的完美结合&lt;br /&gt;
不能只有娱乐，而没有营销&lt;br /&gt;
第3节　创意驱动了你的眼球，也驱动了你的态度&lt;br /&gt;
第4节　超越社会化网络&lt;br /&gt;
第7章　蚂蚁有了扩音器——社会化网络与个人品牌建设&lt;br /&gt;
第1节　网络时代——草根也能建立自己的个人品牌&lt;br /&gt;
第2节　博客——打造个人品牌的利器&lt;br /&gt;
第3节　即时聊天——个人品牌如影随形&lt;br /&gt;
第4节　Twitter——创造个人品牌的新力量&lt;br /&gt;
第5节　社交网站——发现并建立你的个人品牌&lt;br /&gt;
第6节　播客/视频——每个人都可以当15分钟名人&lt;br /&gt;
第7节　张小盒，用社会化网络打造的品牌149&lt;br /&gt;
第8章　社会化网络代言人——奥巴马&lt;br /&gt;
第1节　没有社会化网络，就没有奥巴马&lt;br /&gt;
第2节　奥巴马的社会化网络营销启示录&lt;br /&gt;
网络视频传播——视频新媒体力量的运用&lt;br /&gt;
关键词购买——搜索引擎广告精准营销&lt;br /&gt;
游戏内置广告——新颖的互联网广告思路&lt;br /&gt;
网络口碑营销的最高境界——激发邮件病毒营销的传染力&lt;br /&gt;
博客营销——让每个人都有自己的媒体&lt;br /&gt;
第9章　社会化网络与长尾的开放平台&lt;br /&gt;
第1节　什么是开放平台&lt;br /&gt;
第2节　开放与繁荣&lt;br /&gt;
Google——将开放进行到底&lt;br /&gt;
Twitter——开放成就的社会化网络巨头&lt;br /&gt;
亚马逊——在开放中从容应对全球经济危机&lt;br /&gt;
淘宝——开放，与合作伙伴共建商业生态系统&lt;br /&gt;
腾讯——何时能走向开放&lt;br /&gt;
Facebook——开放平台，网聚开发者的力量&lt;br /&gt;
第3节　平台决定舞台&lt;br /&gt;
第4节　开放平台的长尾现象&lt;br /&gt;
第5节　开放平台标准之争&lt;br /&gt;
第10章　数字化生存与社会化网络的未来&lt;br /&gt;
第1节　数字化生存&lt;br /&gt;
第2节　拥抱3G，拥抱移动互联网的未来&lt;br /&gt;
第3节　社会化网络的神奇新变数&lt;br /&gt;
第4节　社会化网络的未来&lt;br /&gt;
后记&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/sns-is-changing-internet</link>
                <guid>http://liwei78.github.io/blog/sns-is-changing-internet</guid>
                <pubDate>2009-09-23T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>在Rails中使用批量插入和直接运行sql语句</title>
                <description>&lt;hr /&gt;
&lt;p&gt;向所有加星用户发送消息，批量插入的sql&lt;/p&gt;
&lt;p&gt;第一步：读取用户id，仅需要id&lt;br /&gt;
uids = User.find(:all, :select=&amp;gt;&amp;quot;users.id&amp;quot;)&lt;/p&gt;
&lt;p&gt;第二步：生成语句，格式是&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;caps&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;INTO&lt;/span&gt; `messages` (`updated_at`, `title`, `body`, `user_id`, `created_at`)&lt;br /&gt;
&lt;acronym title=&quot;&amp;#39;2009-08-20 23:03:04&amp;#39;, &amp;#39;来自系统管理员的消息&amp;#39;, &amp;#39;test&amp;#39;, 1, &amp;#39;2009-08-20 23:03:04&amp;#39;&quot;&gt;&lt;span class=&quot;caps&quot;&gt;VALUES&lt;/span&gt;&lt;/acronym&gt;&lt;/p&gt;
&lt;p&gt;values = []&lt;br /&gt;
users.each do |user|&lt;br /&gt;
values &amp;lt;&amp;lt; &amp;#8220;(&lt;acronym title=&quot;), &amp;#39;来自系统管理员的消息&amp;#39;, &amp;#39;#{content}&amp;#39;, #{user.user_id}, NOW(&quot;&gt;&lt;span class=&quot;caps&quot;&gt;NOW&lt;/span&gt;&lt;/acronym&gt;)&amp;#8221;&lt;br /&gt;
end&lt;/p&gt;
&lt;p&gt;第三步：执行&lt;/p&gt;
&lt;p&gt;ActiveRecord::Base.connection.execute(&amp;#8220;&lt;span class=&quot;caps&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;INTO&lt;/span&gt; `messages` (`updated_at`, `title`, `body`, `user_id`, `created_at`) &lt;span class=&quot;caps&quot;&gt;VALUES&lt;/span&gt; #{values.join(&amp;#8216;,&amp;#8217;)}&amp;#8221;)&lt;/p&gt;
&lt;p&gt;不过这种写法还是欠妥，如何改进期待大家指点。谢谢&lt;/p&gt;
&lt;p&gt;最新作品：&lt;a href=&quot;http://www.shiguangzhaoxiang.com&quot; target=&quot;_blank&quot;&gt;长春时光转机摄影，专业拍摄大型团体合影，集体合影，专业转机旋转360度拍摄&lt;/a&gt;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/batch-create-and-run-sql-directly-in-rails</link>
                <guid>http://liwei78.github.io/blog/batch-create-and-run-sql-directly-in-rails</guid>
                <pubDate>2009-08-22T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>sns网站设计感想</title>
                <description>&lt;hr /&gt;
&lt;p&gt;下午还要继续开发目前服务的某sns网站。为了活跃一下思维，写点感想之类东西。&lt;/p&gt;
&lt;p&gt;这半年多时间里碰到好多询问开发sns网站的事情，大体可分为：网站整体制作，sns的功能外包，app功能。本人并无十分能耐，多谢大家。对于sns的印象，还是技术细节。之前列出过一个sns开发中的功能列表，打算逐步写出来。但是今天看了下实在又没什么技术吸引力了。只要花些时间，都能解决的很好了。我也是从google上找的各种解决办法先参考，然后实现。&lt;/p&gt;
&lt;p&gt;这个过程中很吸引我的，是下面的两个：ui框架和元素设计。&lt;/p&gt;
&lt;p&gt;这两个都和Rails无关。&lt;/p&gt;
&lt;p&gt;ui框架，是整个css的框架，具体定义了每一个html元素的式样，和如何复用。这在中型网站里很重要。比如经常碰到的table的thead，tbody，th，td。管理界面的table，错误信息如何展示。提示信息的展示。整站按钮的颜色，动作按钮，信息链接。导航按钮。导航菜单。&lt;/p&gt;
&lt;p&gt;元素设计，我觉得是在ui框架上更进一步的展示设计。比如，一个“确定”按钮的大小，背景色，边框颜色。头像的外部边框和头像列表的式样。用户列表的操作按钮及其图标。设计的时候随手做出来的东西在事后检查，会发现太多值得商榷，尤其是看完&lt;a href=&quot;http://union.dangdang.com/transfer/transfer.aspx?from=P-272054&amp;backurl=http://product.dangdang.com/product.aspx?product_id=20642344&quot; target=&quot;_blank&quot;&gt;《瞬间之美》这本书&lt;/a&gt;。太随意缺乏规划的设计，无法称之为作品。这在后面的开发中会逐渐修正，做到有理有据。（客户也是需要说服的，一言堂的开发是很可怕的，尤其是客户无法做到事无巨细，当出现不明确和不确定的时候，选择起来很痛苦。有时候揣摩客户的心理占用的时间比设计一个功能还长。）。&lt;/p&gt;
&lt;p&gt;还有很多东西需要思考，sns的开发还在继续。。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/2009-8-10</link>
                <guid>http://liwei78.github.io/blog/2009-8-10</guid>
                <pubDate>2009-08-10T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>sns网站开发经验总结：中国省份城市插件（一）</title>
                <description>&lt;hr /&gt;
&lt;p&gt;写在前面：&lt;/p&gt;
&lt;p&gt;经过三个多月的共同努力，sns项目终于完成上线了。感谢众位合作兄弟的持续支持和热情投入。项目走过了开发，完善，再开发，再完善的过程。下面逐步将开发中的经验和大家分享。期待和大家共同交流，提高水平。谢谢！&lt;/p&gt;
&lt;p&gt;今天首先介绍一个优秀的插件，city_helper。&lt;/p&gt;
&lt;p&gt;代码：&lt;a href=&quot;http://github.com/yzhang/city_helper/tree/master&quot; target=&quot;_blank&quot;&gt;http://github.com/yzhang/city_helper/tree/master&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;网站：&lt;a href=&quot;http://www.letrails.cn/archives/city-helper-a-plugin-provide-state-and-city-select&quot; target=&quot;_blank&quot;&gt;http://www.letrails.cn/archives/city-helper-a-plugin-provide-state-and-city-select&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;功能：实现国内省份，城市的联动选择。&lt;/p&gt;
&lt;p&gt;特点：这个省份城市联动选择功能，是sns网站必备的功能之一。我们不用反复的造轮子啦，感谢作者的分享。&lt;/p&gt;
&lt;p&gt;修正：插件中有一点点小错误，已经在作者博客留言。使用的朋友会发现的。&lt;/p&gt;
&lt;p&gt;1、CITIES，keys中广西应为广东&lt;br /&gt;
2、海南的城市没有加，我添加了两个 ‘海南’ =&amp;gt; [’海口’, ‘三亚’],&lt;/p&gt;
&lt;p&gt;还有一个太合适的设置，一是 state_and_city_select 方法初始化时，省份为北京，城市为所有城市，其中包括北京。研究了一下方法，将city_choices改为&lt;/p&gt;
&lt;p&gt;def city_choices&lt;br /&gt;
&amp;#8220;北京&amp;#8221;&lt;br /&gt;
end&lt;/p&gt;
&lt;p&gt;并且增加 了famous_select 方法，将几个重点城市放置其中，方便选择。&lt;/p&gt;
&lt;p&gt;当然应用要根据需求定制，这个插件非常优秀的实现了联动选择，稍加修改，即可实现客户的需求。感谢开源，感谢作者。感谢众多辛苦工作，热心奉献的程序员们。&lt;/p&gt;
&lt;p&gt;update:2009-6-3&lt;/p&gt;
&lt;p&gt;又修正了一下，编辑所在地时，会列出所有城市的问题。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/2009/05/city_helper.rb&quot;&gt;city_helper&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;右键另存一下这个文件吧。修改的部分比较下就能看到了。&lt;/p&gt;
&lt;p&gt;update:2009-6-30&lt;/p&gt;
&lt;p&gt;补充一下页面上的引用。改插件在创建新纪录时，完全没问题。但是当加入到“我的资料”这样的版块，需要修改时，会出现城市列表中，包含全部城市。这里并没有初始化已有选择。下面做了一些改动。&lt;/p&gt;
&lt;p&gt;在页面调用上，如下：&lt;/p&gt;
&lt;pre&gt;
&amp;lt;%= state_and_city_select :user_detail, :province, :city, {:state=&amp;gt;{:include_blank =&amp;gt; true}, :city=&amp;gt;{:include_blank =&amp;gt; true}} %&amp;gt;

&amp;lt;script type=&quot;text/javascript&quot;&amp;gt;

  init_city_select('&amp;lt;%= @user_detail.province %&amp;gt;','&amp;lt;%= @user_detail.city %&amp;gt;');

&amp;lt;/script&amp;gt;
&lt;/pre&gt;</description>
                <link>http://liwei78.github.io/blog/sns-notes-china-province-and-city-select-plugin</link>
                <guid>http://liwei78.github.io/blog/sns-notes-china-province-and-city-select-plugin</guid>
                <pubDate>2009-05-03T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>jquery和prototype的代码对比</title>
                <description>&lt;hr /&gt;
&lt;p&gt;原文：&lt;/p&gt;
&lt;p&gt;Remy Sharp has gone through the jQuery and Prototype frameworks, which are probably the two closest to each other, and has done a side by side comparison of the frameworks by showing you how similar things work on both.&lt;/p&gt;
&lt;p&gt;The presentation looks into the utility functions, selectors, &lt;span class=&quot;caps&quot;&gt;DOM&lt;/span&gt; manipulation, &lt;span class=&quot;caps&quot;&gt;DOM&lt;/span&gt; walking, events, Ajax transport, and browser detection.&lt;/p&gt;
&lt;p&gt;里克：最近在把jquery应用的两个Rails的项目中，一直在使用jRails和Rails-widgets这两个插件，完成的非常不错，刚才查jquery的oberve的时候看到了这个文档，分享一下。&lt;/p&gt;
&lt;div style=&quot;width:425px;text-align:left&quot; id=&quot;__ss_145849&quot;&gt;&lt;object style=&quot;margin:0px&quot; height=&quot;355&quot; width=&quot;425&quot;&gt;&lt;param name=&quot;movie&quot; value=&quot;http://static.slideshare.net/swf/ssplayer2.swf?doc=prototype-jquery-going-from-one-to-the-other-1193346036472971-5&quot;/&gt;&lt;param name=&quot;allowFullScreen&quot; value=&quot;true&quot;/&gt;&lt;param name=&quot;allowScriptAccess&quot; value=&quot;always&quot;/&gt;&lt;embed src=&quot;http://static.slideshare.net/swf/ssplayer2.swf?doc=prototype-jquery-going-from-one-to-the-other-1193346036472971-5&quot; type=&quot;application/x-shockwave-flash&quot; allowscriptaccess=&quot;always&quot; allowfullscreen=&quot;true&quot; width=&quot;425&quot; height=&quot;355&quot;&gt;&lt;/embed&gt;&lt;/object&gt;&lt;div style=&quot;font-size:11px;font-family:tahoma,arial;height:26px;padding-top:2px;&quot;&gt;&lt;a href=&quot;http://www.slideshare.net/?src=embed&quot;&gt;&lt;img src=&quot;http://static.slideshare.net/swf/logo_embd.png&quot; style=&quot;border:0px none;margin-bottom:-5px&quot; alt=&quot;SlideShare&quot;/&gt;&lt;/a&gt; | &lt;a href=&quot;http://www.slideshare.net/remy.sharp/prototype-jquery-going-from-one-to-the-other&quot; title=&quot;View this slideshow on SlideShare&quot;&gt;View&lt;/a&gt; | &lt;a href=&quot;http://www.slideshare.net/upload&quot;&gt;Upload your own&lt;/a&gt;&lt;/div&gt;&lt;p&gt;&lt;/div&gt;&amp;lt;img style=&amp;#8220;visibility:hidden;width:0px;height:0px;&amp;#8221; border=0 width=0 height=0 src=&amp;#8220;http://counters.gigya.com/wildfire/&lt;span class=&quot;caps&quot;&gt;IMP&lt;/span&gt;/&lt;span class=&quot;caps&quot;&gt;CXNID&lt;/span&gt;=2000002.0NXC/bT*xJmx*PTEyMzU3MzM1OTM5NTMmcHQ9MTIzNTczMzYyMDk2OCZwPTEwMTkxJmQ9Jmc9MiZ*PSZvPWY2NzEyMzlmNmE4MDQ*ZWVhNjQwMDFhYTIxNDRiOWQz.gif&amp;#8221; /&amp;gt;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/prototype-and-jquery-a-code-comparison</link>
                <guid>http://liwei78.github.io/blog/prototype-and-jquery-a-code-comparison</guid>
                <pubDate>2009-02-27T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>47个漂亮的ajax+css表单</title>
                <description>&lt;hr /&gt;
&lt;p&gt;http://www.noupe.com/css/47-excellent-ajax-css-forms.html&lt;/p&gt;
&lt;p&gt;正在处理Rails的表单，发现的这个，不错，分享下。&lt;/p&gt;
&lt;p&gt;另：第一次使用wp的快速发布，挺好&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/47-excellent-ajax-css-forms</link>
                <guid>http://liwei78.github.io/blog/47-excellent-ajax-css-forms</guid>
                <pubDate>2009-02-15T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>sns网站ui框架概念图</title>
                <description>&lt;hr /&gt;
&lt;p&gt;最近太多的sns站点需求摆在脑海里（所以晚上睡不着觉，哎），所以画了一张，给予自己目前项目设计的ui框架，姑且是一个概念图吧。在此简单笔记一下思路：&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/2009/02/layout.png&quot;&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/2009/02/layout1.png&quot;&gt;&lt;img class=&quot;alignnone size-full wp-image-378&quot; title=&quot;layout1&quot; src=&quot;http://railser.cn/wp-content/uploads/2009/02/layout1.png&quot; alt=&quot;layout1&quot; width=&quot;600&quot; height=&quot;400&quot; /&gt;&lt;/a&gt;&lt;br /&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;1、header，footer：目前的趋势是更加充分利用header的空间，增加隐藏层，通过鼠标实践显示一个列表内容。header，只提供整站大分类导航&lt;/p&gt;
&lt;p&gt;2、sider_bar：应用导航。放到左侧，更加重用户的关注度，用户会更多的点击里面的连接。比如uchome把博客（发布），图片（上传）等操作放到这里。下面是游戏的列表。&lt;/p&gt;
&lt;p&gt;但是对于所有页面，side_bar并不全都适合，1、影响到内容的展示，占用了200px空间。2、side_bar内容可能不符合该页面主体内容，比如页面为博客展示页面，side_bar内还出现相册，上传图片，圈子，讨论区等等连接，会给人一种杂乱的感觉。&lt;/p&gt;
&lt;p&gt;还有可能对seo产生不良影响。&lt;/p&gt;
&lt;p&gt;3、main，当side_bar隐藏时，width为100%。为主体内容提供容器。&lt;/p&gt;
&lt;p&gt;4、tab和button：二级页面导航功能，资源页面导航功能。比如 活动 分类，tab包含 全部，热门，最新，登陆后显示我的活动。&lt;/p&gt;
&lt;p&gt;这样设计，使得在header进入后，tab可起到位置定位，比如当前tab和其他tab可用式样来区分。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/2009/02/tabs.jpg&quot;&gt;&lt;img class=&quot;alignnone size-full wp-image-373&quot; title=&quot;tabs&quot; src=&quot;http://railser.cn/wp-content/uploads/2009/02/tabs.jpg&quot; alt=&quot;tabs&quot; width=&quot;276&quot; height=&quot;50&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;button强调该分类下的资源重点操作，如“创建一个新活动”，“发表一个新话题”。&lt;/p&gt;
&lt;p&gt;这种设计的考虑是，二级分类多数为资源，button体现了吸引用户操作该资源。&lt;/p&gt;
&lt;p&gt;ps：这是uchome中的设计，个人非常喜欢。&lt;/p&gt;
&lt;p&gt;5、content和content_bar&lt;/p&gt;
&lt;p&gt;content为主要内容展示空间，content_bar辅助显示动态，管理按钮，广告等内容。&lt;/p&gt;
&lt;p&gt;content_bar可隐藏，内容不固定，根据content来决定内容。&lt;/p&gt;
&lt;p&gt;最后，个人总结的uchome ui中的问题&lt;/p&gt;
&lt;p&gt;1、css太过复杂，结构不清晰，没有使用layout和theme分离的设计&lt;/p&gt;
&lt;p&gt;2、side_bar部分为全局模板，多数页面显得占地方，不过上面的重点连接也是sns站的主要功能，所以需要灵活设计&lt;/p&gt;
&lt;p&gt;3、js设计占用了太多页面代码，html浩如烟海啊&lt;/p&gt;
&lt;p&gt;4、mtag这个名字让我很摸不着头脑，类型复用程度低，根本无法实现资源的设计和管理。比如，Rails中的topic和photo的多态设计，使得其他资源均可以使用，但uchome中不可以。&lt;/p&gt;
&lt;p&gt;5、uchome不是一个技术产品，它是个市场需求下的产品，不能期望太多，但是，无论是php还是Rails去设计一个sns站点，uchome的设计细节非常值得学习。&lt;/p&gt;
&lt;p&gt;里克，2009年2与13日情人节前。情人节给老婆买个平底锅去~~&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/sns-site-ui-conceptual-graph</link>
                <guid>http://liwei78.github.io/blog/sns-site-ui-conceptual-graph</guid>
                <pubDate>2009-02-13T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>sns ui 设计要看的两篇文章</title>
                <description>&lt;hr /&gt;
&lt;p&gt;声明：本文转载自&lt;a href=&quot;http://www.5gme.com/space-84-do-blog-id-8867.html&quot;&gt;http://www.5gme.com/space-84-do-blog-id-8867.html&lt;/a&gt;&lt;br /&gt;
&lt;div id=&quot;blog_article&quot; class=&quot;article&quot;&gt;&lt;br /&gt;
&lt;div class=&quot;resizeimg&quot;&gt;&lt;/p&gt;
&lt;p&gt;浅析facebook的信息架构&lt;/p&gt;
&lt;p&gt;facebook的信息架构设计，是目前为止互联网上我见过的最合理的信息架构。&lt;/p&gt;
&lt;p&gt;每次&lt;a href=&quot;http://ucdchina.com/blog/?p=495&quot; target=&quot;_blank&quot;&gt;培训&lt;/a&gt;，我基本都需要拿20分钟左右的时间来解析它，包括老的、新的、被抄袭的。 一直打算把这个解析过程写下来，但讲的时候可以图音并茂，写的时候确实表达起来很难。&lt;br /&gt;
今日权且一试，希望能把培训师讲到的内容表达出30%。(只写现在界面上表现出来的东西，不分析栏目划分已经扩展性问题了)&lt;/p&gt;
&lt;p&gt;先看facebook老版界面的信息架构：&lt;/p&gt;
&lt;p&gt; &lt;br /&gt;
&lt;div style=&quot;cursor: pointer; position: relative;&quot;&gt;&lt;img style=&quot;margin-top: 5px; margin-left: 472px; position: absolute;&quot; src=&quot;http://www.5gme.com/image/zoom.gif&quot; alt=&quot;&quot; /&gt;&lt;img style=&quot;width: 500px;&quot; title=&quot;点击图片，在新窗口显示原始尺寸&quot; src=&quot;http://uicom.net/blog/attachments/200706/facebook_old.png&quot; alt=&quot;&quot; /&gt;&lt;/div&gt;&lt;br /&gt;
*大架构的发展和变迁过程：* &lt;/p&gt;
&lt;p&gt;1、最开始，facebook的整个信息架构主要分成三个部分：“系统核心导航区”（如上图，蓝色部分。包括LOGO和两个全部导航）、“应用导航区”（如上图，黄色部分。包括一个全局应用(搜索)和所有的应用列表）、“内容显示区”（如上图，橙色部分。主要分成局部导航、主内容、辅助内容三个大部分，有N多主要内容）。&lt;/p&gt;
&lt;p&gt;由于“系统核心导航区”、“应用导航区”的常态存在和内容繁多，在用户使用时经常会干扰用户对主要内容的关注。所以，facebook在视觉设计上，特意通过错位特别突出了“内容显示区”（如上图，橙色部分。我看到有些设计师说“facebook的视觉很烂，把那个位置扭曲了很傻”，其实他们根本没有看出设计者的意图，很傻！）&lt;/p&gt;
&lt;p&gt;2、后来，facebook添加了“协作翻译”，这是一个全局功能。按照一般的设计思路，这个“翻译”的位置选择可以：放在“全部导航3（设置）”的位置，或作为“全部导航2（应用）”的一个常态项目。&lt;br /&gt;
但facebook没有这么做，为了更好的表现其牛逼的UGC魅力，facebook的设计师大大加重了“翻译”在导航上的比重。“不伦不类”的把这个应用，突出在了“内容显示区”的右上角，同时在“全部导航3（设置）”里加了一个语言切换的导航（后来大概是发现“语言切换”的使用频率很少，现在给调换到了底部版权信息的右侧）。&lt;/p&gt;
&lt;p&gt;3、再后来，facebook推出了IM功能。对于facebook来说这是一个常态应用，在信息架构上必须常态存在。于是他们把“即时通讯”结合了“信息通知”一起作成了“状态栏”的模式。  （我猜想，这个时候facebook的设计师们已经有了“操作系统”的设想）&lt;/p&gt;
&lt;p&gt;这是一个很艺术性的设计，处理的非常好。而且IM本身设计做的非常轻巧易用。 在此之前我曾经猜测，他们可能会把IM放到“系统核心导航区”的“收件箱”的位置，结果我错了，他们找到了更好的设计方式。&lt;/p&gt;
&lt;p&gt;4、如今，由于“系统核心导航区”（如上图，蓝色部分）、“应用导航区”（如上图，黄色部分）是常态存在的内容，占据了界面很大比例的位置，再加上内容显示区（如上图，橙色部分）本身还需要一些“关联导航”“友好导航”已经“标题”的内容，导致每个页面真正展示“内容”的区域很少很少。&lt;br /&gt;
作为一个网站，这没有什么大问题。但作为一个“应用平台”，这无疑有很多的障碍，界面内容展现严重受限，用户的视觉总是浪费“常态导航”上。想一想如果你的操作系统界面，1/3空间长期被系统菜单占据，你会不会崩溃？&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;我对老版设计的，几个主要评价：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1、逻辑清晰，层次分明严谨。扩展性好。但在内容呈现上，缺乏创新。&lt;/p&gt;
&lt;p&gt;2、facebook整个网站的核心是“我的”，这就是他顶部系统核心导航区（如第一张图，蓝色部分）。另外，顶部还有“全部导航3（设置）”。整个顶部是网站的核心，用户不可能被用户或者第三方改变，也是facebook的官方保留“区域”。&lt;/p&gt;
&lt;p&gt;但，这里有个细节他们一直蹑手蹑脚没有真正放开，就是那个权宜之计的“home”。&lt;br /&gt;
事实上现在大部分用户返回首页都会点击logo，facebook在主导航上取消了“home”，但又不敢完全取消，于是在“全部导航3（设置）”那个区域前面加了一个“home”，而且还把这个链接和logo的链接作了区分，一直保持着对数据的检测（包括最新的信息架构设计也一样作了链接区分，在检测数据。有兴趣人可以看看logo的链接和home的链接地址不一样）&lt;/p&gt;
&lt;p&gt;3、facebook的主要导航其实是“应用导航区”。这里影响了主要内容区的显示。&lt;br /&gt;
“系统核心导航区”和“应用导航区”包围着内容显示区的做法，结构和逻辑都很清晰，而且容易理解。&lt;/p&gt;
&lt;p&gt;4、主要内容区有一个设计一直存在争议：&lt;br /&gt;
比如，在“图片”的页面，facebook加了两个链接“我的图片”“有我的图片”，这两个链接被处理成了“友好导航”，用户点击后到了新的界面，新的界面无法返回当前“图片”的应用。&lt;br /&gt;
但，就国内用户（我不是很相信在这个地方存在国内外用户使用习惯的偏差）的使用习惯来看，这两个链接应该被当作“关联导航”甚至“局部导航”处理。这也是UCH在抄袭facebook时做过的为数不多的“好改动”之一。&lt;br /&gt;
.&lt;br /&gt;
.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;再看看facebook现在新的信息架构设计：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;如上所说，老版的信息架构显示了facebook的主要内容展示区域。使每个界面都背负了严重的“导航任务”。&lt;br /&gt;
于是facebook开始尝试改变。刚开始，他们试图拉宽整个内容显示区的空间，把应用导航区和常态提示信息放到系统核心导航区下面，做成windows“开始菜单”的模式。（这个版本有些人看到过，UCH现在准备出的新版抄袭了这个设计。在这里不做详细评价）&lt;/p&gt;
&lt;p&gt;（也许他们觉得这样还是太啰嗦，内容显示区还是不够大），现在他们把应用导航区合并到了系统核心导航区里。 不仅是内容布局上作了改变，连栏目的规划都有了新的变化。（这个版本可以在“http://www.new.facebook.com”看到）&lt;/p&gt;
&lt;p&gt; &lt;br /&gt;
&lt;div style=&quot;cursor: pointer; position: relative;&quot;&gt;&lt;img style=&quot;margin-top: 5px; margin-left: 472px; position: absolute;&quot; src=&quot;http://www.5gme.com/image/zoom.gif&quot; alt=&quot;&quot; /&gt;&lt;img style=&quot;width: 500px;&quot; title=&quot;点击图片，在新窗口显示原始尺寸&quot; src=&quot;http://uicom.net/blog/attachments/200706/facebook_new.png&quot; alt=&quot;&quot; /&gt;&lt;/div&gt;&lt;br /&gt;
 &lt;/p&gt;
&lt;p&gt;主要变化：&lt;/p&gt;
&lt;p&gt;1、将所有全部导航和引用压缩到顶部的一个区域，甚至不惜大举压缩LOGO尺寸，让这个区域尽可能的小。（如图，蓝色区域）&lt;br /&gt;
当然，这样的大变化也伴随着其栏目划分的重新规划。&lt;/p&gt;
&lt;p&gt;2、将广告从左边拿到右边。尽可能的放大并在主要的视觉“焦点区”突出具体的页面内容。&lt;/p&gt;
&lt;p&gt;3、保持IM和通知的常态显示，并将“翻译”合并到一起。&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;我对新版设计的，几个主要评价：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1、新的信息架构设计其实面临着很大的调整。要从一个传统网站到一个应用平台作专门，确实很难很难。对于一般的界面设计师来说，这个任务很难完成。但facebook的设计师做到了，而且从时间上来看他们很有前瞻性，呈现层的设计甚至走到了策略之前。&lt;br /&gt;
2、新的设计改的大胆，页面就应该表现出“系统”的感觉。 每一个应用就像一个软件。“应用”列表就应该合并起来，“应用”和“应用”之间的切换根本不需要那么快捷。&lt;/p&gt;
&lt;p&gt;3、顶部蓝色的主导航区应该再加宽（只要不是100%宽度就行）、压低，完全做成状态栏的样式。&lt;/p&gt;
&lt;p&gt;3、把应用夹杂到“我的”一些选项中间不合理。特别是放在好友和收件箱中间。&lt;br /&gt;
如果是我设计，我会把LOGO变成“开始菜单”，把应用放进去。&lt;/p&gt;
&lt;p&gt;.&lt;br /&gt;
.&lt;/p&gt;
&lt;p&gt;*最后，看看一些抄袭者的作品：*（是谁我就不说了）&lt;/p&gt;
&lt;p&gt;（作品1）&lt;br /&gt;
&lt;div style=&quot;cursor: pointer; position: relative;&quot;&gt;&lt;img style=&quot;margin-top: 5px; margin-left: 472px; position: absolute;&quot; src=&quot;http://www.5gme.com/image/zoom.gif&quot; alt=&quot;&quot; /&gt;&lt;img style=&quot;width: 500px;&quot; title=&quot;点击图片，在新窗口显示原始尺寸&quot; src=&quot;http://uicom.net/blog/attachments/200706/facebook_3.png&quot; alt=&quot;&quot; /&gt;&lt;/div&gt;&lt;br /&gt;
*点评： *&lt;br /&gt;
这个设计单看一个页面就有问题，属于层次混乱。 单个页面的逻辑不顺畅。&lt;br /&gt;
用户经常不知道自己在哪里。&lt;br /&gt;
而且没有将关联导航和友好导航区分开，次序和逻辑都交代的十分混乱。 &lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;（作品2）&lt;br /&gt;
&lt;div style=&quot;cursor: pointer; position: relative;&quot;&gt;&lt;img style=&quot;margin-top: 5px; margin-left: 472px; position: absolute;&quot; src=&quot;http://www.5gme.com/image/zoom.gif&quot; alt=&quot;&quot; /&gt;&lt;img style=&quot;width: 500px;&quot; title=&quot;点击图片，在新窗口显示原始尺寸&quot; src=&quot;http://uicom.net/blog/attachments/200706/facebook_2.png&quot; alt=&quot;&quot; /&gt;&lt;/div&gt;&lt;br /&gt;
 &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;点评：&lt;/strong&gt;&lt;br /&gt;
这是某社区专家的网站结构图，单看他的页面没有任何问题，结构清晰，层次分明。&lt;br /&gt;
但，用户只要一使用，就晕乎。改动过的信息架构（其实只是把内容区的“关联导航（操作和设置）”的放到了“全局导航2（应用）的上面”）使用起来极其不流畅。（为什么不流畅，在这里不多解释）。&lt;/p&gt;
&lt;p&gt;该网站从上线到现在一直充斥着一类投诉：靠，怎么加入群呀？ 怎么设置群？ ….&lt;/p&gt;
&lt;p&gt;虽然是借用facebook的信息机构，但足见抄袭之失败。虽然只是一个“关联导航（操作和设置）”的变化而已。&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;此文为抛砖引玉，我想说的内容大概只表达了1/3不到。（这里只说了布局，并未说栏目、导航划分的原则、延续性、扩展性等问题）&lt;br /&gt;
.&lt;/p&gt;
&lt;p&gt;结束，简单总结：&lt;/p&gt;
&lt;p&gt;好的信息架构设计，可以清楚的表现产品定位，可以清楚的阐述内容层次和关系，可以在使用中保持流畅，并能够让用户迅速的熟悉。&lt;/p&gt;
&lt;p&gt;所谓“*清楚的表现产品定位*”：用户一看网站的信息架构，就知道这个网站是干什么的，我是否应该留在这里，我在这里能干什么应该怎么开始去用。&lt;br /&gt;
所谓 “*清楚的阐述内容层次和关系*”：用户一看网站的信息架构，就清楚知道页面上有多少内容，内容和内容之间的关系是什么，什么类型的内容在什么位置。&lt;br /&gt;
所谓“*可以在使用中保持流畅*”：让用户在使用的过程中感觉不到“跳转”和“障碍”，感觉自己在一个平和世界里畅游，非常流畅，不跳动、不卡机。&lt;br /&gt;
所谓“*能够让用户迅速的熟悉*”：用户看到你的第一个界面时，也许需要找一下他需要的内容在那里，也许会觉得这个网站陌生、有距离。但当他很自然的看到第二个、第三个界面后，应该感觉“这个网站很熟悉”，需要任何内容时都不用去“找”，很自然的就能知道什么类型的内容在什么位置。&lt;br /&gt;
.&lt;/p&gt;
&lt;p&gt;PS:&lt;br /&gt;
我敢断言，“呈现层的信息架构和导航”必将成为未来网站产品设计中的核心工作，未来一个网站的设计80%工作都在此。其学问之深并非一两本书能说清楚，更不是一两篇blog能表达明白的。&lt;br /&gt;
欢迎有兴趣者深入交流。&lt;/div&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;里克：最近的项目和未来的一个项目都是sns为基础的应用，可见现在有点规模的站点sns是必备的。看了下面这个文章的确思路清晰不少。&lt;/p&gt;
&lt;p&gt;个人观点：UI的设计是一个简-繁-简的前进路线，目前我给客户设计的站点，可以用下面的图概括&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;alignnone&quot; title=&quot;demo&quot; src=&quot;http://railser.cn/wp-content/uploads/demo.png&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;341&quot; /&gt;&lt;/p&gt;
&lt;p&gt;主要的想法是：同类的功能操作，放在一起，用tab实现并列，tab的current颜色，实现用户的当前定位。&lt;/p&gt;
&lt;p&gt;这仅是个人的想法，需要一定时间来改进。毕竟uchome将在几个月后带来审美疲劳，个性风格必将在sns普及的大环境下有更多的需求。（外包的好时机哦。）所以抓紧理论的研究，能给给客户一个满意的方案。里克个人见解，欢迎朋友们讨论。&lt;/p&gt;
&lt;p&gt;这篇文章同样值得看一下：&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://hi.baidu.com/%C2%ED%C1%BCs/blog/item/7bc98638ab83daf4b311c739.html&quot;&gt;http://hi.baidu.com/%C2%ED%C1%BCs/blog/item/7bc98638ab83daf4b311c739.html&lt;/a&gt;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/sns-ui-design-blog</link>
                <guid>http://liwei78.github.io/blog/sns-ui-design-blog</guid>
                <pubDate>2009-02-09T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>Fckeditor on Rails的问题和临时解决办法</title>
                <description>&lt;hr /&gt;
&lt;p&gt;在目前的项目中使用了Fckeditor On Rails插件，没想到碰到很不少问题，网上google一下，发现大家都有这样的问题，有的是这个plugin的问题，有的是fck的问题。为了方便日后对系统的管理，在此笔记一下目前碰到的诸多问题和临时的解决办法。&lt;/p&gt;
&lt;p&gt;问题：&lt;/p&gt;
&lt;p&gt;1、无法编辑内容，编辑时出现js问题&lt;/p&gt;
&lt;p&gt;2、上传图片时无法准确放入指定Image文件夹路径中&lt;/p&gt;
&lt;p&gt;3、上传文件时无法得到params[:Type]变量&lt;/p&gt;
&lt;p&gt;4、无法使用 fckeditor 的文件上传配置&lt;/p&gt;
&lt;p&gt;5、上传中文rar文件时，出现110错误提示&lt;/p&gt;
&lt;p&gt;解决：&lt;/p&gt;
&lt;p&gt;1、插件似乎没有考虑修改的问题，之前我的asp做的EZAdmin中，简单的传递内容即可，现在看来插件里并没有去处理传进来的value属性，所以在fckeditor.rb中增加了这个方法，使之能够编辑内容。&lt;/p&gt;
&lt;p&gt;2、图片可以传递入Image文件夹内，但是结果中没有后面的文件名，具体原因似乎是版本的事情，这个暂时不去对比了，改了fckeditor_controller.rb中的返回值内容，也就是使 &lt;span style=&quot;color: #ff0000;&quot;&gt;OnUploadCompleted的第二个参数带上了文件名&lt;/span&gt;，暂时得以解决。&lt;/p&gt;
&lt;p&gt;3、问题同2类似，这时无法得到params[:Type]参数，看了下fck_image.js里，对图片上传设置了type属性为image，&lt;span style=&quot;color: #ff0000;&quot;&gt;但是文件上传，或者叫Link上传时，没有设置这个属性&lt;/span&gt;。所以在fckeditor_controller.rb中，当该属性为空时，设置为File。这个修改&lt;span style=&quot;color: #ff0000;&quot;&gt;非常危险&lt;/span&gt;，但是目前没有更好的方法。&lt;/p&gt;
&lt;p&gt;4、在文件上传时，作者自定义了MIME_TYPE数组，来做校验。这个有点。。。。所以暂时将几个类型加上，解决doc,zip,rar等文件上传先。&lt;/p&gt;
&lt;p&gt;application/msword&lt;/p&gt;
&lt;p&gt;application/x-zip-compressed&lt;/p&gt;
&lt;p&gt;application/octet-stream （rar的）&lt;/p&gt;
&lt;p&gt;5、当上面都解决完，发现对中文名文件无法上传，哭吧。。。。。。&lt;/p&gt;
&lt;p&gt;下面是我修改完的Fckeditor on Rails plugin，希望朋友们多指正问题。谢谢。&lt;/p&gt;
&lt;p&gt;说明：plugin版本：0.5.1，Rails版本：2.1.2，两个部分的，不用安装了。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/fckeditor051-for-rails212.rar&quot; target=&quot;_blank&quot;&gt;fckeditor051-for-rails212&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/javascripts.rar&quot; target=&quot;_blank&quot;&gt;javascripts&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;后记：&lt;/p&gt;
&lt;p&gt;记得每次修改完插件内容后要重启一下服务&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/fckeditor-on-rails-problems-and-solutions</link>
                <guid>http://liwei78.github.io/blog/fckeditor-on-rails-problems-and-solutions</guid>
                <pubDate>2009-02-08T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>貌似php父路径问题引发的问题</title>
                <description>&lt;hr /&gt;
&lt;p&gt;问题出现了：&lt;/p&gt;
&lt;p&gt;转移了discuz！6.1论坛到新的服务器，因为使用的火狐插件来播放flash，所以打开时发现提示：“failed to open include/common.inc.php”的提示。&lt;/p&gt;
&lt;p&gt;分析：&lt;/p&gt;
&lt;p&gt;之前，论坛在windows环境下，搭建的php，转来后，虽然还是windows，但是改成了apache做前端。因为php的设置肯定不会转过来，所以应该在配置或权限上出的问题。&lt;/p&gt;
&lt;p&gt;检查：&lt;/p&gt;
&lt;p&gt;权限上，用论坛自带的检查看了下没有问题，所以可能是apache配置或php的配置问题。&lt;/p&gt;
&lt;p&gt;查了下百度和google，大家都在认为貌似是父路径的问题。看了下open_basedir的描述，貌似是问题的关键，&lt;span style=&quot;color: #ff6600;&quot;&gt;可是里面提到了safe_mode设置&lt;/span&gt;，对比了下&lt;span style=&quot;color: #ff6600;&quot;&gt;windows&lt;/span&gt;的php环境和&lt;span style=&quot;color: #ff6600;&quot;&gt;apache&lt;/span&gt;的php环境配置，发现windows下的safe_mode=Off，而新的apache环境是On。&lt;/p&gt;
&lt;p&gt;解决：&lt;/p&gt;
&lt;p&gt;改成Off后，正常访问了。&lt;/p&gt;
&lt;p&gt;后话：&lt;/p&gt;
&lt;p&gt;很久没有动apache的配置了，希望这次能是一个好的开始。另：今天，已经搬进新房子了，虽然是租的，但是更多的人感觉我自己开了个工作室。貌似是吧，我可以专心工作，写博客，学习了。李猪猪小朋友不会再跑来抢电脑或者：“闪开，就坐一会”啦~！&lt;/p&gt;
&lt;p&gt;希望未来两个月可以把工作重新走上正规。加油，加油~~！！湘北必胜~~！！&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/its-not-php-parent-path-problem</link>
                <guid>http://liwei78.github.io/blog/its-not-php-parent-path-problem</guid>
                <pubDate>2009-02-04T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>使用attachment_fu实现多图上传</title>
                <description>&lt;hr /&gt;
&lt;p&gt;请参考&lt;a href=&quot;http://howtomatic.com/category/programming/14-ruby-on-rails-multi-file-uploads-with-attachment-fu&quot; target=&quot;_self&quot;&gt;这篇文章&lt;/a&gt;。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/multi-file-uploads-with-attachment-fu</link>
                <guid>http://liwei78.github.io/blog/multi-file-uploads-with-attachment-fu</guid>
                <pubDate>2009-01-11T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>Rails Rdoc笔记：respond_to</title>
                <description>&lt;hr /&gt;
&lt;p&gt;首先祝所有的朋友09年工作学习顺利。祝&lt;a href=&quot;http://liyuang.com&quot; target=&quot;_blank&quot;&gt;李猪猪小朋友&lt;/a&gt;即将到来的幼儿园生活开心。&lt;/p&gt;
&lt;p&gt;刚才看了下respond_to这个方法，想写上一些东西。&lt;/p&gt;
&lt;p&gt;最新做的项目，要求松耦合。因为之前2个月一直在做康盛的uchome的项目设计，对这种设计方式有点自己的想法。所以在初级设计这个代号kx2009的Rails项目时，走了些弯路。刚才看到redpond_to的文字，感觉又回到了一个正确使用Rails的方向，就是更加的REST，要web service。&lt;/p&gt;
&lt;p&gt;REST的概念在我心里是来做资源管理的，这个资源管理要简单，所以我并不喜欢/users/1/posts/22这种资源嵌套，我更喜欢是/users/1，而他的posts就是/posts/index,/posts/22，足够。&lt;/p&gt;
&lt;p&gt;多态。这次用到了很多多态的方法，使得设计上每个部分都很松耦合，能够复用，比如那个photos，就可以给活动，圈子，论坛去承担不同Model的图片上传，显示，管理功能。积分和信誉积分采用了同样的设计，下面的Account就是多态。（不过自动累加上一个Model的total字段稍微麻烦了点，magic有类似counter_cache的功能吗？对belongs_to那方的total字段进行自动加减？）&lt;/p&gt;
&lt;p&gt;好了，看看Rdoc的描述。大意是：Rails是一个很好的web-service框架。&lt;br /&gt;
bq. &lt;br /&gt;
&lt;div class=&quot;method-description&quot;&gt;&lt;/p&gt;
&lt;p&gt;Without web-service support, an action which collects the data for displaying a list of people might look something like this:&lt;br /&gt;
&lt;pre&gt;  def index&lt;br /&gt;
    @people = Person.find(:all)&lt;br /&gt;
  end&lt;/pre&gt;&lt;br /&gt;
Here‘s the same action, with web-service support baked in:&lt;br /&gt;
&lt;pre&gt;  def index&lt;br /&gt;
    @people = Person.find(:all)&lt;/p&gt;
respond_to do |format|
format.html
format.xml { render :xml =&amp;gt; @people.to_xml }
end
end&lt;/pre&gt;
&lt;p&gt;What that says is, &amp;#8220;if the client wants &lt;span class=&quot;caps&quot;&gt;HTML&lt;/span&gt; in response to this action, just respond as we would have before, but if the client wants &lt;span class=&quot;caps&quot;&gt;XML&lt;/span&gt;, return them the list of people in &lt;span class=&quot;caps&quot;&gt;XML&lt;/span&gt; format.&amp;#8221; (Rails determines the desired response format from the &lt;span class=&quot;caps&quot;&gt;HTTP&lt;/span&gt; Accept header submitted by the client.)&lt;/p&gt;
&lt;p&gt;Supposing you have an action that adds a new person, optionally creating their company (by name) if it does not already exist, without web-services, it might look like this:&lt;br /&gt;
&lt;pre&gt;  def create&lt;br /&gt;
    @company = Company.find_or_create_by_name(params[:company][:name])&lt;br /&gt;
    @person  = @company.people.create(params[:person])&lt;/p&gt;
redirect_to(person_list_url)
end&lt;/pre&gt;
&lt;p&gt;Here‘s the same action, with web-service support baked in:&lt;br /&gt;
&lt;pre&gt;  def create&lt;br /&gt;
    company  = params[:person].delete(:company)&lt;br /&gt;
    @company = Company.find_or_create_by_name(company[:name])&lt;br /&gt;
    @person  = @company.people.create(params[:person])&lt;/p&gt;
respond_to do |format|
format.html { redirect_to(person_list_url) }
format.js
format.xml  { render :xml =&amp;gt; @person.to_xml(:include =&amp;gt; @company) }
end
end&lt;/pre&gt;
&lt;p&gt;If the client wants &lt;span class=&quot;caps&quot;&gt;HTML&lt;/span&gt;, we just redirect them back to the person list. If they want Javascript (format.js), then it is an &lt;span class=&quot;caps&quot;&gt;RJS&lt;/span&gt; request and we render the &lt;span class=&quot;caps&quot;&gt;RJS&lt;/span&gt; template associated with this action. Lastly, if the client wants &lt;span class=&quot;caps&quot;&gt;XML&lt;/span&gt;, we render the created person as &lt;span class=&quot;caps&quot;&gt;XML&lt;/span&gt;, but with a twist: we also include the person‘s company in the rendered &lt;span class=&quot;caps&quot;&gt;XML&lt;/span&gt;, so you get something like this:&lt;br /&gt;
&lt;pre&gt;  &lt;person&gt;&lt;br /&gt;
    &lt;id&gt;gem&lt;/id&gt;&lt;br /&gt;
    gem&lt;br /&gt;
    &lt;company&gt;&lt;br /&gt;
      &lt;id&gt;gem&lt;/id&gt;&lt;br /&gt;
      &lt;name&gt;gem&lt;/name&gt;&lt;br /&gt;
      gem&lt;/p&gt;
&lt;/company&gt;
&lt;/person&gt;&lt;/pre&gt;
&lt;p&gt;Note, however, the extra bit at the top of that action:&lt;br /&gt;
&lt;pre&gt;  company  = params[:person].delete(:company)&lt;br /&gt;
  @company = Company.find_or_create_by_name(company[:name])&lt;/pre&gt;&lt;br /&gt;
This is because the incoming &lt;span class=&quot;caps&quot;&gt;XML&lt;/span&gt; document (if a web-service request is in process) can only contain a single root-node. So, we have to rearrange things so that the request looks like this (url-encoded):&lt;br /&gt;
&lt;pre&gt;  person[name]=gem&amp;amp;person[company][name]=gem&amp;amp;gem&lt;/pre&gt;&lt;br /&gt;
And, like this (xml-encoded):&lt;br /&gt;
&lt;pre&gt;  &lt;person&gt;&lt;br /&gt;
    &lt;name&gt;gem&lt;/name&gt;&lt;br /&gt;
    &lt;company&gt;&lt;br /&gt;
      &lt;name&gt;gem&lt;/name&gt;&lt;/p&gt;
&lt;/company&gt;
&lt;/person&gt;&lt;/pre&gt;
&lt;p&gt;In other words, we make the request so that it operates on a single entity‘s person. Then, in the action, we extract the company data from the request, find or create the company, and then create the new person with the remaining data.&lt;/p&gt;
&lt;p&gt;Note that you can define your own &lt;span class=&quot;caps&quot;&gt;XML&lt;/span&gt; parameter parser which would allow you to describe multiple entities in a single request (i.e., by wrapping them all in a single root node), but if you just go with the flow and accept Rails’ defaults, life will be much easier.&lt;/p&gt;
&lt;p&gt;If you need to use a &lt;span class=&quot;caps&quot;&gt;MIME&lt;/span&gt; type which isn‘t supported by default, you can register your own handlers in environment.rb as follows.&lt;br /&gt;
&lt;pre&gt;  Mime::Type.register &amp;#8220;image/jpg&amp;#8221;, :jpg&lt;/pre&gt;&lt;/p&gt;
&lt;/div&gt;</description>
                <link>http://liwei78.github.io/blog/rails-rdoc-respond_to</link>
                <guid>http://liwei78.github.io/blog/rails-rdoc-respond_to</guid>
                <pubDate>2008-12-30T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>开发笔记：rails分页和acts_as_taggable插件的应用[重发]</title>
                <description>&lt;hr /&gt;
&lt;p&gt;最近一个月在忙于开发项目，所以没有更新博客。不过开发中还是学到不少东西。&lt;/p&gt;
&lt;p&gt;对于一个程序员，阅读是相当有帮助的，读别人的博客，读源码，读经验文章 ，即便读别人的开发代码，都是有帮助的。&lt;/p&gt;
&lt;p&gt;本次开发的初始，就是在读别人的开发代码，然后一点点找到思路，继续在原有基础上加强功能。由于上一个版本的代码写的相当有水准，所以对自己的开发也提高不少。&lt;/p&gt;
&lt;p&gt;本次开发的项目是一个在线视频教学系统。开发中用到了曾经写过的分页代码和一个rails插件：acts_as_taggable。&lt;/p&gt;
&lt;p&gt;下面对这两个部分进行总结。&lt;br /&gt;
h3. 一、分页&lt;/p&gt;
&lt;p&gt;下面的程序在3个项目上使用过。&lt;br /&gt;
models/page.rb&lt;br /&gt;
bq. &lt;br /&gt;
&lt;pre lang=&quot;ruby&quot;&gt;class Page&lt;br /&gt;
  attr_accessor :pages #分页连接列表，[]类型&lt;br /&gt;
  attr_accessor :cur #当前页&lt;br /&gt;
end&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;helpers/application_helper.rb&lt;br /&gt;
bq. &lt;br /&gt;
&lt;pre lang=&quot;ruby&quot;&gt;  def howtopage_links(pagecls=nil) #在页面输出分页连接，pagecls:分页实例&lt;br /&gt;
    if pagecls&lt;br /&gt;
      return pagecls.pages.collect {|t|&lt;br /&gt;
      [if t.to_s == pagecls.cur&lt;br /&gt;
        &amp;#8220;&amp;#8221;now&amp;quot; href=&amp;#8220;http://railser.cn/wp-admin/?page=#%7Bt.to_s%7D&amp;#8221;&amp;gt;&amp;quot;+(t.to_s)&lt;ins&gt;&amp;#8220;&lt;/a&gt;&amp;#8221;&lt;br /&gt;
      else&lt;br /&gt;
        &amp;#8220;&amp;#8221;http://railser.cn/wp-admin/?page=#%7Bt.to_s%7D&amp;quot;&amp;gt;&amp;quot;&lt;/ins&gt;(t.to_s)+&amp;quot;&lt;/a&gt;&amp;quot;&lt;br /&gt;
      end]&lt;br /&gt;
      }&lt;br /&gt;
    end&lt;br /&gt;
  end&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;controllers/application.rb&lt;br /&gt;
bq. &lt;br /&gt;
&lt;pre lang=&quot;ruby&quot;&gt;  def howtopage(totalcount=0, per_page=6)&lt;br /&gt;
    cur_page = params[:page] || 1 #直接从页面取得page变量&lt;br /&gt;
    x = (cur_page.to_i &amp;#8211; 1) * per_page&lt;br /&gt;
    pagecount = totalcount / per_page&lt;br /&gt;
    if totalcount % per_page != 0&lt;br /&gt;
      pagecount += 1&lt;br /&gt;
    end&lt;br /&gt;
    page = Page.new&lt;br /&gt;
    page.pages = (1..pagecount).collect&lt;br /&gt;
    page.cur = params[:page] || &amp;#8220;1&amp;#8221;&lt;br /&gt;
    return page, x #page为一个包装的分页类，x为find方法的偏移量&lt;br /&gt;
  end&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;在一个notebook_controller.rb中&lt;br /&gt;
bq. &lt;br /&gt;
&lt;pre lang=&quot;ruby&quot;&gt;&lt;code&gt;notes_count = Notebook.count(:conditions=&amp;gt;['user_id = ?', params['user_id']])
per_page = 6 #每页记录数
@page, x = howtopage(&lt;/code&gt;notes_count, per_page)&lt;br /&gt;
@notes = Notebook.find(:all, :conditions=&amp;gt;[&amp;#8216;user_id = ?&amp;#8217;, params[&amp;#8216;user_id&amp;#8217;]],&lt;br /&gt;
 :order=&amp;gt;&amp;quot;id desc&amp;quot;, :offset=&amp;gt;x, :limit=&amp;gt;per_page)&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;在对应的页面中&lt;br /&gt;
bq. &lt;br /&gt;
&lt;pre lang=&quot;ruby&quot;&gt;&amp;lt; %=howtopage_links(@page)%&amp;gt;&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;这段方法有很多可以改进的地方，但是能用就好。&lt;br /&gt;
不过这个分页绝对算是ruby和rails入门的练习，如果想使用更专业的分页，还是推荐will_paginate插件。可以通过下面的方法安装：&lt;br /&gt;
script/plugin install svn://errtheblog.com/svn/plugins/will_paginate&lt;br /&gt;
介绍页面：&lt;a href=&quot;http://errtheblog.com/posts/56-im-paginating-again&quot;&gt;http://errtheblog.com/posts/56-im-paginating-again&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;08年12月19日补充：&lt;/p&gt;
&lt;p&gt;这篇博客是去年12月2日写的，一年的时间足够改变世界了。现在这个插件的地址在：http://github.com/mislav/will_paginate/tree/master&lt;br /&gt;
h3. 二、acts_as_taggable&lt;/p&gt;
&lt;p&gt;虽然标题写的是acts_as_taggable，但是首先要说明，我用的是acts_as_taggable_on_steroids，可以通过下面的方法进行安装：&lt;br /&gt;
ruby script/plugin install&lt;br /&gt;
http://svn.viney.net.nz/things/rails/plugins/acts_as_taggable_on_steroids&lt;br /&gt;
bq. 注意不同之处：&lt;br /&gt;
在&lt;a href=&quot;http://www.slashdotdash.net/articles/2006/04/29/acts_as_taggable-per-user-tagging&quot;&gt; acts_as_taggable per user tagging&lt;/a&gt;篇提到：also an acts_as_taggable的gem安装和plugin安装结果是不一样的. acts_as_taggable的plugin仅适用与Rails 1.1.&lt;br /&gt;
里克：其实上面写这句话的人是针对不同版本的，仅供参考。&lt;/p&gt;
&lt;p&gt;所以，选择哪个tag插件，需要注意下。不同的插件使用的方法是不一样的。DDH的acts_as_taggable&lt;a href=&quot;http://taggable.rubyforge.org/&quot;&gt;文档&lt;/a&gt;是关于那个插件的，它可以通过&lt;br /&gt;
svn co http://dev.rubyonrails.com/svn/rails/plugins/legacy/acts_as_taggable/ acts_as_taggable&lt;br /&gt;
获得。目前看也仅能从这里获得。&lt;br /&gt;
非常详细的适用方法请看&lt;a href=&quot;http://agilewebdevelopment.com/plugins/acts_as_taggable_on_steroids&quot;&gt;Plugins &amp;#8211; Acts As Taggable On Steroids&lt;/a&gt;&lt;br /&gt;
h3. 其他Rails插件&lt;/p&gt;
&lt;p&gt;本部分被转移到 &lt;a href=&quot;http://railser.cn/archives/mephistoblog-vender-and-plugins&quot;&gt;MephistoBlog使用的插件和第三方代码介绍&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;参考资料：&lt;br /&gt;
&lt;a href=&quot;http://taggable.rubyforge.org/&quot;&gt;RDoc&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://wiki.rubyonrails.org/rails/pages/Acts+As+Taggable+Plugin&quot;&gt;Acts As Taggable Plugin&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://wiki.rubyonrails.org/rails/pages/ActsAsTaggablePluginHowto&quot;&gt;ActsAsTaggablePluginHowto&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://agilewebdevelopment.com/plugins/acts_as_taggable_on_steroids&quot;&gt;Plugins &amp;#8211; Acts As Taggable On Steroids&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.slashdotdash.net/articles/2006/04/29/acts_as_taggable-per-user-tagging&quot;&gt; 为每个用户曾加tag功能[acts_as_taggable per user tagging]&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://baike.baidu.com/view/15482.htm&quot;&gt;&lt;span class=&quot;caps&quot;&gt;ASCII&lt;/span&gt;&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://rubylib.cn/&quot;&gt;Ruby Lib中文站&lt;/a&gt;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/development-log-rails-pagnate-and-acts-as-taggable</link>
                <guid>http://liwei78.github.io/blog/development-log-rails-pagnate-and-acts-as-taggable</guid>
                <pubDate>2008-12-18T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>Rails中基于属性的动态查询</title>
                <description>&lt;hr /&gt;
&lt;p&gt;这是个很简单的Rails2.1.2的 find 的应用，来自Rdoc ActiveRecord::Base&lt;/p&gt;
&lt;p&gt;一、find :first 和find :all&lt;/p&gt;
&lt;p&gt;使用 Model.&lt;span style=&quot;color: #ff0000;&quot;&gt;find&lt;/span&gt;&lt;em&gt;by_user_name ，来简写 Model.find(:first, :conditions=&amp;gt;[&amp;#8220;user_name=?&amp;#8221;,user&lt;/em&gt;name])&lt;/p&gt;
&lt;p&gt;使用 Model.&lt;span style=&quot;color: #ff0000;&quot;&gt;find_all&lt;/span&gt;&lt;em&gt;by_user_name ，来简写 Model.find(:all, :conditions=&amp;gt;[&amp;#8220;user_name=?&amp;#8221;,user&lt;/em&gt;name])&lt;/p&gt;
&lt;p&gt;这里也可以使用and，比如典型的用户名和密码查询：Person.find_by_user_name_and_password(user_name, password)&lt;/p&gt;
&lt;p&gt;find也支持带参数的查询，比如Payment.find_all_by_amount(50, :order =&amp;gt; &amp;#8220;created_on&amp;#8221;)&lt;/p&gt;
&lt;p&gt;二、&lt;span style=&quot;font-family: Courier New;&quot;&gt;find_or_create_by_和find_or_initialize_&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style=&quot;font-family: Courier New;&quot;&gt;find_or_create_by_：当查询的内容不存在时，&lt;span style=&quot;color: #0000ff;&quot;&gt;创建并保存&lt;/span&gt;该记录&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style=&quot;font-family: Courier New;&quot;&gt;find_or_initialize_：更上面的相似，只是&lt;span style=&quot;color: #0000ff;&quot;&gt;创建不保存&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;该记录，需要自己再次save&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span style=&quot;font-family: Courier New;&quot;&gt;这里也支持参数和代码块，如&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;User.find_or_create_by_name(&amp;#8216;Bob&amp;#8217;, :age =&amp;gt; 40) { |u| u.admin = true }&lt;/p&gt;
&lt;p&gt;三、find_by_的时候，支持多属性，如&lt;/p&gt;
&lt;p&gt;Tag.find_or_create_by_name(:name =&amp;gt; &amp;#8220;rails&amp;#8221;, :creator =&amp;gt; current_user)&lt;/p&gt;
&lt;p&gt;以上文字来自Rails2.1.2的Rdoc文档ActiveRecord::Base&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/dynamic-attribute-based-finders</link>
                <guid>http://liwei78.github.io/blog/dynamic-attribute-based-finders</guid>
                <pubDate>2008-12-07T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>TextMate的HTML快捷键</title>
                <description>&lt;hr /&gt;
&lt;ul&gt;
	&lt;li&gt;选中文字后按 appli ＋ I 是 em&lt;/li&gt;
	&lt;li&gt;选中文字后按 appli ＋ B 是 strong&lt;/li&gt;
	&lt;li&gt;选中一行文字后按 shift ＋ctrl ＋W 是用一对标签包裹它 &lt;/li&gt;
	&lt;li&gt;选中一行文字后按 ctrl ＋ apple＋H 是用 h* 标签包裹它&lt;/li&gt;
	&lt;li&gt;选中文字后按 ctrl ＋ apple＋B 是用块标签包裹它&lt;/li&gt;
	&lt;li&gt;选中多行文字后按 shift ＋ctrl ＋ apple＋W 是用一组标签包裹各行&lt;/li&gt;
	&lt;li&gt;选中多行文字后按 ctrl ＋ apple＋L 是用列表标签包裹各行&lt;/li&gt;
	&lt;li&gt;插入一对标签 ctrl + &amp;lt; &lt;/li&gt;
	&lt;li&gt;插入一个结尾标签 Option ＋ apple + .&lt;/li&gt;
	&lt;li&gt;apple + &amp;amp; 进行URL编码&lt;/li&gt;
	&lt;li&gt;ctrl + H 帮助文件&lt;/li&gt;
	&lt;li&gt;shift + ctrl + V 校验W3C规范&lt;/li&gt;
	&lt;li&gt;option + &lt;span class=&quot;caps&quot;&gt;ESC&lt;/span&gt; 自动补完html标签和属性&lt;/li&gt;
&lt;/ul&gt;</description>
                <link>http://liwei78.github.io/blog/textmate-html</link>
                <guid>http://liwei78.github.io/blog/textmate-html</guid>
                <pubDate>2008-12-02T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>随便写写</title>
                <description>&lt;hr /&gt;
&lt;p&gt;刚才看了gmail里发来的&lt;a href=&quot;http://www.infoq.com/cn/news/2008/11/Database-Martin-Fowler&quot; target=&quot;_blank&quot;&gt;一篇文章&lt;/a&gt;，引用一句话&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;应用开发者都应该思考到底哪种选择才是最符合其需要的&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;08年11月即将过去了&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/2008-11-30</link>
                <guid>http://liwei78.github.io/blog/2008-11-30</guid>
                <pubDate>2008-11-30T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>重读AWDWR笔记</title>
                <description>&lt;hr /&gt;
&lt;p&gt;&lt;strong&gt;加载路径&lt;/strong&gt;&lt;br /&gt;
标准的环境配置回自动将下列目录纳入应用程序的加载路径。&lt;br /&gt;
&lt;ul&gt;&lt;br /&gt;
	&lt;li&gt;test/mocks/environment 由于该目录位于加载路径的第一位，在这里定义的类回自动覆盖真正的实现类，这样你就可以在测试阶段使用这些替代品。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;app/controllers 目录及其子目录。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;app/models 和 components 目录下所有以下划线或者小写字母开头的目录。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;app, app/models, app/controllers, app/helps, app/services, app/apis, components, config, lib 以及 vendor 目录&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;检查 vendor/rails 目录，如果存在就从这里加载 Rails 库。&lt;/li&gt;&lt;/p&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;命名约定&lt;/strong&gt;&lt;br /&gt;
&lt;ul&gt;&lt;br /&gt;
	&lt;li&gt;变量名全部小写，单词之间以下划线分割。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;类和模块的名称没有下划线，短语中每个单词的首字母大写。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;表应该像变量一样，采用小写字母，并且是复数形式。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;文件名全部小写，以下划线分割。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;controller 用名词，action 用动词。当你创建了一个 action 的名字是 动词_名词 这样的格式，那么有必要再创建一个新的controller了 。&lt;/li&gt;&lt;/p&gt;
&lt;/ul&gt;</description>
                <link>http://liwei78.github.io/blog/awdwr-4</link>
                <guid>http://liwei78.github.io/blog/awdwr-4</guid>
                <pubDate>2008-11-29T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>重读AWDWR笔记</title>
                <description>&lt;hr /&gt;
&lt;p&gt;第9章&lt;br /&gt;
&lt;ul&gt;&lt;br /&gt;
	&lt;li&gt;使用局部模板。&lt;/li&gt;&lt;/p&gt;
&lt;/ul&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;
render :partial =&amp;gt; &quot;cart&quot;, :object =&amp;gt; @cart
render :partial =&amp;gt; &quot;cart_item&quot;, :collection =&amp;gt; @cart.items
&lt;/pre&gt;
&lt;ul&gt;
	&lt;li&gt;辅助方法的一个示例。&lt;/li&gt;
&lt;/ul&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;
# app/views/layout/stroe.rhtml
&amp;lt;%= hidden_div_if(@cart.items.empty?, :id =&amp;gt; &quot;cart&quot;) %&amp;gt;
  &amp;lt;%= render :partial =&amp;gt; &quot;cart&quot;, :object =&amp;gt; @cart %&amp;gt;
&amp;lt;div&amp;gt;

# app/controllers/store_controller.rb
def hidden_div_if(condition, attributes = {})
  if condition
    attributes[&quot;style&quot;] = &quot;display: none;&quot;
  end
  attrs = tag_options(attributes.stringify_keys)
  &quot;&amp;lt;div #{attrs}&amp;gt;&quot;
end
&lt;/pre&gt;
&lt;p&gt;第10章&lt;br /&gt;
&lt;ul&gt;&lt;br /&gt;
	&lt;li&gt;validates_inclusion_of 方法验证某属性，在指定的列表中存在。防止别人构造不存在的支付方法逃避支付。&lt;/li&gt;&lt;/p&gt;
&lt;/ul&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;
PAYMENT_TYPES = [
    [&quot;Check&quot;, &quot;check&quot;],
    [&quot;Credit Card&quot;, &quot;cc&quot;],
    [&quot;Purchase Order&quot;, &quot;po&quot;]
  ]

validates_inclusion_of :pay_type, :in =&amp;gt; PAYMENT_TYPES.map {|disp, value| value}
&lt;/pre&gt;
&lt;ul&gt;
	&lt;li&gt;一个向 Order 中填充 Cart 里面订购项目的过程。&lt;/li&gt;
&lt;/ul&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;
# app/controller/stroe_controller.rb
def save_order
  @cart = find_cart
  @order = Order.new(params[:order])
  @order.add_line_items_from_cart(@cart)
  if @order.save
    session[:cart] = nil
    redirect_to_index(&quot;Thank you for your order&quot;)
  else
    render :action =&amp;gt; :checkout
  end
end

# app/models/order.rb
def add_line_items_from_cart(cart)
  cart.items.each do |item|
    li = LineItem.from_cart_item(item)
    line_items &amp;lt;&amp;lt; li
  end
end

# app/models/line_item.rb
def self.from_cart_item(cart_item)
  li = self.new
  li.product = cart_item.product
  li.quantity = cart_item.quantity
  li.total_price = cart_item.price
  li
end
&lt;/pre&gt;</description>
                <link>http://liwei78.github.io/blog/awdwr-3</link>
                <guid>http://liwei78.github.io/blog/awdwr-3</guid>
                <pubDate>2008-11-29T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>重读AWDWR笔记</title>
                <description>&lt;hr /&gt;
&lt;p&gt;第12章&lt;br /&gt;
&lt;ul&gt;&lt;br /&gt;
	&lt;li&gt;使用 :through 声明，可以通过间接关联来联系两张表。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;可以使用 curl 或者 wget 工具来模拟请求xml。&lt;/li&gt;&lt;/p&gt;
&lt;/ul&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;
class Product &amp;lt; ActiveRecord::Base
  has_many :orders, :through =&amp;gt; :line_items
end

class Order &amp;lt; ActiveRecord::Base
  has_many :line_itemss
end

class LineItem &amp;lt; ActiveRecord::Base
  belongs_to :orders
  belongs_to :product
end
&lt;/pre&gt;

&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;
curl http://localhost:3000/info/who_bought/1
&lt;/pre&gt;
&lt;p&gt;第11章&lt;br /&gt;
&lt;ul&gt;&lt;br /&gt;
	&lt;li&gt;after_destroy 钩子方法于 delete 同在一个事务中，因此只要该方法里抛出异常，整个事务会回滚。after_destroy 会在 delete 语句执行之后被调用。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;这里关键概念是，用异常来表示删除用户的过程中出现了错误。这里的异常同时承担两个任务。首先，在事务内部，异常会导致自动回滚；如果在删除用户之后 user 表为空，抛出异常可以撤销删除操作，恢复最后一个用户。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;其次，异常可以把错误信息带回给控制器。&lt;/li&gt;&lt;/p&gt;
&lt;/ul&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;
# app/model/user.rb
def after_destroy
  if User.count.zero?
    raise &quot;Can't delete last user.&quot;
  end
end

# app/controllers/login_controller.rb
def delete_user
  if request.post?
    user = User.find(params[:id])
    begin
      use.destroy
      flash[:notice] = &quot;User #{user.name} deleted&quot;
    rescue Exception =&amp;gt; e
      flash[:notice] = e.message
    end
  end
  redirect_to :action =&amp;gt; :list_users
end
&lt;/pre&gt;
&lt;ul&gt;
	&lt;li&gt;before_filter 前置过滤器进行访问控制。&lt;/li&gt;
	&lt;li&gt;利用 session 存储登录前的 uri 做出更有友好的登录系统。&lt;/li&gt;
&lt;/ul&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;
# app/controllers/application.rb
private

def authorize
  unless User.find_by_id(session[:user_id])
    session[:original_uri] = request.request_uri
    flash[:notice] = &quot;Please log in.&quot;
    redirect_to :action =&amp;gt; :login, :controller =&amp;gt; :login
  end
end

# app/controllers/login_controller.rb
before_filter :authorize, :except =&amp;gt; :login
&lt;/pre&gt;
&lt;ul&gt;
	&lt;li&gt;登录的一个典型做法。&lt;/li&gt;
&lt;/ul&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;
# app/controllers/login_controller.rb
def login
  session[:user_id] = nil
  if request.post?
    user = User.authenticate(params[:name], params[:password])
    if user
      session[:user_id] = user.id
      redirect_to :action =&amp;gt; :index
    else
      flash[:notice] = &quot;Invalid user/password combination&quot;
    end
  end
end
&lt;/pre&gt;
&lt;ul&gt;
	&lt;li&gt;看一下完整的 user model。&lt;/li&gt;
&lt;/ul&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;
# app/models/user.rb
require &quot;digest/sha1&quot;

class User &amp;lt; ActiveRecord::Base
  validates_presence_of :name
  validates_uniqueness_of :name

  attr_accessor :password_confirmation
  validates_confirmation_of :password

  def validate
    errors.add_to_base(&quot;Missing password&quot;) if hashed_password.blank?
  end

  def self.authenticate(name, password)
    user = self.find_by_name(name)
    if user
      expected_password = encrypted_password(password, user.salt)
      if user.hashed_password != expected_password
        user = nil
      end
    end
  end

  # 'password' is a virtual attribute
  def password
    @password
  end

  def password =(pwd)
    @password = pwd
    return if pwd.blank?
    create_new_salt
    self.hashed_password = User.encrypted_password(self.password, self.salt)
  end

  private

  def self.encrypted_password(password, salt)
    string_to_hash = password + &quot;wibble&quot; + salt
    Digest::SHA1.hexdigest(string_to_hash)
  end

  def create_new_salt
    self.salt = self.object_id.to_s + rand.to_s
  end
end
&lt;/pre&gt;</description>
                <link>http://liwei78.github.io/blog/awdwr-2</link>
                <guid>http://liwei78.github.io/blog/awdwr-2</guid>
                <pubDate>2008-11-29T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>在windows和netbeans6.5上，准备Rspce开发</title>
                <description>&lt;hr /&gt;
&lt;p&gt;一、环境&lt;/p&gt;
&lt;p&gt;ruby -v&lt;/p&gt;
&lt;p&gt;&amp;gt;&amp;gt; ruby 1.8.6 (2007-09-24 patchlevel 111) [i386-mswin32]&lt;/p&gt;
&lt;p&gt;rails -v&lt;/p&gt;
&lt;p&gt;&amp;gt;&amp;gt; Rails 2.1.2&lt;/p&gt;
&lt;p&gt;二、需要安装的gem和plugin&lt;/p&gt;
&lt;p&gt;gem install ZenTest&lt;/p&gt;
&lt;p&gt;因为我的Rails是2.1.2，所以在安装plugin时，用了下面的方法：&lt;br /&gt;
&lt;pre&gt;ruby script/plugin install git://github.com/dchelimsky/rspec.git&lt;br /&gt;
ruby script/plugin install git://github.com/dchelimsky/rspec-rails.git&lt;br /&gt;
ruby script/generate rspec&lt;/pre&gt;&lt;br /&gt;
另外还有一些辅助的工具，不在此详述&lt;/p&gt;
&lt;p&gt;三、出现的问题&lt;/p&gt;
&lt;p&gt;1、netbeans加载autotest时候的环境变量&lt;/p&gt;
&lt;p&gt;解决：在系统环境中，需要加入home=当前项目的根文件夹，这样nb就能正常启用autotest了&lt;/p&gt;
&lt;p&gt;2、restful_authentication的rspec时，出现mysql的Mysql::Error: Incorrect datetime value错误&lt;/p&gt;
&lt;p&gt;mysql配置文件my.ini中，注释掉 sql-mode=&amp;#8220;STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&amp;#8221; 一行（我的在87行）&lt;/p&gt;
&lt;p&gt;下面添加一行：sql-mode=&amp;quot;&amp;quot;&lt;/p&gt;
&lt;p&gt;重启mysql&lt;/p&gt;
&lt;p&gt;四：参考文章&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://wiki.netbeans.org/RubyTesting&quot;&gt;RubyTesting&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://guides.rubyonrails.org/creating_plugins.html&quot;&gt;The Basics of Creating Rails Plugins，创建Rails插件的基础教程&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;RSpec的很重要的中文文档：&lt;br /&gt;
&lt;a href=&quot;http://www.letrails.cn/archives/20&quot; target=&quot;_blank&quot;&gt;http://www.letrails.cn/archives/20&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.letrails.cn/archives/advanced-rspec-tutorials-rspec-scaffold&quot; target=&quot;_blank&quot;&gt;http://www.letrails.cn/archives/advanced-rspec-tutorials-rspec-scaffold&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.letrails.cn/archives/11-02-advanced-rspec-tutorials-basics&quot; target=&quot;_blank&quot;&gt;http://www.letrails.cn/archives/11-02-advanced-rspec-tutorials-basics&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.letrails.cn/archives/11-07-advanced-rspec-tutorials-mocking&quot; target=&quot;_blank&quot;&gt;http://www.letrails.cn/archives/11-07-advanced-rspec-tutorials-mocking&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;《The Rails Way》第18章：Rspec on Rails&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://dirk.net/2008/01/30/autotest-rails-on-windows/&quot;&gt;Autotest Rails on Windows&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这里提到的 set home=. 方法，是在cmd环境下可以，集成到netbeans中，还得用上面 三（1） 里的方法。（ps：blogspot又打不开了？）&lt;/p&gt;
&lt;p&gt;好了，上面只是一篇准备开发Rspec on Rails 时候的笔记，更多的内容还会以笔记形式更新。&lt;/p&gt;
&lt;p&gt;新站广告：一汽家园，一汽的生活圈 &lt;a href=&quot;http://www.17jiayuan.com&quot;&gt;www.17jiayuan.com&lt;/a&gt; ，租房，在线游戏，二手交易，一汽交友圈。&lt;/p&gt;
&lt;p&gt;目前状况：正在开发一个Rails项目，没想到和邀请我开发的人想法碰到一起，所以很高兴开发这个项目。项目的主旨是松耦合，高复用。这种程度到了应用的开发也要符合这个要求，这和研究半年多uchome得到的想法很一致。不多说了，等项目上线后，再整理心得吧。&lt;/p&gt;
&lt;p&gt;由于个人原因耽误了些进度，在此表示歉意。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://drupal.org/project/userpoints&quot;&gt;User Points&lt;/a&gt;，值得参考。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/rspec-on-windows-and-netbeans65</link>
                <guid>http://liwei78.github.io/blog/rspec-on-windows-and-netbeans65</guid>
                <pubDate>2008-11-28T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>带着restful_authentication运行rspec时，貌似cookies无效的问题</title>
                <description>&lt;hr /&gt;
&lt;p&gt;起因：在未做自己开发rspec的时候，只是调试下安装完 restful_authentication 的rspec和部分test时候，出现了几个错误：&lt;/p&gt;
&lt;p&gt;1、&lt;/p&gt;
&lt;p&gt;Spec::Mocks::MockExpectationError in &amp;#8216;SessionsController Logging in by cookie fails cookie login with bad cookie&amp;#8217;&lt;br /&gt;
fails cookie login with bad cookie(Spec::Rails::Example::ControllerExampleGroup::Subclass_1::Subclass_4) expected :cookies with (any args) once, but received it 0 times&lt;br /&gt;
./spec/controllers/authenticated_system_spec.rb:85:&lt;/p&gt;
&lt;p&gt;2、&lt;/p&gt;
&lt;p&gt;&amp;#8216;SessionsController Logging in by cookie logs in with cookie&amp;#8217; &lt;span class=&quot;caps&quot;&gt;FAILED&lt;/span&gt;&lt;br /&gt;
expected true, got false&lt;br /&gt;
./spec/controllers/authenticated_system_spec.rb:81:&lt;/p&gt;
&lt;p&gt;3、&lt;/p&gt;
&lt;p&gt;&amp;#8216;AccessControlTestController requesting xml; I am logged in and Login is required succeeds&amp;#8217; &lt;span class=&quot;caps&quot;&gt;FAILED&lt;/span&gt;&lt;br /&gt;
expected &amp;#8220;&amp;lt;?xml version=\&amp;#8221;1.0\&amp;quot; encoding=\&amp;#8220;&lt;span class=&quot;caps&quot;&gt;UTF&lt;/span&gt;-8\&amp;#8221;?&amp;gt;\n&lt;hash&gt;\n  &lt;success&gt;xml&lt;/success&gt;\n&lt;/hash&gt;\n&amp;quot;, got &amp;#8220;&lt;span class=&quot;caps&quot;&gt;HTTP&lt;/span&gt; Basic: Access denied.\n&amp;#8221;&lt;br /&gt;
./spec/controllers/access_control_spec.rb:65:&lt;/p&gt;
&lt;p&gt;这是为什么呢？&lt;/p&gt;
&lt;p&gt;经过N个小时的思考和google，还是没有发现问题，但是刚才检查 logged_in?.should be_true 一句时，发现我在application_helper.rb里 竟然定义了个同名的方法。就是这个同名方法，搞乱了正常的测试结果。so，改名后，一切都正常了。&lt;/p&gt;
&lt;p&gt;经验：1、学习和使用TDD开发还是需要时间的，2、下次应该不会犯了吧。。。。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/restful_authentication-rspec-fails</link>
                <guid>http://liwei78.github.io/blog/restful_authentication-rspec-fails</guid>
                <pubDate>2008-11-28T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>重读AWDWR笔记</title>
                <description>&lt;hr /&gt;
&lt;p&gt;感恩节放假，抓紧时间重读一下AWDWR把一些知识点记录如下。&lt;br /&gt;
第6章&lt;br /&gt;
&lt;ul&gt;&lt;br /&gt;
	&lt;li&gt;迁移习惯 create 来创建表，add 给现有表增加字段。你可以会看到 002_add_price.rb 的迁移。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;model 中验证方法设置为 protected 是因为该方法必须在特定的模型上下文中调用，不能在外部调用。&lt;/li&gt;&lt;/p&gt;
&lt;/ul&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;
protected
def validate
  errors.add(:price, &quot;should be at least 0.01&quot;) if price.nil? || price &amp;lt; 0.01
end
&lt;/pre&gt;
&lt;ul&gt;
	&lt;li&gt;errors.add() 方法第一个参数是字段名称，第二个参数是出错信息的正文。&lt;/li&gt;
	&lt;li&gt;在将价格和 0.01 比较之前，先检查它是不是 nil。试图将 nil 和数字比较会引发异常。&lt;/li&gt;
	&lt;li&gt;下面代码演示了如何用正则表达式验证模型属性。&lt;/li&gt;
&lt;/ul&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;
validates_format_of :image_url,
  :with =&amp;gt; %r{\.(gif|jpg|png)$}i,
  :message =&amp;gt; &quot;must be a URL for a GIF, JPG, or PNG image&quot;
&lt;/pre&gt;
&lt;ul&gt;
	&lt;li&gt;cycle 交替的设置两个属性。&lt;/li&gt;
	&lt;li&gt;h() 方法用于对内容进行格式化，去除其中的 HTML。&lt;/li&gt;
	&lt;li&gt;link_to 方法后面的 :confirm =&amp;gt;&amp;quot;Are you sure?&amp;quot;。&lt;/li&gt;
	&lt;li&gt;stylesheet_link_tag&lt;/li&gt;
	&lt;li&gt;关于渲染表格的方法。&lt;/li&gt;
&lt;/ul&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;
&amp;lt;table&amp;gt;
	&amp;lt;tr&amp;gt;
	&amp;lt;% for column in Product.content_columns %&amp;gt;
		&amp;lt;th&amp;amp;gt&amp;lt;%= column.hunman_name %&amp;gt;&amp;lt;/th&amp;gt;
	&amp;lt;% end %&amp;gt;
	&amp;lt;/tr&amp;gt;
	&amp;lt;tr&amp;gt;
	&amp;lt;% for column in Product.content_columns %&amp;gt;
		&amp;lt;td&amp;amp;gt&amp;lt;%= h product.send(column.name) %&amp;gt;&amp;lt;/td&amp;gt;
	&amp;lt;% end %&amp;gt;
	&amp;lt;/tr&amp;gt;
&amp;lt;/table&amp;gt;
&lt;/pre&gt;
&lt;p&gt;第7章&lt;br /&gt;
&lt;ul&gt;&lt;br /&gt;
	&lt;li&gt;number_to_currency(product.price) 格式化价格的方法。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;如何使用类方法。&lt;/li&gt;&lt;/p&gt;
&lt;/ul&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;
class StoreController &amp;lt; ApplicationController
  def inde
    @products = Product.find_products_sale
  end
end

class Product &amp;lt; ActiveRecord:Base
  def self.find_products_sale
    find(:all, :order =&amp;gt; &quot;title&quot;)
  end
end
&lt;/pre&gt;
&lt;p&gt;第8章&lt;br /&gt;
&lt;ul&gt;&lt;br /&gt;
	&lt;li&gt;如何把 session 放在数据库中。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;在 session 中保存尽可能简单的东西：字符串，数字，等等。应用层面的对象应该放在数据库，然后把它们的主键放入 session，需要时根据 session 中的主键来查找对象。&lt;/li&gt;&lt;/p&gt;
&lt;/ul&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;
rake db:sessions:create
rake db:migrate
#environment.rb
config.action_controller.sesson_store = :active_recored_store
&lt;/pre&gt;
&lt;ul&gt;
	&lt;li&gt;下面是一段非常常见的购物代码。&lt;/li&gt;
	&lt;li&gt;注意下面的 controller 中演示了如何防止构造错误的传递参数。&lt;/li&gt;
&lt;/ul&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;
class StoreController &amp;lt; ApplicationController
  before_filter :find_cart, :except =&amp;gt; :empty_cart

  def index
    @products = Product.find_product_for_sale
  end

  def add_to_cart
    begin
      product = Product.find(params[:id])
    rescue ActiveRecord::RecordNotFound
      logger.error(&quot;Attempt to access invalid product #{params[:id]}.&quot;)
      redirect_to_index unless request.xhr?
    end
  end

  def empty_cart
    session[:cart] = nil
    redirect_to_index
  end

  def checkout
    if @cart.item.empty?
      redirect_to_index(&quot;Your cart is empty.&quot;)
    else
      @order = Order.new
    end
  end

  def save_order
    @order = Order.new(params[:order])
    @order.add_line_items_from_cart(@cart)
    if @order.save
      session[:cart] = nil
      redirect_to_index(&quot;Thank you for your order.&quot;)
    else
      render :action =&amp;gt; :checkout
    end
  end

  private

  def redirect_to_index(msg = nil)
    flash[:notice] = msg if msg
    redirect_to :action =&amp;gt; :index
  end

  def find_cart
    @cart = (session[:cart] ||= Cart.new)
  end
end

class Cart
  attr_reader :items

  def initialize
    @items = []
  end

  def add_product(product)
    current_item = @items.find {|item| item.product == product}
    if current_item
      current_item.increment_quantity
    else
      current_item = CartItem.new(product)
      @items &amp;lt;&amp;lt; current_item
    end
    current_item
  end

  def total_items
    @items.sum {|item| item.quantity}
  end

  def total_price
    @items.sum {|item| item.price}
  end
end

class CartItem
  attr_reader :product, :quantity

  def initialize(product)
    @product = product
    @quantity = 1
  end

  def increment_quantity
    @quantity += 1
  end

  def title
    @product.title
  end

  def price
    @product.price * @quantity
  end
end
&lt;/pre&gt;
&lt;ul&gt;
	&lt;li&gt;Mac 用户使用 Console.app，在 Application 的 Utilities 中，可以很方便的跟踪日志文件，只要使用 open 命令，并传入日志文件的名称即可。&lt;/li&gt;
&lt;/ul&gt;</description>
                <link>http://liwei78.github.io/blog/awdwr-1</link>
                <guid>http://liwei78.github.io/blog/awdwr-1</guid>
                <pubDate>2008-11-28T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>ruby for rails 摘录</title>
                <description>&lt;hr /&gt;
&lt;p&gt;if 关键字&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
if condition&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;code here, executed if condition evaluates to true.&lt;br /&gt;
end&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;if x &amp;gt; 100 then puts x end&lt;/p&gt;
&lt;p&gt;if x &amp;gt; 100; puts x end&lt;/p&gt;
&lt;p&gt;if condition&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;code executed if condition is true.&lt;br /&gt;
else&lt;/li&gt;
	&lt;li&gt;code executed if conditions is false.&lt;br /&gt;
end&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;if condition1&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;code executed if condition1 is true.&lt;br /&gt;
elsif condition2&lt;/li&gt;
	&lt;li&gt;code executed if condition2 is true.&lt;br /&gt;
elsif condition3&lt;/li&gt;
	&lt;li&gt;code executed if neither condition1&lt;/li&gt;
	&lt;li&gt;nor condition2 is true, but condition3 is true.&lt;br /&gt;
end&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;print &amp;quot;Enter a integer: &amp;quot;&lt;br /&gt;
n = gets.to_i&lt;br /&gt;
if n &amp;gt; 0&lt;br /&gt;
  puts &amp;#8220;Your number is positive.&amp;#8221;&lt;br /&gt;
elsif n &amp;lt; 0&lt;br /&gt;
  puts &amp;#8220;Your number is negative.&amp;#8221;&lt;br /&gt;
else&lt;br /&gt;
  puts &amp;#8220;Your number is zero.&amp;#8221;&lt;br /&gt;
end&lt;/p&gt;
&lt;p&gt;puts &amp;#8220;Big numbe!&amp;#8221; if x &amp;gt; 100&lt;br /&gt;
&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;unless&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
if not (x == 1)&lt;br /&gt;
if !(x == 1)&lt;br /&gt;
unless x == 1&lt;br /&gt;
&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;case 语句以一个表达式开始，然后处理列出得各种可能得匹配。每一个可能的匹配包含在一个 when 表达式中，该表达式由一个或多个可能的匹配和一段代码构成。&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
print &amp;quot;Exit the program? (yes or no): &amp;quot;&lt;br /&gt;
answer = gets.chomp&lt;br /&gt;
case answer&lt;br /&gt;
when &amp;#8220;yes&amp;#8221;, &amp;#8220;y&amp;#8221;&lt;br /&gt;
  puts &amp;#8220;Good-bye&amp;#8221;&lt;br /&gt;
  exit&lt;br /&gt;
when &amp;#8220;no&amp;#8221;, &amp;#8220;n&amp;#8221;&lt;br /&gt;
  puts &amp;#8220;OK, we&amp;#8217;ll continue&amp;#8221;&lt;br /&gt;
else&lt;br /&gt;
  puts &amp;#8220;That&amp;#8217;s an unknow answer &amp;#8212; assuming you meant &amp;#8216;no&amp;#8217;&amp;#8221;&lt;br /&gt;
end&lt;br /&gt;
&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;用 loop 方法实现无条件循环。loop 方法不带任何参数，但它可以带一个代码块。代码块包含想要循环执行的代码。代码块可以是大括号 {} 或者用关键字 do 和 end 。当然你也可以使用 break 来中断循环。或者使用 next 来跳到下一个循环。&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
n = 1&lt;br /&gt;
loop do&lt;br /&gt;
  n = n + 1&lt;br /&gt;
  if unless n == 7&lt;br /&gt;
  break if n &amp;gt; 9&lt;br /&gt;
end&lt;br /&gt;
&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;条件循环可以根据 while 和 until 实现。&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
n = 1&lt;br /&gt;
while n &amp;lt; 11&lt;br /&gt;
  puts n&lt;br /&gt;
  n = n + 1&lt;br /&gt;
end&lt;br /&gt;
puts &amp;#8220;Done!&amp;#8221;&lt;/p&gt;
&lt;p&gt;n = 1&lt;br /&gt;
begin&lt;br /&gt;
  puts n&lt;br /&gt;
  n = n + 1&lt;br /&gt;
end while n &amp;lt; 11&lt;br /&gt;
puts &amp;#8220;Done!&amp;#8221;&lt;/p&gt;
&lt;p&gt;n = 1&lt;br /&gt;
until n &amp;gt; 10&lt;br /&gt;
  puts n&lt;br /&gt;
  n = n + 1&lt;br /&gt;
end&lt;/p&gt;
&lt;p&gt;n = 1&lt;br /&gt;
n = n + 1 until n == 10&lt;br /&gt;
puts &amp;#8220;We&amp;#8217;ve reached 10!&amp;#8221;&lt;br /&gt;
&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;基于值列表的循环&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
celsius = [0, 10, 20, 30, 40, 50, 60, 70]&lt;br /&gt;
puts &amp;#8220;Celsius\tFahrenheit&amp;#8221;&lt;br /&gt;
for c in celsius&lt;br /&gt;
  puts &amp;#8220;c\t#{Temperature.c2f&amp;#169;}&amp;#8221;&lt;br /&gt;
end&lt;br /&gt;
&lt;/pre&gt;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/ruby-for-rails-5</link>
                <guid>http://liwei78.github.io/blog/ruby-for-rails-5</guid>
                <pubDate>2008-11-27T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>1.3.3 Continuations</title>
                <description>&lt;hr /&gt;
&lt;p&gt;Continuations 是一种非常强大的控制流机制。一个 Continuation 代表了调用栈和词法变量的特定状态。它是 Ruby 代码执行过程中特定点的一个快照。不幸的是，在 Ruby1.8 的实现中 Continuations 是如此的慢以至于对于许多的应用来说根本无法使用。在即将到来的 Ruby1.9 虚拟机中情况可能会有所改善，但最好不要期望在使用了 Ruby1.8 的 Continuation 的情况下能够获得好的性能。尽管如此，Continuations 仍然是非常有用的概念，基于 Continuations 的 web 框架提供了 Rails 的一些有趣的选择，因此在这里我们会对它们做一下考察。&lt;/p&gt;
&lt;p&gt;Continuations之所以非常强大有下面几个原因：&lt;br /&gt;
&lt;ul&gt;&lt;br /&gt;
	&lt;li&gt;Continuations其实就是一些对象；它们可以被传递在函数之间。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;可以从任何位置调用Continuations。只要持有对Continuation的引用，就可以对其进行调用。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;Continuations是可重入的。可以使用Continuations从一个函数多次返回。&lt;/li&gt;&lt;/p&gt;
&lt;/ul&gt;
&lt;p&gt;Continuations常常被描述为“结构化的GOTO“。因此，它们应该像任何类型的GOTO概念一样被谨慎的对待。在应用代码中不应该出现或者应该极少出现Continuations；它们通常应该被封装在库文件中。我不这么说是因为我认为开发人员应该被与它们隔离开来。&lt;/p&gt;
&lt;p&gt;Continuations是如此普遍的一个概念，以至于通常来说在其之上建立抽象比直接使用它更合理。程序员在构建应用软件的时候应考虑使用”外部迭代（external iterator）“或者”协同程序（coroutine）“（两个都是在Continuations之上的抽象）而不是”continuation“。&lt;/p&gt;
&lt;p&gt;SeaSide是一个基于Continuations的Smalltalk Web应用框架。Continuations 在SeaSide 中用于管理会话状态。每个用户的会话都对应一个服务器端的Continuation。当一个请求到达的时候Continuation将被调用而且更多的代码被执行。其结果是整个的事务能够被编写为单独的一段代码流，即使它们跨越了多个HTTP请求。这种能力是由于Smalltalk的Continuation能够被序列化；它们可以被写到一个数据库或者文件系统，然后被取出和反序列化，并在请求中重新调用。Ruby的Continuation不能被序列化。在Ruby中，Continuation只能被装载到内存中而不能被转换为一个字节流。&lt;/p&gt;
&lt;p&gt;Borges(http://borges.rubyforge.org/)是直接移植到Ruby的Seaside 2实现。SeaSide与Borges的最根本的区别就是Borges必须将所有当前的Continuations保存在内存中，因为它们不能被序列化。这个巨大的限制很不幸地阻止了Borges在任何规模的Web应用中被成功使用。只要Continuation在任何一种Ruby实现中被支持，这个限制就可以被克服了。&lt;/p&gt;
&lt;p&gt;Continuation的能力可以通过下面的Borges示例代码来见证，它用于渲染在线商店的一系列条目：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
class SushiNet::StoreItemList &amp;lt; Borges::Component&lt;br /&gt;
  def choose(item)&lt;br /&gt;
    call SushiNet::StoreItemView.new(item)&lt;br /&gt;
  end&lt;/p&gt;
def initialize(items)
@batcher = Borges::BatchedList.new items, 8
end
def render_content_on&amp;#174;
r.list_do @batcher.batch do |item|
r.anchor item.title do choose item end
end
r.render @batcher
end
&lt;p&gt;end # class SushiNet::StoreItemList&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
Action的功能render_content_on方法中完成，使用了BatchedList（一个分页器）来渲染一组分页的产品链接。有趣的地方在于anchor方法的调用，它存储了choose方法，当相应的链接被点击时调用。&lt;/p&gt;
&lt;p&gt;但是，关于Continuations在Web编程中有多大的用处仍然存在着很大争议，HTTP被设计为无状态的协议，使用Continuations来实现Web事务与无状态的想法正好相反。所有的Continuations都被存在服务器端，这需要占用额外的内存和硬盘空间。需要粘性会话（sticky session）来将一个用户始终导向同一台服务器。因此，如果一台服务器当机，它的所有会话都会丢失。最流行的基于Seaside的应用DabbleDB（http://dabbledb.com）事实上很少使用Continuations。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/133-continuations</link>
                <guid>http://liwei78.github.io/blog/133-continuations</guid>
                <pubDate>2008-11-27T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>ruby for rails 摘录</title>
                <description>&lt;hr /&gt;
&lt;p&gt;class, module, def 标志着切换到新的 self， main 是默认的 self 对象用来引用自己的专门术语。self 作为消息默认的接受者，如果消息接受者是 self ，可以省略接受者和圆点。&lt;/p&gt;
&lt;p&gt;如果存在同名的方法名和变量，而且你使用裸词标识符，那么变量具有优先权。要强制 Ruby 将标识符当作方法名，你必须使用 self.talk 或者用参数列表为空的 talk() 来调用方法。&lt;/p&gt;
&lt;p&gt;有一个场合，即使是发送消息给当前的 self，也必须使用完整的“对象 圆点 消息”记法，那就是在调用写方法的时候。因为 Ruby 总之将序列“裸词＝值”解释为对局部变量的赋值。为了调用当前对象的 venue= 方法，必须显示的给出 self。&lt;/p&gt;
&lt;p&gt;private 和 protected 的区别&lt;br /&gt;
私有方法意味着该方法不能使用显式的接收者来调用。Ruby 认为你想要发送消息给当前对象 self。所以仅当 self 是一个可以响应消息的对象时，该消息才有对象接收。那啥时候 self 才会是类的实例呢？当执行类的任何一个实例方法时。所以看如下代码&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
class Baker&lt;br /&gt;
  def bake_cake&lt;br /&gt;
    @batter = []&lt;br /&gt;
    pour_flour&lt;br /&gt;
    add_egg&lt;br /&gt;
    return Cake.new&lt;br /&gt;
  end&lt;/p&gt;
def pour_flour
@batter.push(Flour.new)
end
def add_egg
@batter.push(Egg.new)
end
private :pour_flour, :add_egg
&lt;p&gt;end&lt;br /&gt;
&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;总结，当 add_egg 标记为私有的，就是说Baker的实例对象可以将此消息发送给它自己，但是其它任何对象都不可以给该Baker实例对象发送该消息。Ruby 通过禁止对私有方法使用显示的接收者来获得此私有性。&lt;/p&gt;
&lt;p&gt;保护方法的规则是：只要默认对象 self 和你想要调用的方法所属的对象是同一个类的实例，你就可以调用该保护方法。如果某个对象调用其所属的保护方法，而该对象所属的类和self所属的类相同，那么该调用是合法的。&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
class C&lt;br /&gt;
  def initialize(n)&lt;br /&gt;
    @n = n&lt;br /&gt;
  end&lt;/p&gt;
def n
@n
end
def compare&amp;#169;
if c.n &amp;gt; n
puts &amp;#8220;The other object&amp;#8217;s n is bigger.&amp;#8221;
else
puts &amp;#8220;The other object&amp;#8217;s n is the same or smaller&amp;#8221;
end
end
protected :n
&lt;p&gt;end&lt;/p&gt;
&lt;p&gt;c1 = C.new(100)&lt;br /&gt;
c2 = C.new(201)&lt;br /&gt;
c1.compare(c2)&lt;br /&gt;
&lt;/pre&gt;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/ruby-for-rails-4</link>
                <guid>http://liwei78.github.io/blog/ruby-for-rails-4</guid>
                <pubDate>2008-11-17T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>ruby for rails 摘录</title>
                <description>&lt;hr /&gt;
&lt;p&gt;模块没有实例，模块被混含在类中。这样类的实例可以调用定义在模块中的实例方法。混含操作由 include 语句实现。require 或 load 时，加载的内容放在引号里。但是使用 include 时，不使用引号。&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
module Stacklike&lt;br /&gt;
  attr_reader :stack&lt;/p&gt;
def initialize
@stack = Array.new
end
def add_to_stack(obj)
@stack.push(obj)
end
def take_from_stack
@stack.pop
end
&lt;p&gt;end&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
require &amp;#8220;stacklike&amp;#8221;&lt;br /&gt;
class CargoHold&lt;br /&gt;
  include Stacklike&lt;/p&gt;
def load_and_report(obj)
pust obj.object_id
add_to_stack(obj)
end
def unload
take_from_stack
end
&lt;p&gt;end&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
使用名称作为类名，使用形容词作为模块的名。上面的例子演示了如何进一步发挥模块的作用。&lt;/p&gt;
&lt;p&gt;当给对象发送它不理解的消息的时候，会触发内建方法 method_missing 调用。&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
class Bicycle&lt;br /&gt;
  attr_reader :gears, :wheels, :seats&lt;/p&gt;
def initialize(gears = 1)
@wheels = 2
@seats = 1
@gears = gears
end
&lt;p&gt;end&lt;/p&gt;
&lt;p&gt;class Tandem &amp;lt; Bicycle&lt;br /&gt;
  def initialize(gears)&lt;br /&gt;
    super&lt;br /&gt;
    @seats = 2&lt;br /&gt;
  end&lt;br /&gt;
end&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
以super提升方法查找路径。以裸词的方式调用时，自动向前传递调用 super 的发给你发所获得的参数。这个是默认滴。用空参数表调用 super() 时，不给上一级方法传递任何参数，即使是当前方法的谙熟也不传递。用特定参数 super(a, b, c) 时，传递这些指定的参数。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/ruby-for-rails-3</link>
                <guid>http://liwei78.github.io/blog/ruby-for-rails-3</guid>
                <pubDate>2008-11-16T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>ruby for rails 摘录</title>
                <description>&lt;hr /&gt;
&lt;p&gt;实例变量使得单个对象可以记忆状态。实例变量的名字以@开头。实例变量仅仅对于它所属的对象来说是可见的。在一个特定类的某一方法中初始化的实例变量，与同一个类的其他方法定义中引用的同名实例变量是同一个。&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
class c&lt;br /&gt;
  def inst_var_init(value)&lt;br /&gt;
    puts &amp;#8220;Setting an instance variablegem&amp;#8221;&lt;br /&gt;
    @ivar = value&lt;br /&gt;
  end&lt;/p&gt;
def inst_var_report
puts &amp;#8220;Inspection the value of the instance variablegem&amp;#8221;
puts @ivar
end
&lt;p&gt;end&lt;br /&gt;
&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;初始化对象状态&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
class c&lt;br /&gt;
  def initialize(venue, date)&lt;br /&gt;
    @venue = venue&lt;br /&gt;
    @date = date&lt;br /&gt;
  end&lt;/p&gt;
def venue
@venue
end
def date
@date
end
&lt;p&gt;end&lt;br /&gt;
&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;=号方法和语法糖衣，Ruby允许定义以等号结束的方法。另外当解释器看到一个裸词后面有等号的时候。它会自动忽略等号前面的空格。从而得到一条单独的消息，例如 price= 。&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
class Ticket&lt;br /&gt;
  def price=(amount)&lt;br /&gt;
    @price = amount&lt;br /&gt;
  end&lt;/p&gt;
def price
@price
end
&lt;p&gt;end&lt;br /&gt;
&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;字符串内建的split方法的示例&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
month, day, year = date.split(&amp;#8216;/&amp;#8217;)&lt;br /&gt;
&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;ActiveRecord自动生成与数据库表的字段名相对应的设置方法。通过 params 方法，ActiveRecord 收集了所有属于 customer 的值， 并将它们成批地传递到新生成的 Customer 对象中。&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
customer = Customer.new(params[:customer])&lt;br /&gt;
&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;自动生成属性方法，attr_accessor, attr_reader, attr_writer&lt;/p&gt;
&lt;p&gt;常量的名字是以一个大写字母开头。可以在类外引用常量，Ticker::&lt;span class=&quot;caps&quot;&gt;VENUES&lt;/span&gt;&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
class Ticket&lt;br /&gt;
  &lt;span class=&quot;caps&quot;&gt;VENUES&lt;/span&gt; = [&amp;#8220;Convention Center&amp;#8221;, &amp;#8220;Fairgrounds&amp;#8221;, &amp;#8220;Town Hall&amp;#8221;]&lt;br /&gt;
end&lt;br /&gt;
&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;每个类有自己的实例方法，可以继承链上面的类的实例方法。定义一个动作，就是给控制器类添加一个实例方法。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/ruby-for-rails-2</link>
                <guid>http://liwei78.github.io/blog/ruby-for-rails-2</guid>
                <pubDate>2008-11-16T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>回复一篇关于Ruby开发ucenter项目的帖子</title>
                <description>&lt;hr /&gt;
&lt;p&gt;写在前面：我忘了我je的密码了，就贴到自己博客吧。&lt;/p&gt;
&lt;p&gt;帖子地址：http://galaxystar.javaeye.com/blog/210934&lt;/p&gt;
&lt;p&gt;目前看官方可能不会在今年放出ruby的包了，不过从长远（非常长远啊）的角度看，这个ruby包还是有前途的，毕竟大量的网站可能会安装使用ucenter，与uc的互通是有必要的。&lt;/p&gt;
&lt;p&gt;但是，ucenter的概念很简单，1-2个程序员完全可以用ruby来开发一套基于rails或其他框架的ucenter包来。&lt;/p&gt;
&lt;p&gt;关键的关键，ucenter的理念对我个人影响很深，我在逐渐用这个方式来思考新的设计项目&amp;#8212;&amp;#8212;&amp;#8212;&amp;#8212;&amp;#8212;&amp;#8212;-松耦合，目标是：每一个部分可以单独安装。&lt;/p&gt;
&lt;p&gt;从近来对ucenter的了解，uc包含如下几个关键功能：用户验证（注册，登陆），web应用管理，积分换算，feed，好友，站内短信，黑名单等。（从uc_client包内的client.php可以看到这些）。其中的要点是要解决好积分换算和feed，uc是为多个系统服务的，之间的积分，金币换算非常重要。feed是要告诉各个应用，当前应用的当前用户的操作是什么。&lt;/p&gt;
&lt;p&gt;不过这里有个问题，就是uchome将我们带进了一个弯路。uchome是一个代表性的uc应用，可是在开发上，比如实名，用户资料扩展，就对uc的定义产生了影响。例如，实名在别的系统无法使用，因为它不存在uc中，后果是如果每个应用都有一个关键的用户资料扩充或feed扩充，将会无法实现（我只能hack了）。&lt;/p&gt;
&lt;p&gt;另外：ucenter设计真的合理吗？&lt;/p&gt;
&lt;p&gt;所以，我想在下一个Rails项目之前，了解下facebook的设计，如果我能快速理解的话。希望来的朋友多提供宝贵看法，谢谢。&lt;/p&gt;
&lt;p&gt;再补充些观点：uchome1.5的推出，必将在江湖上产生无数的sns应用，这对开发者是个好机会，基于uch的应用必将收到欢迎。但是同时，sns概念也将从火热转为平淡，没有灵魂的sns也将死去。所以，基于sns，或者是摒弃传统sns的开发，将会给web应用带来生机。庆幸，下一个项目就是这样的。。。。。&lt;/p&gt;
&lt;p&gt;ps：很看好web game。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/ruby-on-rails-with-ucenter</link>
                <guid>http://liwei78.github.io/blog/ruby-on-rails-with-ucenter</guid>
                <pubDate>2008-11-14T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>TextMate中文教程之在项目中搜索</title>
                <description>&lt;hr /&gt;
&lt;p&gt;当你一次需要修改许多文件的时候，你可以选择 Edit &amp;#8594; Find &amp;#8594; Find in Project 快捷键 Shift＋Apple＋F 。虽然看起来略有不同，但是仍然和上一章的搜索对话框基本一样。&lt;/p&gt;
&lt;p&gt;在输入搜索的信息之后，按一下回车键会触发搜索过程。TextMate会在整个项目中搜索匹配的文本，并把它们显示在搜索框的下面。你可以点选任意一个匹配记录，TextMate会自动跳转到该文件。&lt;/p&gt;
&lt;p&gt;这里最好用的功能应该是替换。你可以使用 Replace All 按钮来替换全部匹配文本。或者你可以手动来一个一个的替换掉。用鼠标在下面显示搜索结果的地方点一条记录，你可以使用Shift或者Apple来选择或者删除多个匹配记录。当你选择了需要替换的记录之后，按一下 Replace Selected 按钮。就会替换掉刚才选择的那些记录。&lt;br /&gt;
&lt;a href=&quot;http://railser.cn/wp-content/uploads/2008/11/2008111401.png&quot;&gt;&lt;img src=&quot;http://railser.cn/wp-content/uploads/2008/11/2008111401-300x165.png&quot; alt=&quot;&quot; title=&quot;2008111401&quot; width=&quot;300&quot; height=&quot;165&quot; class=&quot;alignnone size-medium wp-image-314&quot; /&gt;&lt;/a&gt;&lt;br /&gt;
搜索整个项目需要花很多时间。如果你有兴趣可以限制只搜索某些文件。你可以让TextMate创建一个新的临时项目。只包含你感兴趣想搜索的文件。搜索之后再销毁这个临时项目。利用 mate 命令你可以很容易的做到这些。 例如我想创建一个项目，仅包含 lib 和 test 文件夹下面的 ruby 文件,那么你需要在 Terminal 下面输入：&lt;/p&gt;
&lt;p&gt;$ find {lib,test} -name &amp;#8216;*.rb&amp;#8217; -print0 | xargs -0 mate&lt;/p&gt;
&lt;p&gt;你也可以用鼠标做一样的事。拖动一些文件或文件夹到Dock，并放于TextMate的图标上。这告诉 TextMate 创建一个新项目并且过滤掉你不希望存在的。&lt;/p&gt;
&lt;p&gt;当项目打开的时候，我可以搜索项目然后关闭它。当关闭项目的时候搜索也停止。这可以让我只在需要的时候才搜索并且能提高不少速度。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/find-in-project</link>
                <guid>http://liwei78.github.io/blog/find-in-project</guid>
                <pubDate>2008-11-14T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>ruby for rails 摘录</title>
                <description>&lt;hr /&gt;




&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;
def all
  @order = params[:order] || &quot;number&quot;
  sort_proc = case @order
    when &quot;author&quot; then lambda {|r| [r.user.name.downcase, r.number]}
    when &quot;status&quot;,
             &quot;title&quot;, then lambda {|r| [r.send(@order).downcase, r.number]}
    when &quot;number&quot; then lambda {|r| -r.number}
  end
  @rcrs = Rcr.find(:all).sort_by &amp;amp;sort_proc
end
&lt;/pre&gt;
&lt;p&gt;下面是一个 respond_to? 和 send 方法的例子&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
request = gets.chomp&lt;/p&gt;
&lt;p&gt;if ticket.respond_to?(request)&lt;br /&gt;
  puts ticket.send(request)&lt;br /&gt;
else&lt;br /&gt;
  puts &amp;#8220;No such information available&amp;#8221;&lt;br /&gt;
end&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
参数的默认值&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
def m(a, b=1, *m)&lt;br /&gt;
end&lt;/p&gt;
&lt;p&gt;m(1,2,3,4)&lt;/p&gt;
&lt;p&gt;a = 1, b = 1, m = [3, 4]&lt;br /&gt;
&lt;/pre&gt;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/ruby-for-rails-1</link>
                <guid>http://liwei78.github.io/blog/ruby-for-rails-1</guid>
                <pubDate>2008-11-10T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>TextMate中文教程之搜索</title>
                <description>&lt;hr /&gt;
&lt;p&gt;你可以通过Edit &amp;#8594; Find &amp;#8594; Find或者按Ctrl＋F调出搜索功能。当你没有选择正则表达式功能的时候，这个对话框和其它Mac的应用程序使用方法一样。&lt;/p&gt;
&lt;p&gt;你可以在Find字段输入一些想匹配的文本，并且在replace字段输入一些想用来替换的文本。因为Tab键盘会跳转到输入框的焦点而回车键会出发搜索动作。所以你不能输入这两个字符。当然如果你确实需要输入它们，你可以按Option＋Tab键和Option＋回车键来替代。当你想输入更多字符的时候，可以拖动对话框右下角的按钮。点一下淡蓝色的按钮可以开始搜索最近一个符合的条目了。按钮的名称是Next。&lt;/p&gt;
&lt;p&gt;在你开始搜索之前可以用鼠标选择一下搜索选项或者使用快捷键，Ctrl+Apple+R, Ctrl+Apple+I, Ctrl+Apple+W。后面的章节会重点介绍正则表达式不过现在先让我们选择忽略大小写和循环搜索两个功能。&lt;/p&gt;
&lt;p&gt;当你完成搜索定义，可以用回车键触发搜索功能。或者按Previous搜索前一个。我不太喜欢用Replace 或者 Replace&lt;br /&gt;
&amp;amp; Find 按钮。建议你用Σ按钮，它会告诉你Replace All一共发生了多少次替换。你可以用快捷键Ctrl＋Apple＋F触发Replace All功能。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/2008/11/e59bbee78987-1.png&quot;&gt;&lt;img class=&quot;alignnone size-medium wp-image-294&quot; title=&quot;e59bbee78987-1&quot; src=&quot;http://railser.cn/wp-content/uploads/2008/11/e59bbee78987-1-300x106.png&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;106&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;需要注意下面这些常用的快捷键，都是你不需要打开搜索对话框就可以使用的。Apple＋E 替换当前Find字段里面的文字。Apple+G，搜索下一个符合条件的单词。Option＋Apple＋F替换当前所选并定位到下一个符合条件的单词。Shift＋Apple＋E替换当前搜索字段。你可以用快捷键Shift＋Ctrl＋Apple＋F触发Replace AlI In Selectionl功能。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/textmate-tutorial-text-find</link>
                <guid>http://liwei78.github.io/blog/textmate-tutorial-text-find</guid>
                <pubDate>2008-11-09T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>TextMate中文教程之扫描</title>
                <description>&lt;hr /&gt;
&lt;p&gt;让我们通过一个例子来了解这个功能。TextMate有完备的发行说明，介绍了不同版本之间的新功能和改变。如果你想了解新特点：&lt;br /&gt;
&lt;ul&gt;&lt;br /&gt;
	&lt;li&gt;选择  Help &amp;#8594; Release Notes，在文字编辑窗口打开一个列表。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;按 Ctrl ＋S 注意在编辑栏的最下面出现了什么&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;在其中输入 [ n e w ]，注意你每输入一个字符TextMate都会自动帮你匹配搜寻文档中相应的字符&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;按Ctrl＋S 会在文档中搜索下一个相同的单词&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;按Shift＋Ctrl＋S 后退至上一个&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;按回车或者ESC键退出扫描功能&lt;/li&gt;&lt;/p&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/2008/11/e59bbee78987-2.png&quot;&gt;&lt;img class=&quot;alignnone size-medium wp-image-296&quot; title=&quot;e59bbee78987-2&quot; src=&quot;http://railser.cn/wp-content/uploads/2008/11/e59bbee78987-2-300x113.png&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;113&quot; /&gt;&lt;/a&gt;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/scanning</link>
                <guid>http://liwei78.github.io/blog/scanning</guid>
                <pubDate>2008-11-09T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>近来jquery的两次应用</title>
                <description>&lt;hr /&gt;
&lt;p&gt;最近的开发，都和Rails无关，但是两次用到了jquery。上次做完一个项目后，买了2本js的书，打算好好学下jquery和js，可惜看了前几章就又没时间专心看了。这两次也是借着一点点了解，解决了2个jquery的应用。不忙的时候，一定要认真复习一遍。&lt;/p&gt;
&lt;p&gt;1、用jquery解密淘宝图片地址&lt;/p&gt;
&lt;p&gt;从淘宝过来的数据，图片地址是加密的。查的资料上看，可以用一段js代码解密，可问题是那段代码需要点击后才会解密。我的程序里需要直接显示图片。怎么办？&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/2008/11/e6b798e5ae9de59bbee78987e59cb0e59d80e8a7a3e5af86.rar&quot; target=&quot;_blank&quot;&gt;下载淘宝图片解密js文件&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;解决办法是，将拿回来的加密字串放到js的方法里，将解密结果更新img的src属性。所以在上面那个文件提供的方法下面，加上了jquery的方法。做了个典型的方法调用。&lt;/p&gt;
&lt;p&gt;2、wslide插件&lt;/p&gt;
&lt;p&gt;这是一个可以实现新闻列表分页显示的jquery插件，地址：&lt;a href=&quot;http://www.webinventif.fr/wslide-plugin/&quot; target=&quot;_blank&quot;&gt;http://www.webinventif.fr/wslide-plugin/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;可惜没有上，下一页按钮。页面是法文的，不懂。所以用完这个，真的需要找时间专心看一下那两本书了。《jquery基础教程》和《精通javascript》。&lt;/p&gt;
&lt;p&gt;写在最后：感谢最近的几位朋友与我联系开发的意向。感谢大家的信任。目前答应了俩个朋友的邀请，在这个月中（结束手头两个项目）跟他们谈合作的细节。每个项目周期可能在2周左右。真的很期待。我会在这个过程中不断充实自己。再次感谢大家，感谢wordpress，以及这次博客界面的改版，mac真的可以带来好运。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/jquery-in-works</link>
                <guid>http://liwei78.github.io/blog/jquery-in-works</guid>
                <pubDate>2008-11-07T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>TextMate中文教程之使用emacs中常用的快捷键</title>
                <description>&lt;hr /&gt;
&lt;p&gt;就像你前面看到的一样TextMate支持一些emacs常见的快捷键。&lt;br /&gt;
&lt;ul&gt;&lt;br /&gt;
	&lt;li&gt;Ctrl+D 删除光标右侧的一个字符&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;Ctrl+T 调换选中文本的顺序，如果没有选择任何文本则对换光标左右字符的位置。并且将光标置于下一个位置&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;Ctrl+K 删除光标到行尾的文字&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;Ctrl+Y 复制出删除的最后一次文本&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;Ctrl+O 不移动光标插入新的一行&lt;/li&gt;&lt;/p&gt;
&lt;/ul&gt;
&lt;p&gt;当然这些快捷键在Mac系统中的其它应用中也可以使用，比如Mail。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/emacs-key-bindings</link>
                <guid>http://liwei78.github.io/blog/emacs-key-bindings</guid>
                <pubDate>2008-11-05T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>uchome中的两个字段含义的解释</title>
                <description>&lt;hr /&gt;
&lt;p&gt;在uchome的spacefield表中，有两个看似明确，实际很别扭的两个字段名，friend和feedfriend。&lt;/p&gt;
&lt;p&gt;在处理feed的时候，这两个字段经常会让人搞混乱，一时想不起来意思。&lt;/p&gt;
&lt;p&gt;其实friend是表明该空间的好友，这和blog的friend不一样，blog的friend是定义的blog的开放级别。&lt;/p&gt;
&lt;p&gt;feedrfriend，基本上和friend是同样内容，但是当设置屏蔽时，会从这个表中去掉被屏蔽的人的id，所以，这个字段保存的是可以查看该空间feed的id。&lt;/p&gt;
&lt;p&gt;那么，现在我在做的是增加同组查看功能，比如，设置某一个组只能本组人查看，外组的人无法查看任何消息。这时，就用上了这里的方法。&lt;/p&gt;
&lt;p&gt;未完，待续&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/uchome-2-column-meanings</link>
                <guid>http://liwei78.github.io/blog/uchome-2-column-meanings</guid>
                <pubDate>2008-11-01T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>TextMate中文教程之使用制表符</title>
                <description>&lt;hr /&gt;
&lt;p&gt;如下图所示，你可以在编辑窗口的下面修改制表符的大小或者使用Soft Tabs模式。如果你选择了Soft Tabs类型，那么TextMate会移除目前的制表符，当你保存文档的时候，它会用空格来替代。并且今后编辑同样语言类型文档，也会如此。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/2008/10/2008103101.png&quot;&gt;&lt;img class=&quot;alignnone size-medium wp-image-250&quot; title=&quot;2008103101&quot; src=&quot;http://railser.cn/wp-content/uploads/2008/10/2008103101-300x131.png&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;131&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;在TextMate里面你大概还会遇到Smart Tab的情况，当你按一个Tab键的时候，会根据目前的缩进级别自动在前面填充相应数量的制表符。当你选取一部分文字的时候，可以使用 Text －&amp;gt; Convert &amp;#8594; Spaces to&lt;br /&gt;
Tabs 或者 Text &amp;#8594; Convert &amp;#8594; Tabs to Spaces功能，如果你没有选择任何文本，则该操作会影响当前文档。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/working-with-tabs</link>
                <guid>http://liwei78.github.io/blog/working-with-tabs</guid>
                <pubDate>2008-10-31T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>uc实名认证的修改</title>
                <description>&lt;hr /&gt;
&lt;p&gt;写在前面：jp加入本站后，博客立刻火了起来。我奥运会后一直在做php的开发，而且是专门研究，hack康盛的uch，uc和supesite，给客户做php的站，一直没有做Rails的开发，有点遗憾。不过jp带着我还算没太落后，碰到好的Rails项目肯定还会继续Railser的开发的。&lt;/p&gt;
&lt;p&gt;这是一篇笔记，边写边整理代码，比较复杂。贴在这里吧。&lt;/p&gt;
&lt;p&gt;uc有个问题，就是在uch打开实名认证时，其他与uc通信的应用，仍旧显示uc里的username字段，而独uch显示认证的名字。为了使整站统一，需要在别的应用里显示uchome_space.name字段的内容。&lt;/p&gt;
&lt;p&gt;思路：&lt;br /&gt;
&lt;span style=&quot;color: green;&quot;&gt;&lt;strong&gt;1、在uc_members中增加name和namestatus字段。&lt;/strong&gt;&lt;/span&gt;&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;sql&quot;&gt;&lt;span class=&quot;caps&quot;&gt;ALTER&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;TABLE&lt;/span&gt; `uc_members` &lt;span class=&quot;caps&quot;&gt;ADD&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;COLUMN&lt;/span&gt; `name` char(20) &lt;span class=&quot;caps&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;NULL&lt;/span&gt; default &amp;#8216;&amp;#8217;;&lt;br /&gt;
&lt;span class=&quot;caps&quot;&gt;ALTER&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;TABLE&lt;/span&gt; `uc_members` &lt;span class=&quot;caps&quot;&gt;ADD&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;COLUMN&lt;/span&gt; namestatus tinyint(1) &lt;span class=&quot;caps&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;NULL&lt;/span&gt; default &amp;#8217;0&amp;#8217;;&lt;/pre&gt;&lt;br /&gt;
&lt;span style=&quot;color: green;&quot;&gt;&lt;strong&gt;2、uch的source/cp_profile.php 82行后，增加同步更新uc实名字段。&lt;/strong&gt;&lt;/span&gt;&lt;br /&gt;
//同步更新uc主表实名&lt;br /&gt;
&lt;pre class=&quot;php&quot; name=&quot;code&quot;&gt;update_uc_table(&amp;#8216;uc_members&amp;#8217;,Array(&amp;#8216;name&amp;#8217;=&amp;gt;$setarr[&amp;#8216;name&amp;#8217;], &amp;#8216;namestatus&amp;#8217;=&amp;gt;$setarr[&amp;#8216;namestatus&amp;#8217;], &amp;#8216;uid&amp;#8217;=&amp;gt;$&lt;em&gt;&lt;span class=&quot;caps&quot;&gt;SGLOBAL&lt;/span&gt;[&amp;#8216;supe_uid&amp;#8217;]));&lt;/pre&gt;&lt;br /&gt;
&lt;span style=&quot;color: darkgreen;&quot;&gt;&lt;strong&gt;3、管理后台 admin/admincp_space.php 批量管理实名时，同步更新uc表&lt;/strong&gt;&lt;/span&gt;&lt;br /&gt;
75行后：&lt;br /&gt;
//同步更新uc表，单个用户&lt;br /&gt;
&lt;pre class=&quot;php&quot; name=&quot;code&quot;&gt;update_uc_table(&amp;#8216;uc_members&amp;#8217;,Array(&amp;#8216;name&amp;#8217;=&amp;gt;$setarr[&amp;#8216;name&amp;#8217;], &amp;#8216;namestatus&amp;#8217;=&amp;gt;$setarr[&amp;#8216;namestatus&amp;#8217;], &amp;#8216;uid&amp;#8217;=&amp;gt;$uid));&lt;/pre&gt;&lt;br /&gt;
需要在 &lt;span style=&quot;color: blue;&quot;&gt;source/function_common.php&lt;/span&gt; 中添加一个方法。和updatetable一样的，取消了table的前缀。&lt;br /&gt;
&lt;pre class=&quot;php&quot; name=&quot;code&quot;&gt;function update_uc_table($tablename, $setsqlarr) {&lt;br /&gt;
global $&lt;/em&gt;&lt;span class=&quot;caps&quot;&gt;SGLOBAL&lt;/span&gt;;&lt;/p&gt;
&lt;p&gt;$setsql = $comma = &amp;#8216;&amp;#8217;;&lt;br /&gt;
foreach ($setsqlarr as $set_key =&amp;gt; $set_value) {&lt;br /&gt;
$setsql .= $comma.&amp;#8217;`&amp;#8216;.$set_key.&amp;#8217;`&amp;#8216;.&amp;#8217;=\&amp;#8216;&amp;#8217;.$set_value.&amp;#8217;\&amp;#8216;&amp;#8217;;&lt;br /&gt;
$comma = &amp;#8217;, &amp;#8217;;&lt;br /&gt;
}&lt;br /&gt;
$where = $comma = &amp;#8217;&amp;#8217;;&lt;br /&gt;
if(empty($wheresqlarr)) {&lt;br /&gt;
$where = &amp;#8216;1&amp;#8217;;&lt;br /&gt;
} elseif(is_array($wheresqlarr)) {&lt;br /&gt;
foreach ($wheresqlarr as $key =&amp;gt; $value) {&lt;br /&gt;
$where .= $comma.&amp;#8216;`&amp;#8217;.$key.&amp;#8216;`&amp;#8217;.&amp;#8216;=\&amp;#8217;&amp;#8216;.$value.&amp;#8217;\&amp;#8216;&amp;#8217;;&lt;br /&gt;
$comma = &amp;#8217; &lt;span class=&quot;caps&quot;&gt;AND&lt;/span&gt; &amp;#8217;;&lt;br /&gt;
}&lt;br /&gt;
} else {&lt;br /&gt;
$where = $wheresqlarr;&lt;br /&gt;
}&lt;br /&gt;
$_SGLOBAL[&amp;#8217;db&amp;#8217;]&amp;#8594;query(&amp;#8216;&lt;span class=&quot;caps&quot;&gt;UPDATE&lt;/span&gt; &amp;#8217;.$tablename.&amp;#8217; &lt;span class=&quot;caps&quot;&gt;SET&lt;/span&gt; &amp;#8216;.$setsql.&amp;#8217; &lt;span class=&quot;caps&quot;&gt;WHERE&lt;/span&gt; uid=&amp;#8216;.$setsqlarr[&amp;#8217;uid&amp;#8217;]);&lt;br /&gt;
}&lt;/pre&gt;&lt;br /&gt;
//122行后，批量更新&lt;br /&gt;
&lt;pre class=&quot;php&quot; name=&quot;code&quot;&gt;case &amp;#8216;1&amp;#8217;:&lt;br /&gt;
//通过实名认证&lt;br /&gt;
$&lt;em&gt;&lt;span class=&quot;caps&quot;&gt;SGLOBAL&lt;/span&gt;[&amp;#8216;db&amp;#8217;]&amp;#8594;query(&amp;quot;UPDATE &amp;#8220;.tname(&amp;#8216;space&amp;#8217;).&amp;#8221; &lt;span class=&quot;caps&quot;&gt;SET&lt;/span&gt; namestatus=&amp;#8216;1&amp;#8217; &lt;span class=&quot;caps&quot;&gt;WHERE&lt;/span&gt; uid IN (&amp;#8220;.simplode($_POST[&amp;#8216;uids&amp;#8217;]).&amp;#8221;) &lt;span class=&quot;caps&quot;&gt;AND&lt;/span&gt; name!=&amp;#8216;&amp;#8217;&amp;quot;);&lt;br /&gt;
$_SGLOBAL[&amp;#8217;db&amp;#8217;]&amp;#8594;query(&amp;#8220;&lt;span class=&quot;caps&quot;&gt;UPDATE&lt;/span&gt; uc_members &lt;span class=&quot;caps&quot;&gt;SET&lt;/span&gt; `namestatus`=&amp;#8216;1&amp;#8217; &lt;span class=&quot;caps&quot;&gt;WHERE&lt;/span&gt; uid IN (&amp;#8221;.simplode($&lt;em&gt;&lt;span class=&quot;caps&quot;&gt;POST&lt;/span&gt;[&amp;#8216;uids&amp;#8217;]).&amp;#8220;) &lt;span class=&quot;caps&quot;&gt;AND&lt;/span&gt; name!=&amp;#8217;&amp;#8217;&amp;#8221;);&lt;br /&gt;
$url .= &amp;#8216;namestatus=0&amp;#8217;;&lt;br /&gt;
$createlog = true;&lt;br /&gt;
break;&lt;br /&gt;
case &amp;#8216;2&amp;#8217;:&lt;br /&gt;
//取消实名认证&lt;br /&gt;
$&lt;em&gt;&lt;span class=&quot;caps&quot;&gt;SGLOBAL&lt;/span&gt;[&amp;#8216;db&amp;#8217;]&amp;#8594;query(&amp;quot;UPDATE &amp;#8220;.tname(&amp;#8216;space&amp;#8217;).&amp;#8221; &lt;span class=&quot;caps&quot;&gt;SET&lt;/span&gt; namestatus=&amp;#8216;0&amp;#8217; &lt;span class=&quot;caps&quot;&gt;WHERE&lt;/span&gt; uid IN (&amp;#8220;.simplode($_POST[&amp;#8216;uids&amp;#8217;]).&amp;#8221;)&amp;#8220;);&lt;br /&gt;
$_SGLOBAL[&amp;#8216;db&amp;#8217;]&amp;#8594;query(&amp;#8221;&lt;span class=&quot;caps&quot;&gt;UPDATE&lt;/span&gt; uc_members &lt;span class=&quot;caps&quot;&gt;SET&lt;/span&gt; `namestatus`=&amp;#8216;0&amp;#8217; &lt;span class=&quot;caps&quot;&gt;WHERE&lt;/span&gt; uid IN (&amp;#8220;.simplode($_POST[&amp;#8216;uids&amp;#8217;]).&amp;#8221;)&amp;#8220;);&lt;br /&gt;
$url .= &amp;#8216;namestatus=1&amp;#8217;;&lt;br /&gt;
$createlog = true;&lt;br /&gt;
break;&lt;br /&gt;
case &amp;#8216;3&amp;#8217;:&lt;br /&gt;
//清空姓名&lt;br /&gt;
$_SGLOBAL[&amp;#8216;db&amp;#8217;]&amp;#8594;query(&amp;#8221;&lt;span class=&quot;caps&quot;&gt;UPDATE&lt;/span&gt; &amp;#8220;.tname(&amp;#8216;space&amp;#8217;).&amp;#8221; &lt;span class=&quot;caps&quot;&gt;SET&lt;/span&gt; name=&amp;#8216;&amp;#8217;,namestatus=&amp;#8217;0&amp;#8217; &lt;span class=&quot;caps&quot;&gt;WHERE&lt;/span&gt; uid IN (&amp;#8220;.simplode($_POST[&amp;#8216;uids&amp;#8217;]).&amp;#8221;)&amp;#8220;);&lt;br /&gt;
$_SGLOBAL[&amp;#8216;db&amp;#8217;]&amp;#8594;query(&amp;#8221;&lt;span class=&quot;caps&quot;&gt;UPDATE&lt;/span&gt; uc_members &lt;span class=&quot;caps&quot;&gt;SET&lt;/span&gt; `name`=&amp;#8216;&amp;#8217; &lt;span class=&quot;caps&quot;&gt;WHERE&lt;/span&gt; uid IN (&amp;quot;.simplode($_POST[&amp;#8217;uids&amp;#8217;]).&amp;#8220;)&amp;#8221;);&lt;br /&gt;
break;&lt;/pre&gt;&lt;br /&gt;
*4、在需要的应用中，修改方法其实应该放到uc_client中*，&lt;span style=&quot;color: red;&quot;&gt;但是我未找到一个很重要的方法究竟在哪定义，就是uc_client/client.php 中的 call_user_func 方法，我需要hack这个方法，来将name和namestatus属性包装进来，但是没找到，高手指点下呗。&lt;/span&gt;答：最终，还是在modoer里修改了user class，而且在feed的时候，还要使用实名，就只能这样hack了。不过还是没有明白这个&lt;span style=&quot;color: red;&quot;&gt;call_user&lt;/em&gt;func方法是怎么调用的。&lt;/span&gt;&lt;br /&gt;
所以用了个土办法。这里有个设置问题，当实名未认证时，是否显示该实名。&lt;br /&gt;
&lt;pre class=&quot;php&quot; name=&quot;code&quot;&gt;$tmp = Array();&lt;br /&gt;
$tmp = $db&amp;#8594;get&lt;/em&gt;one(&amp;#8217;SELECT name, namestatus from uc&lt;/em&gt;members where `username`=&amp;#8220;&amp;#8216;.$user&amp;#8594;username.&amp;#8217;&amp;#8221;&amp;#8216;);&lt;br /&gt;
if($tmp[&amp;#8217;namestatus&amp;#8217;]){&lt;br /&gt;
$user&amp;#8594;name = $tmp[&amp;#8216;name&amp;#8217;];&lt;br /&gt;
}else{&lt;br /&gt;
$user&amp;#8594;name = $tmp[&amp;#8216;name&amp;#8217;].&amp;#8220;(未认证)&amp;#8221;;&lt;br /&gt;
}&lt;/pre&gt;&lt;br /&gt;
这里还有个顾虑就是，在这个新系统中，是否沿用uch的认证机制，如果需要，这个改动讲很大，还是依附于uc过来的数据处理。&lt;/p&gt;
&lt;p&gt;其实完美的方案应该该是完全放到uc_client中，但是我4里的问题我还没解决。目前的只是按照常规的方法hack相关代码解决的。&lt;/p&gt;
&lt;p&gt;modoer是开源的点评程序，非常出色，从代码里学到很多知识，不仅是php，可能对今后开发Rails都有帮助。在此感谢作者的工作！！！&lt;/p&gt;
&lt;p&gt;广告下自己的新站：&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.51zoon.com&quot; target=&quot;_blank&quot;&gt;时尚51区&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://7ent.cn&quot; target=&quot;_blank&quot;&gt;7#娱乐圈&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://7news.cn&quot;&gt;7#早新闻&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;对了，我们现在用的新插件是这个，http://code.google.com/p/syntaxhighlighter，非常强&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/uc-verfy-name-and-usement-in-others</link>
                <guid>http://liwei78.github.io/blog/uc-verfy-name-and-usement-in-others</guid>
                <pubDate>2008-10-31T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>TextMate中文教程之文本对齐</title>
                <description>&lt;hr /&gt;
&lt;p&gt;你会看到TextMate支持常见得对齐方式，它们在 Text 菜单得子菜单下。Text菜单包含3个有用得方法&lt;br /&gt;
&lt;ul&gt;&lt;br /&gt;
	&lt;li&gt;Ctrl+Q 左对齐段落&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;Ctrl+J 使段落两边对齐&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;Ctrl+Option+Q 把段落合并为一行&lt;/li&gt;&lt;/p&gt;
&lt;/ul&gt;
&lt;p&gt;当使用列选择器的时候，这些快捷键可以很方便的调整你的内容。这一过程是很容易的，选择文本内容中的一部分按Ctrl＋Q。如下图&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/2008/10/2008103001.png&quot;&gt;&lt;img class=&quot;alignnone size-medium wp-image-242&quot; title=&quot;2008103001&quot; src=&quot;http://railser.cn/wp-content/uploads/2008/10/2008103001-300x185.png&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;185&quot; /&gt;&lt;/a&gt;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/textmate-tutorial-textalign</link>
                <guid>http://liwei78.github.io/blog/textmate-tutorial-textalign</guid>
                <pubDate>2008-10-31T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>TextMate中文教程之编辑模式</title>
                <description>&lt;hr /&gt;
&lt;p&gt;TextMate支持两种额外的编辑模式，当你输入固定宽度的文本或者ASCII的时候尤其有用。它们是Freehanded Editing和 Overwrite，你可以在 Edit &amp;#8594; Mode 下找到它们。&lt;/p&gt;
&lt;p&gt;当你切换 Freehanded Editing 模式（Option+Apple+E）,TextMate允许你使用键盘来移动光标或者用鼠标点击。你可以放到一行的结尾外，或者列的中间。如果你增加新内容，TextMate会在特定区域补充上空白。&lt;/p&gt;
&lt;p&gt;在使用列选择器的时候，这个功能通常是激活的，所以你可以把内容区域扩充。如果你希望单击鼠标切换这个模式，那么当你单击的时候请按住Option键。&lt;/p&gt;
&lt;p&gt;另一个编辑模式Overwrite Mode (Option+Apple+O)，用来改变目前存在的文本。你很容易就能辨识出现在现在是否激活了这个模式，因为它会让你的光标成为一个下划线。和在两个字符中间插入新字符不同，TextMate的这种编辑模式会用你输入的字符替换当前字符。当你要进行文本替换的时候，这个模式可以很好的避免行内后面的文本窜位。&lt;/p&gt;
&lt;p&gt;这些模式会引起自动化操作的异常，如果你看到了一些奇怪的结果请确保已经关闭了这些模式。如果有必要，请每次需要使用这些模式的时候手动开启。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/editing-modes</link>
                <guid>http://liwei78.github.io/blog/editing-modes</guid>
                <pubDate>2008-10-30T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>TextMate中文教程之一次编辑多行</title>
                <description>&lt;hr /&gt;
&lt;p&gt;TextMate允许你一次编辑多行文本。你可以使用这个功能添加新内容或者删除旧内容。这个功能在你操作列表数据的时候尤其方便。让我们仍然用一个例子来熟悉这个用法：&lt;br /&gt;
&lt;ul&gt;&lt;br /&gt;
	&lt;li&gt;创建一个新的TextMate文档，Ctrl+N&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;选择当前工作的语言环境 Ctrl+Option+Shift+H&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;增加一些基础的文档结构，doctype+Tab键然后选择2.增加必须的根节点html然后按Ctrl+&amp;lt; 然后按回车会给你留一些空间输入内容。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;现在输入header区域，head+Tab键。在title中输入Apple Products。按两次方向键下，按回车给body留出空间。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;输入body然后按Ctrl+&amp;lt; 然后按回车键。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;离开head区域，现在创建一个标签元素。按Ctrl+&amp;lt; 然后输入h1 再按Tab键跳到内容区输入 Computers TextMate Runs On: 然后按Apple+回车两次。跳过关闭标签。并留出一些空白区域。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;同样的办法，创建ul标签。输入下面内容&lt;br /&gt;
Mac mini&lt;br /&gt;
iMac&lt;br /&gt;
Mac Pro&lt;br /&gt;
Macbook&lt;br /&gt;
Macbook Pro&lt;br /&gt;
你需要选择这些内容，然后才能一次给它们添加上标签。首先把你的光标移动到最后Macbook Pro的右边，然后按Shift+Option+左两次来选择这一行，再按Shift+Option+上最后按Shift+Option+左把空格也选上。现在使用最牛B的Ctrl+Shift+Apple+W组合键。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;使用Ctrl+Option+Apple+P来预览&lt;/li&gt;&lt;/p&gt;
&lt;/ul&gt;
&lt;p&gt;接下来我要教你如何给刚刚的列表增加点东西以便识别哪些是台式机哪些是笔记本：&lt;br /&gt;
&lt;ul&gt;&lt;br /&gt;
	&lt;li&gt;按Ctrl+Shift+L选择第一行。按住Shift再按两次方向键下。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;编辑选择行快捷键是Option+Apple+A&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;按Option+左 两次输入( desktop )&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;同样给后两行增加 ( laptop )&lt;/li&gt;&lt;/p&gt;
&lt;/ul&gt;
&lt;p&gt;如同你看到的 Edit Each Line in Selection 允许你一次给多行添加或者删除内容。它和列选择器很像，它通常用来给一堆列内容增加新内容。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/editing-multiple-lines-at-once</link>
                <guid>http://liwei78.github.io/blog/editing-multiple-lines-at-once</guid>
                <pubDate>2008-10-29T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>TextMate中文教程之剪切，复制和粘贴</title>
                <description>&lt;hr /&gt;
&lt;p&gt;另一项常用的操作是利用 Edit 菜单的剪切，复制和粘贴功能。这些都是其他软件常见的功能，但是TextMate在这些标准方法的基础之上增加了历史剪贴板。让我们做一个简单的例子来加深理解：&lt;br /&gt;
&lt;ul&gt;&lt;br /&gt;
	&lt;li&gt;新建一个 TextMate 文档 (Ctrl+N)&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;输入下面的文字&lt;br /&gt;
Line Three.&lt;br /&gt;
Line One.&lt;br /&gt;
Line Two.&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;你可以通过历史剪贴板来重新安排它们的顺序。移动到文档的第一行(Apple+上)，选择这一行(Shift+Apple+L)，剪切它(Apple+X)。对最后一行进行一样的操作(Apple+下，Shift+Apple+L，Apple+X)。然后再如此操作最后一行(上，Shift+Apple+L，Apple+X)。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;现在你可以依次粘贴它们。用Apple+V粘贴你历史剪贴板里面的最后一个记录。如果你想粘贴历史剪贴板里面的上一条记录的话需要按Shift+Apple+V，再次按这个组合键你可以粘贴出最后历史剪贴板里面的第一条记录。现在你可以按希望的顺序来排列这些行了。&lt;/li&gt;&lt;/p&gt;
&lt;/ul&gt;
&lt;p&gt;如果排序顺序和你想的不一样，别害怕。按Ctrl+Option+Apple+V或者选择Edit &amp;#8594; Paste from Histor, TextMate会打开一个历史剪贴板列表。你可以用方向键来选择条目并按回车选择该条目。或者按ESC退出列表。&lt;/p&gt;
&lt;p&gt;注意，粘贴出来的文本的缩进位置是由TextMate根据当前文档而决定的。虽然大多数情况下这个特性可以节省你不少时间，但是可能你偏偏不想这样。希望 Paste Without Re-indent。打开Edit菜单并按下Ctrl键你能看到这个命令。当然你也可以直接使用Ctrl+Apple+V来进行这个操作。如果这个特性让你感到讨厌，你可以在配置中禁用它。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/cut-copy-and-paste</link>
                <guid>http://liwei78.github.io/blog/cut-copy-and-paste</guid>
                <pubDate>2008-10-29T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>TextMate中文教程之移动文本</title>
                <description>&lt;hr /&gt;
&lt;p&gt;你可能常常需要把文字移动到不同的地方，Text &amp;#8594; Move Selection为你提供如下功能：&lt;br /&gt;
&lt;ul&gt;&lt;br /&gt;
	&lt;li&gt;Ctrl+Apple+上 向上移动一行（如果没有选择任何文本则移动当前行）&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;Ctrl+Apple+下 向下移动一行（如果没有选择任何文本则移动当前行）&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;Ctrl+Apple+左 移动当前所选文字向左一个字符&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;Ctrl+Apple+右 移动当前所选文字向右一个字符&lt;/li&gt;&lt;/p&gt;
&lt;/ul&gt;
&lt;p&gt;TextMate的 Text 菜单也可以让读者很容易的进行文本缩进：&lt;br /&gt;
&lt;ul&gt;&lt;br /&gt;
	&lt;li&gt;Apple+[ 或者 Option + Tab 减少缩进（如果没有选择任何文本则减少当前行的缩进）&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;Apple+] 或者 Option + Shift + Tab 增加缩进（如果没有选择任何文本则增加当前行的缩进）&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;Option+Apple+[ 根据目前编辑文档的语言类型自动格式化缩进&lt;/li&gt;&lt;/p&gt;
&lt;/ul&gt;</description>
                <link>http://liwei78.github.io/blog/moving-text</link>
                <guid>http://liwei78.github.io/blog/moving-text</guid>
                <pubDate>2008-10-27T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>TextMate中文教程之插入新内容</title>
                <description>&lt;hr /&gt;
&lt;p&gt;TextMate有两个功能在你输入文档的时候会给你提供很大的帮助。当然它们也很常见，单词补完和符号自动配对。&lt;/p&gt;
&lt;p&gt;我只需要教你一个键，就可以让单词补完帮你节省大量时间。每当你要更改文档内容的时候，输入几个开头字母，然后按ESC键。TextMate可以自动用其开头的变量，方法，标签或者其他文档中已经存在的单词来自动补完。此外，语法检查器为每种语言都提供了一套默认的自动补完。这对程序员来说是一个非常重要的功能，它可以避免很多打字错误。&lt;/p&gt;
&lt;p&gt;如果有多个相关单词供你选择，你只需要多次按ESC就可以在它们之间移动选择。TextMate会根据你本次的选择自动为你排序出现相关词语的顺序，以便为你今后的操作节省更多时间。如果不小心多按了一下ESC，那么可以按Shift+ESC选择前一个。&lt;/p&gt;
&lt;p&gt;例如你在编写一些服务端的程序。首先你要敲入一个很长的变量名字  idle_connections 。以后你可是按 idl 然后按ESC来迅速补完这个变量名。根据你文档中以这3个字母开头单词的数量，有时候你可能得多按1，2次ESC键。不过别忘了，TextMate会记录你选择每个单词的次数来帮你排序。这会确保你不会因为手得瑟一下，输入错误的变量名。不单单是编程相关的这些变量，任何你文档中出现的又长又难拼写的单词你都可以这样补完。&lt;/p&gt;
&lt;p&gt;你可以在Edit &amp;#8594; Completion下找到这个自动补完的命令，这或许是你最重要的键盘快捷键。相信我，除了担心它可能磨损你的ESC键之外，你真的没理由不常常使用它！&lt;/p&gt;
&lt;p&gt;如果你已经开始使用TextMate有段时间了，你可能早就不自觉的用上了符号自动配对功能。大多数情况下，你输入一个左括号(，TextMate会自动给你补上一个右括号)。并且把你的光标定位在括号之间。当你输入完其中的内容后，你手动输入一个右括号)，光标会自动跳出到括号之外。这个功能在大部分符号自动配对功能中都可以使用，包括引号。每种语言都有一些自己特殊的符号配对，例如在CSS中，你输入一个冒号: 会自动给你在其后增加一个分号;&lt;/p&gt;
&lt;p&gt;符号自动配对功能的另一个优点它结合文字选择区域。当你选取了一部分文字之后，如果你输入一个可以配对的符号，那么符号的开始符会自动插入到文字之前，而符号的结尾符会插入到文字后面。如下图，相信你会喜欢上这个功能。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102701.png&quot;&gt;&lt;img class=&quot;alignnone size-medium wp-image-204&quot; title=&quot;2008102701&quot; src=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102701-300x80.png&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;80&quot; /&gt;&lt;/a&gt;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/inserting-new-content</link>
                <guid>http://liwei78.github.io/blog/inserting-new-content</guid>
                <pubDate>2008-10-27T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>1.3.2 生成式编程：在运行中编写代码</title>
                <description>&lt;hr /&gt;
&lt;p&gt;生成式编程（Generative Programming）——即用代码来编写代码，是一个包含了若干种技术的一种强大的技术。这种技术可以以最简单的方式实现，例如编写一段用于自动完成编程中一些单调乏味的操作的shell脚本。举个例子，假设你想为每个用户生成一个示例项目的测试fixture：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
brad_project:&lt;br /&gt;
  id: 1&lt;br /&gt;
  owner_id: 1&lt;br /&gt;
  billing_status_id: 12&lt;br /&gt;
john_project:&lt;br /&gt;
  id: 2&lt;br /&gt;
  owner_id: 2&lt;br /&gt;
  billing_status_id: 4&lt;br /&gt;
gem&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
如果这种语言不支持可脚本化（可编程）的测试fixture，你恐怕不得不手工编写了。当数据持续增加时这将会变得混乱，而且当这些测试fixture和源数据层有着奇怪的依赖关系的时候手工编写几乎变得不可能。&lt;/p&gt;
&lt;p&gt;朴素的生成式编程能够让你编写脚本来从源数据生成这些测试fixture。虽然还不够理想，但是比起全部手工编写已经算是个巨大的进步了。但其维护仍然让人头痛，因为你不得不将那个脚本放在编译过程中，而且需要保证源数据发生了变化时测试fixture被重新生成了。&lt;/p&gt;
&lt;p&gt;令人欣慰的是在Ruby或Rails中，这种烦恼几乎是不需要的。几乎每个方面的Rails应用的配置都是可脚本化的，这主要归因于使用了内部的特定领域语言（DSL)。在一个内部的DSL中，你能够支配使用Ruby语言的所有特性，而不仅仅是库文件作者决定要提供给你的那些特定接口。&lt;/p&gt;
&lt;p&gt;再返回去看前面的例子，ERb将这个过程变得异常简单。我们可以通过使用ERb的&amp;lt;% &lt;span&gt;&amp;gt;和&amp;lt;&lt;/span&gt;= %&amp;gt;标签在上面用到的YAML文件中插入任意的Ruby代码，包括我们需要的任何逻辑：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
&amp;lt; % User.find_all_by_active(true).each_with_index do |user, i| %&amp;gt;&lt;br /&gt;
&amp;lt; %= user.login %&amp;gt;_project:&lt;br /&gt;
  id: &amp;lt; %= i %&amp;gt;&lt;br /&gt;
  owner_id: &amp;lt; %= user.id %&amp;gt;&lt;br /&gt;
  billing_status_id: &amp;lt; %= user.billing_status.id %&amp;gt;&lt;br /&gt;
&amp;lt; % end %&amp;gt;&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
ActiveReacord中对这个功能的实现几乎不能再简单了：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
yaml = &lt;span class=&quot;caps&quot;&gt;YAML&lt;/span&gt;::load(erb_render(yaml_string))&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
使用了helper方法erb_render:&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
def erb_render(fixture_content)&lt;br /&gt;
  &lt;span class=&quot;caps&quot;&gt;ERB&lt;/span&gt;.new(fixture_content).result&lt;br /&gt;
end&lt;br /&gt;
&lt;/pre&gt;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/generative-programming-writing-code-on-the-fly</link>
                <guid>http://liwei78.github.io/blog/generative-programming-writing-code-on-the-fly</guid>
                <pubDate>2008-10-27T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>1.3.1 运行时方法延迟查找</title>
                <description>&lt;hr /&gt;
&lt;p&gt;我们常常想创建一个能够随着运行时的数据变换其方法的接口。Rails中这方面最突出的一个例子就是ActiveRecord的属性存取方法。ActiveRecord对象的方法调用（例如person.name）在运行时将被转换成属性存取。在类方法级别，ActiveRecord提供了极大的灵活性：Person.find_all_by_user_id_and_active(42,true)被转换成相应的SQL查询，如果被查询的属性不存在那么就会抛出一个标准的NoMethodError错误。&lt;/p&gt;
&lt;p&gt;其背后的秘密是Ruby的method_missing方法。当对象上的一个不存在的方法被调用的时候，Ruby在抛出NoMethodError前首先检查此对象的类是否存在method_missing方法。method_missing的的第一个参数是被调用方法的名称；剩下的那些参数对应那些传递到被调用方法的参数。任何传递到方法的块也会被传递到method_missing方法。因此，一个完整方法的轮廓如下：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
def method_missing(method_id, *args, &amp;amp;block)&lt;br /&gt;
gem&lt;br /&gt;
end&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
使用method_missing有下面的几个缺点：&lt;br /&gt;
&lt;ul&gt;&lt;br /&gt;
	&lt;li&gt;在方法查找时它要比普通的方法慢。简单的测试表明用method_missing来调用方法的时间要比用常规方式进行调用多耗费两到三倍的时间。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;因为被调用的那些方法根本不实际存在，所以他们只有在方法查找整个过程的最后一步才能被截取到，也就是说它们不会像常规的方法那样被生成文档或者内省。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;因为所有的动态方法都必须通过method_missing方法，所以当一个方法含有各种各样代码，而这些代码又需要动态添加方法时其方法体将变得异常庞大。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;使用method_missing将限制其与API后续版本的兼容性。一旦依赖method_missing生成的那些未定义的方法来完成特定的操作后，在API的后续版本中引入的那些新方法也许会使你的用户失望。&lt;/li&gt;&lt;/p&gt;
&lt;/ul&gt;
&lt;p&gt;ActiveRecord中提供的generate_read_methods 特性是一个弥补这些缺失很好的替代方案。ActiveRecord 不是等待method_missing来截取方法调用而是自己实现了属性的设置和读取方法，这样它们就可以通过常规方法的分派来被调用了。&lt;/p&gt;
&lt;p&gt;总的来说这是个强大的方法，Ruby的动态本性使得那些方法在其被第一次调用时，用其更优化的版本来替代其本身成为可能。它也被用于要求迅速响应的Rails路由；我们将在本章的后续部分看到它的影子。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/delaying-method-lookup-until-runtime</link>
                <guid>http://liwei78.github.io/blog/delaying-method-lookup-until-runtime</guid>
                <pubDate>2008-10-27T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>闭包</title>
                <description>&lt;hr /&gt;
&lt;p&gt;在代码块或者过程访问定义在其作用范围以外的变量时，就会创建闭包（Closures）。即使包含原始变量的代码块已经超出作用范围了，但那些被其它块和过程引用的变量也会被一直被保留着，直到引用它们的块和过程全部超出作用范围。下面的这个极度简化的例子，虽然确实是没有什么实际的用途，但能够很好的解释上面的情景：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
def get_closure&lt;br /&gt;
  data = [1, 2, 3]&lt;br /&gt;
  lambda { data }&lt;br /&gt;
end&lt;br /&gt;
block = get_closure&lt;br /&gt;
block.call # =&amp;gt; [1, 2, 3]&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
从get_closure中的匿名方法（即lambda）返回的是定义在其作用范围外的局部变量data。只要块变量一直在作用范围内，它将保存其对data的引用，而且这个data的实例也不会被消除(即使get_closure方法已经返回)。需要注意的是每次get_closure被调用时，data将指向不同的变量(因为它是方法局部变量)：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
block = get_closure&lt;br /&gt;
block2 = get_closure&lt;br /&gt;
block.call.object_id # =&amp;gt; 76200&lt;br /&gt;
block2.call.object_id  # =&amp;gt; 76170&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
闭包的一个典型的例子就是make_closure方法，它返回一个累加方法，当被执行时进行累加并返回累加的当前值。在Ruby中，make_counter 实现代码如下：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
def make_counter(i=0)&lt;br /&gt;
  lambda { i += 1 }&lt;br /&gt;
end&lt;br /&gt;
x = make_counter&lt;br /&gt;
x.call # =&amp;gt; 1&lt;br /&gt;
x.call # =&amp;gt; 2&lt;br /&gt;
y = make_counter&lt;br /&gt;
y.call # =&amp;gt; 1&lt;br /&gt;
y.call # =&amp;gt; 2&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
lambda方法创建了一个闭包，它覆盖了局部变量i的当前值。该变量不仅可以被访问，其值亦可以被修改。每个闭包获得的是各自不同的变量实例（因为实例化make_counter的时候它们都是局部变量），因此x与y引用了不同的局部变量i的实例，这些实例拥有自己独立的状态。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/closure</link>
                <guid>http://liwei78.github.io/blog/closure</guid>
                <pubDate>2008-10-27T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>代码块转换为过程和过程转换为代码块</title>
                <description>&lt;hr /&gt;
&lt;p&gt;当前的Ruby实现有一点不足：Blocks代码块不总是Procs过程，Procs过程也不总是Blocks代码块。普通的代码块（定义在do…end 或者{}中）必须依附在一个方法调用上，而不能自动成为对象。例如，你不能把代码写成code_block = {puts “abc”}。这就是Kernel#lambda 和Proce.new 的用途：将代码块转换为过程。&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
block_1 = lambda { puts &amp;#8220;abc&amp;#8221; } # =&amp;gt; #&amp;lt;Proc:0&amp;#215;00024914&lt;code&gt;-:20&amp;gt;
block_2 = Proc.new { puts &quot;abc&quot; } # =&amp;gt; #&amp;lt;Proc:0x000246a8&lt;/code&gt;-:21&amp;gt;&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
Kernal#lambda与Proc.new之间仅存在着些许区别。由Kernel#lambda 创建的Proc被调用时返回给调用方法的值是在Proc中给定的值；而由Proc.new 创建的Proc被调用的时候，Proc将试图从当前的函数方法中返回，但是，如果不能从方法调用中返回那么它就抛出LocalJumpError错误。下面是一个具体的例子：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
def block_test&lt;br /&gt;
  lambda_proc = lambda { return 3 }&lt;br /&gt;
  proc_new_proc = Proc.new { return 4 }&lt;br /&gt;
  lambda_proc.call # =&amp;gt; 3&lt;br /&gt;
  proc_new_proc.call # =&amp;gt;&lt;br /&gt;
  puts &amp;#8220;Never reached&amp;#8221;&lt;br /&gt;
end&lt;br /&gt;
block_test # =&amp;gt; 4&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
lambda_proc 中的返回语句从lambda中返回3。相反地，proc_new中的返回语句是从函数方法返回，因此——block_test，其返回的值是4。那个puts 语句将永远不能被执行到，因为proc_new_proc.call 语句首先从block_test返回。&lt;/p&gt;
&lt;p&gt;通过将块传给一个方法，也能将其转换为过程，与常规的参数传递有所不同的是需要在其前面加上一个&amp;amp;符：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
def some_function(&amp;amp;b)&lt;br /&gt;
  puts &amp;#8220;Block is a #{b} and returns #{b.call}&amp;#8221;&lt;br /&gt;
end&lt;/p&gt;
&lt;p&gt;some_function { 6 + 3 }&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;&amp;gt;&amp;gt; Block is a #&amp;lt;Proc:0&amp;#215;00025774@-:7&amp;gt; and returns 9&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
相反的，可以将前面加了&amp;amp;符的过程传递给一个需要块作参数的方法：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
add_3 = lambda {|x| x+3}&lt;br /&gt;
(1..5).map(&amp;amp;add_3) # =&amp;gt; [4, 5, 6, 7, 8]&lt;br /&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;</description>
                <link>http://liwei78.github.io/blog/blocks-to-procs-and-procs-to-blocks</link>
                <guid>http://liwei78.github.io/blog/blocks-to-procs-and-procs-to-blocks</guid>
                <pubDate>2008-10-27T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>TextMate中文教程之文本选择器</title>
                <description>&lt;hr /&gt;
&lt;p&gt;编辑文本的第一部是选择它，选择一些文本之后你可以通过命令移动它，在搜索其中的代码或者干脆过滤删除掉它。这也是为什么TextMate尽可能简单的让你选择任意数量的文本的原因。&lt;/p&gt;
&lt;p&gt;首先俺要告诉你一个好消息，前几章里面讲的移动光标的快捷键在选择文本这里一样可以用哦。注意上文介绍的来自于Emacs的那些快捷键不能跟Shift共用。按住Shift键然后再利用移动光标的快捷键。根据光标位置的不同你就可以选取，扩大所选或者撤销所选的文本。下面举个例子&lt;br /&gt;
&lt;ol&gt;&lt;br /&gt;
	&lt;li&gt;按 Apple+右 把光标移动到行的末尾。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt; 按 Shift+Apple+左 选取从行末尾至行开头的全部文本。&lt;/li&gt;&lt;/p&gt;
&lt;/ol&gt;
&lt;p&gt;如果对你来说这一操作需要2步还太麻烦的话。你可以用自定义快捷键或者宏命令来简化。如果可能我会继续翻译那部分。不过那是很遥远很遥远的事啦。还好TextMate内置了这样一条命令，Shift+Apple+L可以选取当前行的文本。另外我个人介绍一个快捷键，Ctrl+W可以选择光标所在的单词。&lt;/p&gt;
&lt;p&gt;TextMate有一个唯一的内置选择器Current Scop，快捷键是Ctrl+Option+B。它根据当前文档的语法检查来改变选择范围。你可以使用这个快捷键来选择编程语言特有的元素。例如你可以像下图一样（说实话我很少用这个快捷键）。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102502.png&quot;&gt;&lt;img class=&quot;alignnone size-medium wp-image-193&quot; title=&quot;2008102502&quot; src=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102502-300x124.png&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;124&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;你可以在Edit &amp;#8594; Select下面找到全部内置的选择器。花点时间在这里，下次当你选择文本的时候你就知道你该用哪个快捷键了。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/making-selections</link>
                <guid>http://liwei78.github.io/blog/making-selections</guid>
                <pubDate>2008-10-25T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>TextMate中文教程之折叠代码片段</title>
                <description>&lt;hr /&gt;
&lt;p&gt;当你移动光标的时候，折叠代码片段不是必须的技术。但是如果你要在文档中跳过大段不需要的代码，或许他还是有用滴。&lt;/p&gt;
&lt;p&gt;当你用TextMate编辑一个它能理解的结构文档的时候，编辑窗口的左侧应该有一个折叠标记栏。使用View &amp;#8594; Gutter &amp;#8594; Foldings确认它已经显示出来。&lt;/p&gt;
&lt;p&gt;你可以单击折叠符号来选择展开或者折叠代码。也可以使用F1键来进行这一操作，F1会折叠目前光标所在一行的最接近的可折叠代码。如果你进行了这一操作，TextMate会把该代码片段折叠为一行，后面用省略号结尾。而且编辑窗口左侧的折叠符号也会相应的变化。&lt;/p&gt;
&lt;p&gt;如果你需要瞄一眼折叠了哪些代码，只需要把鼠标移动到省略号的位置就可以看到了。如下图。点一下省略号，或者把光标移动到折叠代码的这一行并且按F1，就可以展开代码。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102501.png&quot;&gt;&lt;img class=&quot;alignnone size-medium wp-image-189&quot; title=&quot;2008102501&quot; src=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102501-300x132.png&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;132&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;你可以使用View &amp;#8594; Toggle Foldings at Level或者快捷键来完成大部分的折叠和展开功能。根据文档类型，通常建议你用Option+Apple+2或者Option+Apple+3来折叠代码，尤其当你编辑的是Rails Controller的时候，这个快捷键尤其好用。根据文档嵌套层次的不同，你也可以使用其他数字键来配合使用。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/folding-sections-of-code</link>
                <guid>http://liwei78.github.io/blog/folding-sections-of-code</guid>
                <pubDate>2008-10-25T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>TextMate中文教程之列选择器</title>
                <description>&lt;hr /&gt;
&lt;p&gt;在传统的选择器基础上，TextMate允许你使用直角选择器或者列选择器。在你拖动鼠标进行选择的时候，可以按住Option键，这样就启用了直角选择器。也可以使用 Edit &amp;#8594; Change to Column Selection或者Option切换是否使用列选择器。&lt;/p&gt;
&lt;p&gt;下面的例子告诉你如何快速的产生一个名字列表：&lt;br /&gt;
&lt;ol&gt;&lt;br /&gt;
	&lt;li&gt;创建一个新的TextMate文档 File &amp;#8594; New 快捷键Apple+N&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;输入一些 ﬁrst names，每一个单独占一行。 Jim,Marsha, James, Dana, Andrew。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;Apple+上 移动光标到文档的开头&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;Shift+Option+下 选取到列结尾的全部文档。这个快捷键看起来好像没有选取整个列文档，但是由于你的倒数第二行有一个换行符。事实上列选择器已经扩展到最后一行的开头了。下一步会让这一切更清晰。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;按Option打开列选择器，仔细看你所有选取的列前面都有一列细线，大概1像素，这回知道了吧上一步已经选取了整个列。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;输入 last name 例如 Gray，随后跟一个逗号和空格。你会发现刚才选取的所有行同时都增加了。&lt;/li&gt;&lt;/p&gt;
&lt;/ol&gt;
&lt;p&gt;移动光标到新的一行，离开列选择器模式。&lt;/p&gt;
&lt;p&gt;令人惊讶的，当使用软包围行的时候列选择器会起冲突。和其它的编辑器不同，TextMate支持打开列选择器View &amp;#8594; Soft Wrap (Option+Apple+W)。然而，列选择器不会把包含的内容当作新行。勾选上View &amp;#8594; Gutter &amp;#8594; Soft Wrap Indicators 之后你可以通过编辑器窗口左边的原点看到哪一行被包含了。 （这一段翻译的不好，我自己也迷糊回头好好研究一下这个用法会修改）。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/column-selections</link>
                <guid>http://liwei78.github.io/blog/column-selections</guid>
                <pubDate>2008-10-25T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>1.2.4 变量查找</title>
                <description>&lt;hr /&gt;
&lt;p&gt;在Ruby中有四种类型的变量，它们是全局变量、类变量、实例变量及局部变量。全局变量作用于全局，局部变量只作用于局部，因此下面的讨论均不涉及它们，因为它们不与Ruby的类系统进行交互。&lt;br /&gt;
&lt;em&gt;注：还有常量，但是它们不应该被改变。（事实上可以改变，但是Ruby会发出警告。）&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;实例变量是与特定对象相关的。实例变量以一个@符号开始：@price既是一个实例变量。因为每个Ruby对象都有一个iv_tbl结构，所以任何一个对象都可以有实例变量。由于一个类也是一个对象，所以一个类亦可以拥有实例变量。下面的代码展示了如何访问一个类实例变量的方法：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
class A&lt;br /&gt;
  @ivar = &amp;#8220;Instance variable of A&amp;#8221;&lt;br /&gt;
end&lt;/p&gt;
&lt;p&gt;A.instance_variable_get(:&lt;code&gt;ivar) # =&amp;gt; &quot;Instance variable of A&quot;
&amp;lt;/pre&amp;gt;
实例变量总是基于self指针指向的对象来解析的。上面的代码，因为self是在class A … end中定义A的类对象，所以&lt;/code&gt;ivar又属于A的类对象。&lt;/p&gt;
&lt;p&gt;但是，类变量则不同。任何一个类的实例都可以访问其类变量（就是以@@开头的变量）。类变量也可以被其类定义自身所引用。虽然一个类变量和实例变量相似，但他们不是一回事：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
class A&lt;br /&gt;
  &lt;code&gt;var = &quot;Instance variable of A&quot;
  @&lt;/code&gt;var = &amp;#8220;Class variable of A&amp;#8221;&lt;br /&gt;
  def A.ivar&lt;br /&gt;
    &lt;code&gt;var
  end
  def A.cvar
    @&lt;/code&gt;var&lt;br /&gt;
  end&lt;br /&gt;
end&lt;/p&gt;
&lt;p&gt;A.ivar # =&amp;gt; &amp;#8220;Instance variable of A&amp;#8221;&lt;br /&gt;
A.cvar # =&amp;gt; &amp;#8220;Class variable of A&amp;#8221;&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
在这段代码示例中，@var 与@@var被存储在同一个地方：即A的iv_tbl。然而，他们是不同的变量，这是因为他们具有不同的名字（@符被当作变量名的一部分存储）。Ruby提供了一些方法用于检查被访问的实例变量和类变量，以便保传递中的变量名具有正确的格式：。&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
A.instance_variable_get(:@@var)&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;~&amp;gt; -:17:in `instance_variable_get&amp;#8217;: `&lt;code&gt;@var' is not allowed as an instance
    variable name (NameError)
&amp;lt;/pre&amp;gt;
类变量的使用有点让人疑惑。因为，它们被共享于整个继承链中，所以在子类中改变一个类变量时其父类的类变量值也被改变。
&amp;lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&amp;gt;
&amp;gt;&amp;gt; class A; @&lt;/code&gt;x = 3 end&lt;br /&gt;
=&amp;gt; 3&lt;br /&gt;
&amp;gt;&amp;gt; class B &amp;lt; A; &lt;code&gt;@x = 4 end
=&amp;gt; 4
&amp;gt;&amp;gt; class A; @&lt;/code&gt;x end&lt;br /&gt;
=&amp;gt; 4&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
这可能有用，但也可能令人迷惑。通常来说，你需要的会是类实例变量和ActiveSupport提供的可继承类属性（class inheritable attributes）这两者之一，前者独立于继承链，后者以一种受约束定义良好的方式在继承链中进行值传递。&lt;/li&gt;
&lt;/ol&gt;</description>
                <link>http://liwei78.github.io/blog/variable-lookup</link>
                <guid>http://liwei78.github.io/blog/variable-lookup</guid>
                <pubDate>2008-10-24T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>TextMate中文教程之在行，符号和书签之间移动</title>
                <description>&lt;hr /&gt;
&lt;p&gt;TextMate提供了快捷键让你明确定位。例如你想跳转到指定的行。利用快捷键Apple+L，然后输入行号再按回车就行。&lt;/p&gt;
&lt;p&gt;这个方法是挺好，但是实际应用中很少有人会这么用，因为你不可能一直都知道你要去操作第几行吧。好在几乎所有的文档都有自己的组织形式。拿Ruby代码来说，它们都是在一个function或者method定义里的。TextMate会注意到这些，并且用快捷键辅助你迅速定位。&lt;/p&gt;
&lt;p&gt;用鼠标点一下编辑窗口的右下角，那里列出了目前文档的header, class, method, 和 functio。随便选择一个，光标会定义到那一行的开头位置。看图：&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102402.png&quot;&gt;&lt;img class=&quot;alignnone size-medium wp-image-171&quot; title=&quot;2008102402&quot; src=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102402-300x140.png&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;140&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;但是在实际项目中，我们不会去常常拿鼠标选择这个地方。通常咱哥们都是用快捷键。Shift+Apple+T打开Navigation菜单中的Go to Symbol对话框。你可以用方向键来选择，也可以跟前面介绍的一样，使用缩写字母来选择某一个方法。例如输入s w r会选择save_without_revision( )。&lt;/p&gt;
&lt;p&gt;如果这些都不能满足你的需要，你可以自己定义书签。定义书签很简单，你可以用Apple+F2键为当前行定一个书签，或者用鼠标点行号前面那个位置。看下面的图。利用快捷键Option+Apple+B可以显示或者隐藏那个书签栏。如果当前页面你已经定义了几个书签那么可以使用F2或者Shift+F2在书签之间顺序或倒序切换。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102403.png&quot;&gt;&lt;img class=&quot;alignnone size-medium wp-image-172&quot; title=&quot;2008102403&quot; src=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102403-300x110.png&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;110&quot; /&gt;&lt;/a&gt;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/moving-to-a-line-symbol-or-bookmark</link>
                <guid>http://liwei78.github.io/blog/moving-to-a-line-symbol-or-bookmark</guid>
                <pubDate>2008-10-24T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>TextMate中文教程之移动光标</title>
                <description>&lt;hr /&gt;
&lt;p&gt;当你停止打字的时候，可能是需要操作光标了。发现上一行有一个错字，你有两个选择。要么用鼠标移动过去，要么用键盘移动光标到该错字的位置。你通常用哪个呢？想想，你的右手离开键盘到鼠标的时间再移动回来。每天你要为此多付出多少时间呢？所以用键盘来进行这一操作无疑是个好主意，TextMate也为这一过程提供了很多快捷键。别担心，他们都是很容易记忆的。&lt;/p&gt;
&lt;p&gt;这有一些白痴都知道的操作计算机的通用快捷键：&lt;/p&gt;
&lt;p&gt;方向键上 &amp;#8211; 光标移动到上一行&lt;br /&gt;
方向键下 &amp;#8211; 光标移动到下一行&lt;br /&gt;
方向键左 &amp;#8211; 光标往左移动一个字符&lt;br /&gt;
方向键右 &amp;#8211; 光标往右移动一个字符&lt;/p&gt;
&lt;p&gt;如果这些快捷键加上一个Apple键的话，那么它就会移动到一行甚至文档的边界了：&lt;/p&gt;
&lt;p&gt;Apple+方向键上 &amp;#8211; 光标移动到文档的开头&lt;br /&gt;
Apple+方向键下 &amp;#8211; 光标移动到文档的结尾&lt;br /&gt;
Apple+方向键左 &amp;#8211; 光标移动到本行的开头&lt;br /&gt;
Apple+方向键右 &amp;#8211; 光标移动到本行的结尾&lt;/p&gt;
&lt;p&gt;你也可以使用Option键&lt;/p&gt;
&lt;p&gt;Option+方向键上 &amp;#8211; 光标移动到列的开头&lt;br /&gt;
Option+方向键下 &amp;#8211; 光标移动到列的结尾&lt;br /&gt;
Option+方向键左 &amp;#8211; 光标移动到当前单词的开头&lt;br /&gt;
Option+方向键右 &amp;#8211; 光标移动到当前单词的结尾&lt;/p&gt;
&lt;p&gt;这里列的概念你可能搞不清，看一下下图，按Option+方向键下光标会从 “ﬁrst” 移动到 “data”。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102401.png&quot;&gt;&lt;img class=&quot;alignnone size-medium wp-image-167&quot; title=&quot;2008102401&quot; src=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102401-300x101.png&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;101&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;如果你是个程序员，可以试试用Ctrl代替Option。他会在 CamelCaseWords 和 snake_case_words 这类的单词之间切换。第一种呢，会依次切换光标到C,C,W。第二种呢会依次切换到s,c,w。&lt;/p&gt;
&lt;p&gt;可能你是一个emacs的支持者，没关系TextMate也支持那些你常用的快捷键：&lt;/p&gt;
&lt;p&gt;Ctrl+P &amp;#8211; 光标移动到上一行&lt;br /&gt;
Ctrl+N &amp;#8211; 光标移动到下一行&lt;br /&gt;
Ctrl+B &amp;#8211; 光标向左移动一个字符&lt;br /&gt;
Ctrl+F &amp;#8211; 光标向右移动一个字符&lt;br /&gt;
Ctrl+A &amp;#8211; 光标移动到该行开头&lt;br /&gt;
Ctrl+E &amp;#8211; 光标移动到该行结尾&lt;br /&gt;
Ctrl+V -光标移动到文档结尾&lt;/p&gt;
&lt;p&gt;这一章介绍滴这些快捷键在mac中的其他程序里面也能用到。比如Mail和Safari，所以好好记住它们吧。有个小提示，最后介绍的这些快捷键有可能跟你使用的TextMate的插件包冲突啊。比如Ctrl+P在Rails这个插件包就是prams[:id]的快捷键了。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/moving-around</link>
                <guid>http://liwei78.github.io/blog/moving-around</guid>
                <pubDate>2008-10-24T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>Method Missing</title>
                <description>&lt;hr /&gt;
&lt;p&gt;解决了前几篇所有的疑惑后，理解method_missing就变得非常简单。其准则是：如果整个方法查找过程中，直到到达了Object都以失败而告终，那么将再次执行方法查找，但这次查找的是method_missing方法而不是原来调用的方法。如果method_missing方法被找到，它将被传入原方法的调用参数并调用，原调用的代码块也会被传入method_missing方法。&lt;/p&gt;
&lt;p&gt;Object中的缺省method_missing（rb_method_missing）函数将抛出一个异常。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/method-missing</link>
                <guid>http://liwei78.github.io/blog/method-missing</guid>
                <pubDate>2008-10-24T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>1.2.5 代码块，方法和过程</title>
                <description>&lt;hr /&gt;
&lt;p&gt;Ruby中的一个强大的特性是有能力将一段代码当作一个对象来处理。这个特性涉及到如下三个类：&lt;br /&gt;
&lt;ul&gt;&lt;br /&gt;
	&lt;li&gt;&lt;strong&gt;Proc&lt;/strong&gt;  一个过程（Proc）代表了一个代码块：一段可以在被调用时接收参数并且有返回值的代码。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;strong&gt;UnboundMethod&lt;/strong&gt;  它类似于一个过程：它代表一个特定类的实例方法（类方法是类对象的实例方法，因此UnboundMethods同样也可以代表类方法）。一个UnboundMethod 能够在其被调用前必须绑定到一个类。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;strong&gt;Method&lt;/strong&gt;  Method对象是已经通过UnboundMethod#bind方法绑定到一个对象上的UnboundMethod。它也可以通过Object@method方法来得到。&lt;/li&gt;&lt;/p&gt;
&lt;/ul&gt;
&lt;p&gt;下面让我们来看看都有哪些途径能够获得Proc和Method对象。我们在例子中使用Fixnum#&lt;ins&gt;方法。我们通常通过二元形式来调用它。&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
3 + 5 # =&amp;gt; 8&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
然而，它也可以被当作Fixnum对象的一个实例方法来调用，就像任意其它实例方法一样：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
3.&lt;/ins&gt;(5) # =&amp;gt; 8&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
我们可以使用Object#method方法来获得一个表示这个实例方法的对象。这个方法将被绑定到方法被调用的那个对象上，在上面的例子中就是3。&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
add_3 = 3.method(:&lt;ins&gt;)&lt;br /&gt;
add_3 # =&amp;gt; #&amp;lt;Method: Fixnum#&lt;/ins&gt;&amp;gt;&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
此方法可被转换为一个块，或者可被直接带参数调用：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
add_3.to_proc # =&amp;gt; #&amp;lt;Proc:0&amp;#215;00024b08@-:6&amp;gt;&lt;br /&gt;
add_3.call(5) # =&amp;gt; 8&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Method#[] is a handy synonym for Method#call.&lt;br /&gt;
add_3&lt;sup class=&quot;footnote&quot; id=&quot;fnr5&quot;&gt;&lt;a href=&quot;#fn5&quot;&gt;5&lt;/a&gt;&lt;/sup&gt; # =&amp;gt; 8&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
有两种途径获得非绑定方法。可以在类对象上调用instance_method：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
add_unbound = Fixnum.instance_method(:&lt;ins&gt;)&lt;br /&gt;
add_unbound # =&amp;gt; #&amp;lt;UnboundMethod: Fixnum#&lt;/ins&gt;&amp;gt;&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
我们同样可以解绑定一个已经被绑定的对象的方法：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
add_unbound == 3.method(:+).unbind # =&amp;gt; true&lt;br /&gt;
add_unbound.bind(3).call(5) # =&amp;gt; 8&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
也可以绑定UnboundMethod到任何同类的其它对象。&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
add_unbound.bind(15)&lt;sup class=&quot;footnote&quot; id=&quot;fnr4&quot;&gt;&lt;a href=&quot;#fn4&quot;&gt;4&lt;/a&gt;&lt;/sup&gt; # =&amp;gt; 19&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
但是，目标绑定对象必须是一个同类的实例，否则会得到一个TypeError错误：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
add_unbound.bind(1.5)&lt;sup class=&quot;footnote&quot; id=&quot;fnr4&quot;&gt;&lt;a href=&quot;#fn4&quot;&gt;4&lt;/a&gt;&lt;/sup&gt; # =&amp;gt;&lt;/li&gt;
	&lt;li&gt;~&amp;gt; -:16:in `bind&amp;#8217;: bind argument must be an instance of Fixnum (TypeError)&lt;/li&gt;
	&lt;li&gt;~&amp;gt;     from -:16&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
得到这个错误是因为+被定义在了Fixnum类上；因此，获得到的UnboundMethod对象必须绑定到一个Fixnum对象（通过kind_of?方法来检验）。假如+ 方法在Numeric(Fixnum和Float都继承自它)上有定义，前述代码应该返回5.5。&lt;/li&gt;
&lt;/ol&gt;</description>
                <link>http://liwei78.github.io/blog/blocks-methods-and-procs</link>
                <guid>http://liwei78.github.io/blog/blocks-methods-and-procs</guid>
                <pubDate>2008-10-24T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>1.2.3 Metaid</title>
                <description>&lt;hr /&gt;
&lt;p&gt;“&lt;a href=&quot;http://whytheluckystiff.net/articles/seeingMetaclassesClearly.html&quot; target=&quot;_blank&quot;&gt;why the lucky stiff&lt;/a&gt;”为Ruby元编程创建了一个极小的库，叫做metaid.rb。在任何需要元编程的项目中都可以引进这段非常有用的代码：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
class Object&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;The hidden singleton lurks behind everyone&lt;br /&gt;
  def metaclass; class &amp;lt; &amp;lt; self; self; end; end&lt;br /&gt;
  def meta_eval &amp;blk; metaclass.instance_eval &amp;blk; end&lt;/li&gt;
	&lt;li&gt;Adds methods to a metaclass&lt;br /&gt;
  def meta_def name, &amp;amp;blk&lt;br /&gt;
    meta_eval { define_method name, &amp;amp;blk }&lt;br /&gt;
  end&lt;/li&gt;
	&lt;li&gt;Defines an instance method within a class&lt;br /&gt;
  def class_def name, &amp;amp;blk&lt;br /&gt;
    class_eval { define_method name, &amp;amp;blk }&lt;br /&gt;
  end&lt;br /&gt;
end&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
这个库在每个对象（函数调用接收者）上定义了四个方法：&lt;br /&gt;
&lt;ul&gt;&lt;br /&gt;
	&lt;li&gt;metaclass 指向接收者的单例类（self）&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;meta_eval 与单例类的class_eval等价。在接收者的单例类上下文中执行给定代码块。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;meta_def 在接收者的单例类中创建一个方法。如果接收者是一个类或者模块，那么创建出来的是类方法（即接收者的单例类的实例方法）。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;class_def 在接收者中创建一个实例方法（接收者必须是类或者模块）。&lt;/li&gt;&lt;br /&gt;
&lt;/ul&gt;&lt;br /&gt;
Metaid简短的代码却带来了不小的便利。通过使用这些简洁的方式来引用和增强元类，你的代码将变得比到处都放置诸如class &amp;lt;&amp;lt; self; self; end等代码更清晰。这些技巧越简洁易懂，你就越可能在自己的代码中恰到好处的使用它们。这个例子展示了如何使用Metaid来检查和简化对单例类的更改：&lt;br /&gt;
&lt;/pre&gt;&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
class Person&lt;br /&gt;
  def name; &amp;#8220;Bob&amp;#8221;; end&lt;br /&gt;
  def self.species; &amp;#8220;Homo sapiens&amp;#8221;; end&lt;br /&gt;
end&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
Person类的类方法作为其单例类的实例方法被添加：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
Person.instance_methods(false)             # =&amp;gt; [&amp;#8220;name&amp;#8221;]&lt;br /&gt;
Person.metaclass.instance_methods -&lt;br /&gt;
  Object.metaclass.instance_methods        # =&amp;gt; [&amp;#8220;species&amp;#8221;]&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
通过使用Metaid中提供的方法，我们的方法定义可以编写为如下形式：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
Person.class_def(:name) { &amp;#8220;Bob&amp;#8221; }&lt;br /&gt;
Person.meta_def(:species) { &amp;#8220;Homo sapiens&amp;#8221; }&lt;br /&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;</description>
                <link>http://liwei78.github.io/blog/123-metaid</link>
                <guid>http://liwei78.github.io/blog/123-metaid</guid>
                <pubDate>2008-10-24T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>TextMate中文教程之项目的文件夹引用</title>
                <description>&lt;hr /&gt;
&lt;p&gt;TextMate 支持两种项目。前面那章创建的是第一种项目，不管文件在硬盘上存在哪里只把它拖入到TextMate的边栏就可以。另外一种是保存文件系统。当你创建的项目文件在同一个文件夹里面，就创建了第二种项目。&lt;/p&gt;
&lt;p&gt;项目中的文件夹引用的是硬盘上的真实对象。这有两个好处。第一，当应用程序得到焦点的时候 TextMate 会自动扫描该文件夹，如果其中的内容有更改则自动更新文件。其次，边栏下面那个文件夹按钮会在硬盘上创建真实的文件夹。新创建的文件夹在你当前所选的文件夹之内。&lt;/p&gt;
&lt;p&gt;所以，你可以直接在TextMate里面操作和管理文件，而不用再跑到Finder里面去。所以我觉得还是第种组织项目的办法更棒。你慢慢会发现，整个项目处于同一个顶级文件夹是最方便的。因为你可以很方便的用svn来提交或者更新项目。很难想象，你把项目放到不同的文件夹去你该如何更新？麻烦死你！以后我会继续翻译如何用TextMate操作SVN命令，不过估计至少得2个月之后。哈哈。&lt;/p&gt;
&lt;p&gt;那什么时候采用文件和组的项目呢？当你想操作不同文件夹下面的文件或者想在边栏中从新排列文件但是不想影响硬盘上的实际对象时。读者可能被我绕晕了，没关系举个例子。假如你是一个CSSer，每天的任务可能就是给公司的10个项目修改CSS，那么你就可以建立一个名为CSS-Work的项目，把不同项目的css文件都拖放到边栏中，并且根据轻重缓急组成不同的分组。明白了？&lt;/p&gt;
&lt;p&gt;不论你采用的是哪种方式来组织项目文件，都可以使用边栏下面的Rename 或者 Remove Selected Files按钮。注意，根据你文件的组织方式不同。Remove Selected Files按钮可能仅仅是把文件从边栏里面删除或者是真的把它们扔到Trash去。&lt;/p&gt;
&lt;p&gt;当然你也可以用边栏下面那个创建文件的按钮，如果你使用的是文件夹引用的方式来管理项目文件。那你在TextMate里面创建的文件就会在你边栏所选的那个文件夹里面创建，同时TextMate会提示你在本地保存文件。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/textmate-folder-references</link>
                <guid>http://liwei78.github.io/blog/textmate-folder-references</guid>
                <pubDate>2008-10-23T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>TextMate中文教程之用快捷键创建项目</title>
                <description>&lt;hr /&gt;
&lt;p&gt;手动拖入文件和文件夹到TextMate项目中只是创建项目的一种方式，也是我最不常用的。有一个常用的办法是，把TextMate放到你的Dock上，确认TextMate处于运行中(看看你的Dock的TextMate图标下面有没有一个圆珠)。现在你可以把文件和文件夹拽到TextMate的图标上，它就会自动创建一个项目了，不过别忘了保存这个项目。不然你就白忙乎了。&lt;/p&gt;
&lt;p&gt;在Terminal中创建TextMate项目是俺最喜欢的形式。你可以在mate命令后跟随多个文件名，文件夹或者一个shell命令。它会自动创建一个包含这些文件的TextMate项目。样例代码如下：&lt;br /&gt;
&lt;pre class=&quot;ruby&quot;&gt;mate . # a project of the current directory&lt;br /&gt;
mate a.txt b.txt # a project of two files&lt;br /&gt;
mate *.csv # a project of &lt;span class=&quot;caps&quot;&gt;CSV&lt;/span&gt; files in the current directory&lt;/pre&gt;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/shortcuts-for-creating-projects</link>
                <guid>http://liwei78.github.io/blog/shortcuts-for-creating-projects</guid>
                <pubDate>2008-10-23T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>TextMate中文教程之在选取文件</title>
                <description>&lt;hr /&gt;
&lt;p&gt;项目中最重要的一点是快速访问项目中的文件。你可以用鼠标打开任何你需要打开的文件。TextMate中，如果你单击的是一个文本文件，单击会打开它。TextMate会根据文件的扩展名或者读取文件的前8KB来判断它是不是一个合法的UTF-8(&lt;span class=&quot;caps&quot;&gt;ASCII&lt;/span&gt;)文本。&lt;/p&gt;
&lt;p&gt;如果你需要更改TextMate和文件的关联类型，在边栏中选中文件，然后点边栏最下面的动作按钮选择 Treat Files with “ext” Extension as Binary/Text。这样TextMate就会记住这个文件类型的设置。在边栏中双击一个文件，会用默认关联的程序打开它，有可能不是TextMate。比如你在TextMate的边栏中双击了一个pdf文件，会用相关阅读器打开它。&lt;/p&gt;
&lt;p&gt;你可以在代码窗口和边栏之间迅速切换，快捷键是Ctrl+Tab。当边栏得到焦点的时候，你可以使用方向键上，下来移动选取，也可以用方向键右来展开一个文件夹或者用方向键左来折叠它们。当你选取了一个想打开的文件，按一下回车键就和单击鼠标一样会打开这个文件。当你选取了文件时，单击空格键就可以给文件改名。&lt;/p&gt;
&lt;p&gt;用上面介绍的方式来打开一个文件的确挺简单滴，但是如果你的项目有20个顶级文件夹和7000个文件。当你想这么打开一个文件或许累屁了。下面叫你一个简单滴方法。&lt;/p&gt;
&lt;p&gt;加入你知道你要打开的文件的名字，那么选择Navigation中的Go to File按钮(Apple+T)。在打开的对话框中输入文件名，在下方的文件列表中用方向键来选取文件并用回车来打开这个文件。你会发现这个功能比你想的还强大，例如你要打开的文件名是pitches_controller_test.rb，那么你只需要输入pct，下面的文件列表就会自动列出相关的文件(看图)。现在选择这个pitches_controller_test.rb，TextMate会记住你的这次操作。下次你再用这个功能的时候，当你输入pct那么pitches_controller_test.rb会自动列到第一项来。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102302.gif&quot;&gt;&lt;img class=&quot;alignnone size-medium wp-image-95&quot; title=&quot;2008102302&quot; src=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102302-300x221.gif&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;221&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;当你打开了7.8个文件咋整呢？就像Firefox能切换标签页一样。TextMate也让你这么干。你可以用Apple+数字键1-9来切换不同的代码窗口。也可以用Option+Apple+方向键左右来切换(看图)。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102301.gif&quot;&gt;&lt;img class=&quot;alignnone size-medium wp-image-96&quot; title=&quot;2008102301&quot; src=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102301-300x175.gif&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;175&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;等等，我知道看这个文章的你跟我一样也是一个傻了吧机的程序员。那么还有一个快捷键你能用的上，那就是Option+Apple+方向键上。它会在你项目中的同名（但扩展名不同）的文件之间切换。举个例子，你可以用这个快捷键在项目中的 widget.h 和  widget.c 之间切换。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/moving-between-files</link>
                <guid>http://liwei78.github.io/blog/moving-between-files</guid>
                <pubDate>2008-10-23T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>1.2.2 方法查找(2)</title>
                <description>&lt;hr /&gt;
&lt;h4 style=&quot;vertical-align:middle;&quot;&gt;单例类&lt;/h4&gt;
&lt;p&gt;单例类（又称元类或者本征类，请参阅下面的“单例类术语”解释）允许一个对象的行为能够区别于同一类的其他对象的行为。你以前可能已经见过打开单例类的一些语句了：&lt;br /&gt;
&lt;strong&gt;单例类术语&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;将元类这个术语用在单例类上似乎并不很准确。当称一个类为“元”的时候意味着它在某种意义上比普通的类更抽象。但也有例外，单例类仅仅是属于某特定实例的一个类。&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;真正的元类见于诸如提供了丰富的元对象协议的Smalltalk等语言中。Smalltalk的元类本身就是类而且其实例也是类。同样的，Ruby中唯一一个元类是Class，因为在Ruby中的所有类均是Class的实例。&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;另一个较普遍的用于替代单例类的术语叫做本征类，它源于德语eigen（意为“它自己的”）。一个对象的元类就是它的本征类（它自己的类）。&lt;/em&gt;&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;class A&lt;br /&gt;
end&lt;/p&gt;
&lt;p&gt;objA = A.new&lt;br /&gt;
objB = A.new&lt;/p&gt;
&lt;p&gt;objA.to_s # =&amp;gt; &amp;#8220;#&lt;A:0x1cd0a0&gt;&amp;#8221;&lt;br /&gt;
objB.to_s # =&amp;gt; &amp;#8220;#&lt;A:0x1c4e28&gt;&amp;#8221;&lt;/p&gt;
&lt;p&gt;class &amp;gt;&amp;gt; objA #打开objA的单例类&lt;br /&gt;
  def to_s; &amp;#8220;Object A&amp;#8221;; end&lt;br /&gt;
end&lt;/p&gt;
&lt;p&gt;objA.to_s # =&amp;gt; &amp;#8220;Object A&amp;#8221;&lt;br /&gt;
objB.to_s # =&amp;gt; &amp;#8220;#&lt;A:0x1c4e28&gt;&amp;#8221;&lt;/pre&gt;&lt;br /&gt;
class &amp;gt;&amp;gt; objA 表示打开objA的单例类。添加到单例类的实例方法与查找链路上的实例方法是一样的。其数据结构如图所示&lt;br /&gt;
&lt;a href=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102310.gif&quot;&gt;&lt;img class=&quot;alignnone size-medium wp-image-132&quot; title=&quot;2008102310&quot; src=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102310-286x300.gif&quot; alt=&quot;&quot; width=&quot;286&quot; height=&quot;300&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;上例中的objB是类A的一个实例。如果你问Ruby解释器，它将会告诉你objA也是类A的实例：&lt;br /&gt;
&lt;pre class=&quot;ruby&quot;&gt;objA.class # =&amp;gt; A&lt;/pre&gt;&lt;br /&gt;
然而这仅仅是表象，其背后隐藏着其他的一些情况。另一个类对象已经被插入到查找链路中了。它就是objA的单例类。本文当中将其标识为“Class：objA”。Ruby也给他起了一个相似的名字：#&amp;lt;Class:#&lt;A:0x1cd0a0&gt;&amp;gt;。与所有的其它类一样，单例类的klass指针（未显示出来）也指向Class对象。&lt;/p&gt;
&lt;p&gt;单例类在此被标记为虚类（flags中的一个标记位被用来标识其为一个虚类）。虚类不能被实例化，而且一般来说在Ruby中看不到它，除非我们特意去找它。当我们问Ruby objA的类是哪个的时候，它将跟随klass和super指针的继承路径上溯到第一个非虚类为止。&lt;/p&gt;
&lt;p&gt;因此，Ruby将告诉我们objA的类是A。需要记住的一点是：一个对象的类可能与klass指向的对象并不一致。单例类之所以称其为单例是是因为每个对象仅有一个单例类。这样，我们才能够毫无歧义的找到“objA的单例类”或者Class:objA。在我们的代码中可以假设单例类确实存在；但事实上考虑到执行效率，它只有在第一次使用的时候才被创建。&lt;/p&gt;
&lt;p&gt;Ruby允许单例类被创建在除了Fixnums和symbol的任意对象上。Fixnums和symbol是立即值(immediate values)（为了提高执行效率，它们本身将被直接存入到内存中，而不是用一个指针指向其数据结构）。因为它们自身被保存了进去，所以它们是没必要拥有klass指针的，进而也没有办法改变其方法查找路径。&lt;/p&gt;
&lt;p&gt;你可以为true，false或者nil创建单例类，但是被返回的单例类与该对象原来的类一样。这些值分别是TrueClass，FalseClass及NilClass的单例实例（仅有的实例）。当你询问true的单例类是什么的时候，你将会得到TrueClass，因为立即值true是TrueClass唯一可能的实例。在Ruby中：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;true.class # =&amp;gt; TrueClass&lt;br /&gt;
class &amp;lt;&amp;lt; true; self; end # =&amp;gt; TrueClass&lt;br /&gt;
true.class == (class &amp;lt;&amp;lt; true; self; end) # =&amp;gt; true&lt;/pre&gt;&lt;br /&gt;
h4. 类对象的单例类&lt;/p&gt;
&lt;p&gt;这一节会比较复杂。要时刻记得方法查找的基本规则：首先Ruby根据对象的klass指针指向的对象进行方法查找；然后Ruby继续沿着查找链中的super指针的方向查找，直到找到合适的方法或者到达到最顶层。&lt;/p&gt;
&lt;p&gt;需要牢记的另一重要事项就是类本身也是对象。就像传统的对象有一个单例类一样，类对象亦有其自己的单例类。这些单例类也可以象所有其他对象一样能够有各种各样的方法。既然一个类对象可以通过其klass指针来访问它的单例类，那么单例类的实例方法也就是这个类对象的类方法。下一段代码的完整数据结构如图所示：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;class A&lt;br /&gt;
end&lt;/pre&gt;&lt;br /&gt;
&lt;a href=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102311.gif&quot;&gt;&lt;img class=&quot;alignnone size-medium wp-image-144&quot; title=&quot;2008102311&quot; src=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102311-282x300.gif&quot; alt=&quot;&quot; width=&quot;282&quot; height=&quot;300&quot; /&gt;&lt;/a&gt;&lt;br /&gt;
类A继承自Object。A的类对象就是Class类型。Class继承自Module而Module继承自Object。存储在A的m_tbl中的方法是A的实例方法。那么当在A上调用一个类方法将发生什么呢？&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;A.to_s # =&amp;gt; &amp;#8220;A&amp;#8221;&lt;/pre&gt;&lt;br /&gt;
将A作为接收者并以相同的方法查找规则进行方法的查找。（记住，A是一个代表A的类对象的常量）首先Ruby根据A指向Class的klass指针，在Class的m_tbl中查找名字为to_s的方法。没有查找到，Ruby继续跟随Class指向Module的super指针，在此处找到了to_s方法(在原始代码中为rb_mod_to_s)。&lt;/p&gt;
&lt;p&gt;请不要感到惊奇，也没什么不可思议的。类方法可以被像实例方法相同的方式查找的到——唯一不同的是判断接收是类还是类的一个实例。&lt;/p&gt;
&lt;p&gt;到现在为止我们已经知道类方法是如何被查找到的，这给了我们这样一种印象，那就是，似乎可以通过在Class对象（将它们插入到Class的m_tbl）上定义实例方法来达到在任何类上定义更多类方法。事实上，确实也是这样的：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;class A; end&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;from Module#to_s&lt;br /&gt;
A.to_s # =&amp;gt; &amp;#8220;A&amp;#8221;&lt;br /&gt;
class Class&lt;br /&gt;
  def to_s; &amp;#8220;Class#to_s&amp;#8221;; end&lt;br /&gt;
end&lt;br /&gt;
A.to_s # =&amp;gt; &amp;#8220;Class#to_s&amp;#8221;&lt;/pre&gt;&lt;br /&gt;
这是个非常有趣的小技巧，但实用程度很有限。通常我们希望在每个类中定义其独有的类方法。在这个时候类对象的单例类就要被用到了。为了开启一个类的单例类，只需要在定义单例类的语句中将类名当作对象传递给进去就可以了：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;class A; end&lt;br /&gt;
class B; end&lt;br /&gt;
class &amp;lt;&amp;lt;A&lt;br /&gt;
  def to_s; &amp;#8220;Class A&amp;#8221;; end&lt;br /&gt;
end&lt;br /&gt;
A.to_s # =&amp;gt; &amp;#8220;Class A&amp;#8221;&lt;br /&gt;
B.to_s # =&amp;gt; &amp;#8220;B&amp;#8221;&lt;/pre&gt;&lt;br /&gt;
其结果数据结构如图所示。为了清晰起见，在这里类B被省略了。&lt;br /&gt;
&lt;a href=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102311.png&quot;&gt;&lt;img class=&quot;alignnone size-medium wp-image-145&quot; title=&quot;2008102311&quot; src=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102311-300x212.png&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;212&quot; /&gt;&lt;/a&gt;&lt;br /&gt;
to_s方法被加到A的单例类或者Class:A。现在，当调用A.to_s的时候，Ruby将跟随A指向Class:A的klass指针并且调用相适应的方法。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;在方法定义中还有一点需要指出：在类或者模块的定义中，self总是指向类或模块对象：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;class A&lt;br /&gt;
  self # =&amp;gt; A&lt;br /&gt;
end&lt;/pre&gt;&lt;br /&gt;
因为在内部A与self均指向同一个对象，所以在A的类定义中，class &amp;lt;&amp;lt; A 也可以被 写为class &amp;lt;&amp;lt; self。这种惯用法在Rails的类方法定义中随处可见。下例将展示定义类方法的所有方式：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;class A&lt;br /&gt;
  def A.class_method_one; &amp;#8220;Class method&amp;#8221;; end&lt;br /&gt;
  def self.class_method_two; &amp;#8220;Also a class method&amp;#8221;; end&lt;br /&gt;
  class &amp;lt;&amp;lt; A&lt;br /&gt;
    def class_method_three; &amp;#8220;Still a class method&amp;#8221;; end&lt;br /&gt;
  end&lt;br /&gt;
  class &amp;lt;&amp;lt; self&lt;br /&gt;
    def class_method_four; &amp;#8220;Yet another class method&amp;#8221;; end&lt;br /&gt;
  end&lt;br /&gt;
end&lt;br /&gt;
def A.class_method_five&lt;br /&gt;
  &amp;#8220;This works outside of the class definition&amp;#8221;&lt;br /&gt;
end&lt;br /&gt;
class &amp;lt;&amp;lt; A&lt;br /&gt;
  def A.class_method_six&lt;br /&gt;
    &amp;#8220;You can open the metaclass outside of the class definition&amp;#8221;&lt;br /&gt;
  end&lt;br /&gt;
end&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Print the result of calling each method in turn&lt;br /&gt;
%w(one two three four five six).each do |number|&lt;br /&gt;
  puts A.send(:&amp;#8220;class_method_#{number}&amp;#8221;)&lt;br /&gt;
end&lt;/li&gt;
	&lt;li&gt;&amp;gt;&amp;gt; Class method&lt;/li&gt;
	&lt;li&gt;&amp;gt;&amp;gt; Also a class method&lt;/li&gt;
	&lt;li&gt;&amp;gt;&amp;gt; Still a class method&lt;/li&gt;
	&lt;li&gt;&amp;gt;&amp;gt; Yet another class method&lt;/li&gt;
	&lt;li&gt;&amp;gt;&amp;gt; This works outside of the class definition&lt;/li&gt;
	&lt;li&gt;&amp;gt;&amp;gt; You can open the metaclass outside of the class definition&lt;/pre&gt;&lt;br /&gt;
这也意味着在一个单例类的定义中——就像在任何其他类的定义一样——self指向被定义的类对象。既然代码块或类定义的返回值是最后一条语句执行的返回值，那么class &amp;lt;&amp;lt; objA; self; end 的值就是objA的单例类。代码class &amp;lt;&amp;lt; objA将开启单例类，self（即单例类）就是从类定义中返回的。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;将他们放在一起，我们能够开发Object类，可以添加一个实例方法到那些能够返回对象单例类的对象上：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;class Object&lt;br /&gt;
  def metaclass&lt;br /&gt;
    class &amp;lt;&amp;lt; self&lt;br /&gt;
       self&lt;br /&gt;
    end&lt;br /&gt;
  end&lt;br /&gt;
end&lt;/pre&gt;&lt;br /&gt;
此方法奠定了Metaid的基础，稍后将详述之。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/method-lookup-2</link>
                <guid>http://liwei78.github.io/blog/method-lookup-2</guid>
                <pubDate>2008-10-23T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>1.2.2 方法查找(1)</title>
                <description>&lt;hr /&gt;
&lt;p&gt;Ruby中的方法查找可以让人很困惑，但它却非常有规律。理解复杂情况的最简单方法就是将Ruby在后台创建的数据结构直观化。每个Ruby对象在内存中都有一个域的集合：&lt;br /&gt;
&lt;em&gt;注：除了立即对象（immediate objects），如Fixnums，symbols，true，false和nil；我们在后面会介绍这些。&lt;/em&gt;&lt;br /&gt;
&lt;ul&gt;&lt;br /&gt;
	&lt;li&gt;&lt;strong&gt;klass&lt;/strong&gt; 指向这个对象的类对象的指针。（它是klass而不是class，这是因为后者在Ruby和C++中是保留字；如果叫做class，Ruby将用C编译器而不是用C++编译器编译。这些有意的误拼在Ruby的每个地方都有使用）。&lt;/li&gt;&lt;/p&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;strong&gt;iv_tbl&lt;/strong&gt; “实例变量表”，是一个包含了属于此对象实例变量信息的哈希表。&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt; &lt;strong&gt;flags&lt;/strong&gt; 一个比特组，含有一些状态信息的布尔值，例如对象是否被污染，垃圾收集标记位，以及对象是否被冻结等。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;每个Ruby类或模块不但具有上边的这些域，它们还有另外两个域：&lt;br /&gt;
&lt;ul&gt;&lt;br /&gt;
	&lt;li&gt;&lt;strong&gt;m_tbl&lt;/strong&gt; “方法表”,一个包含了类或者模块中的所有实例方法信息的哈希表。&lt;/li&gt;&lt;/p&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt; &lt;strong&gt;super&lt;/strong&gt; 指向此类或者模块的超类的指针。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这些域在方法查找中扮演重要的角色，理解这些都非常必要。要特别指出的是，你应该密切关注klass与类对象的super指针之间的区别。&lt;br /&gt;
h4. 规则&lt;/p&gt;
&lt;p&gt;方法查找规则非常简单，但需要知道Ruby数据结构是如何工作的。当一个消息发送到一个对象时，将会有下面的这些步骤依次发生：&lt;br /&gt;
&lt;em&gt;注：Ruby中通常使用Smalltalk的消息传递术语，当一个方法被调用时，被叫做在发送一个消息，消息接收者是这个消息被发送到的对象。&lt;/em&gt;&lt;br /&gt;
&lt;ol&gt;&lt;br /&gt;
	&lt;li&gt;Ruby 根据接收者的klass 指针指向的对象中搜索m_tbl 中的方法并进行匹配。（klass 指针的目标总是一个类对象）&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;如果没有发现匹配的方法，Ruby将进而根据此类对象的super指针指向的超类m_tbl中继续搜索。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;Ruby以这种方式处理直到方法被找到或者直到到达了超类链的顶端。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;如果在此链的所有对象上都未发现有匹配的方法，Ruby在原有方法调用者上调用method_missing 方法。这将重新开始上边的那些处理过程，但这次是查找method_mssing而不是原来的那个方法了。&lt;/li&gt;&lt;/p&gt;
&lt;/ol&gt;
&lt;p&gt;这些规则应用的很普遍。所有这些在方法寻找中涉及到的有趣事情（混合，类方法，及自由类）都是因为有了klass和super指针。现在开始将更细致的讨论这个过程。&lt;br /&gt;
h4. 类继承&lt;/p&gt;
&lt;p&gt;方法寻找过程可能会很让人困惑，所以我们要从简单的开始。下面的代码是Ruby中最简单的类定义：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;class A&lt;br /&gt;
end&lt;/pre&gt;&lt;br /&gt;
这段代码在内存中将生成下面这样的数据结构&lt;br /&gt;
&lt;a href=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102303.gif&quot;&gt;&lt;img src=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102303-300x160.gif&quot; alt=&quot;&quot; title=&quot;2008102303&quot; width=&quot;300&quot; height=&quot;160&quot; class=&quot;alignnone size-medium wp-image-114&quot; /&gt;&lt;/a&gt;&lt;br /&gt;
上图是单个类的数据结构。双线边的方框表示类对象——它的klass指针指向Class 对象。A的super指针指向的是Object类对象，表示A继承了Object。为了清晰起见，从现在开始我们将在不会引起歧义的地方忽略指向Class，Module及Object的默认klass指针。&lt;/p&gt;
&lt;p&gt;其次简单的情况是从一个类进行继承。类的继承简单的遵循了super指针的指向。例如，我们将创建一个继承自类A的类B：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;class B &amp;lt; A&lt;br /&gt;
end&lt;/pre&gt;&lt;br /&gt;
这段代码的最终数据结构如图&lt;br /&gt;
&lt;a href=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102304.gif&quot;&gt;&lt;img src=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102304-124x300.gif&quot; alt=&quot;&quot; title=&quot;2008102304&quot; width=&quot;124&quot; height=&quot;300&quot; class=&quot;alignnone size-medium wp-image-118&quot; /&gt;&lt;/a&gt;&lt;br /&gt;
super 关键字总是指示出方法查找的链路方向，以下面的代码为例：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
class B&lt;br /&gt;
  def  initialize&lt;br /&gt;
    logger.info “Creating 8 object”&lt;br /&gt;
    super&lt;br /&gt;
  end&lt;br /&gt;
end&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
在initialize方法中的super调用将遵循标准的方法查找链，以A#initialize开始。&lt;br /&gt;
h4. 类的实例化&lt;/p&gt;
&lt;p&gt;现在我们有机会看看方法查找是如何进行的了。首先创建类B的一个实例：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
obj = B.new&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
这将创建一个新的对象并且设置其klass指针指向B的类对象（见图）。&lt;br /&gt;
&lt;a href=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102305.gif&quot;&gt;&lt;img src=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102305-300x299.gif&quot; alt=&quot;&quot; title=&quot;2008102305&quot; width=&quot;300&quot; height=&quot;299&quot; class=&quot;alignnone size-medium wp-image-120&quot; /&gt;&lt;/a&gt;&lt;br /&gt;
在单边方框中的obj表示一个传统意义上（plain-old）的对象实例。需要注意的是图中的每个方框都是一个对象实例。不过双线方框代表的是Class类的实例对象（因此它们的klass指针指向Class对象）。&lt;/p&gt;
&lt;p&gt;当发送一个消息到obj时&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
obj.to_s&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
将遵循下面的这些链路：&lt;br /&gt;
&lt;ol&gt;&lt;br /&gt;
	&lt;li&gt;obj的klass指针将传递到B；在B所拥有的方法（在m_tbl中）中查找匹配的方法。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;如果在B中没有找到相应的方法，那么将根据B的super指针指向的对象进行搜索，也就是在A中搜索相应的方法。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;如果在A中仍然没有发现有相应的方法，那么将在A的super指针指向的对象中进行查找，即在Object中进行查找。&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;Object类在其原生代码（rb_any_to_s）中含有to_s方法。它将被调用并且产生一个类似于“#&lt;b:0x1cd3c0&gt;” 的值。rb_any_to_s 方法检查接收者的klass指针以便决定要显示哪个类的名字；因此，虽然被调用的方法存在于Object中但仍然显示为B。&lt;/li&gt;&lt;/p&gt;
&lt;/ol&gt;
&lt;h4&gt;模块的引入&lt;/h4&gt;
&lt;p&gt;当我们利用模块进行mixin的时候情况将变得更加复杂。Ruby使用ICLASSes 来处理模块的引入，这是模块的代理。当将一个模块引入到类的时候，一个代表了被引入模块的ICLASS 将被Ruby插到引用此模块的类对象的super链路上。&lt;/p&gt;
&lt;p&gt;在下面的模块引入示例中，为了简单起见这里暂时忽略了B的存在。先定义一个模块并将其混入A，这将生成如图1-4的数据结构：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
module Mixin&lt;br /&gt;
  def mixed_method&lt;br /&gt;
    puts &amp;#8220;Hello from mixin&amp;#8221;&lt;br /&gt;
  end&lt;br /&gt;
end&lt;br /&gt;
class A&lt;br /&gt;
  include Mixin&lt;br /&gt;
end&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
&lt;a href=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102306.gif&quot;&gt;&lt;img src=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102306-290x300.gif&quot; alt=&quot;&quot; title=&quot;2008102306&quot; width=&quot;290&quot; height=&quot;300&quot; class=&quot;alignnone size-medium wp-image-122&quot; /&gt;&lt;/a&gt;&lt;br /&gt;
从这儿开始ICLASS将登堂入室开始发挥起作用。从A指向Object的super链路被一个新的ICLASS阻隔了开来（即图中的虚线方框）。ICLASS是Mixin模块的代理，它包含指向Mixin的iv_tbl（实例变量）和 m_tbl（方法）的指针。&lt;/p&gt;
&lt;p&gt;从图上可以很容易的看得出为什么需要代理类；这是因为同样的一个模块可能被任意多个不同的类混合而且这些类可能继承自其它的不同类（这样它们就有了不同的super指针）。将Mixin直接插入到查找链路是不合适的，因为当他被两个拥有不同父类的类混合时其super指针将不得不指向两个不同的物体。&lt;/p&gt;
&lt;p&gt;实例化后的A类，其结构如图所示：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
objA = A.new&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
&lt;a href=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102307.gif&quot;&gt;&lt;img src=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102307-300x202.gif&quot; alt=&quot;&quot; title=&quot;2008102307&quot; width=&quot;300&quot; height=&quot;202&quot; class=&quot;alignnone size-medium wp-image-123&quot; /&gt;&lt;/a&gt;&lt;br /&gt;
在objA上调用混合方法mixed_method:&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
objA.mixed_method&lt;br /&gt;
#&amp;gt;&amp;gt;Hello from mixin&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
将有下面的方法查找过程发生：&lt;br /&gt;
&lt;ol&gt;&lt;br /&gt;
&lt;li&gt;objA的类，即在A专用查找匹配的方法。将不会找到匹配的方法。&lt;/li&gt;&lt;br /&gt;
&lt;li&gt;根据A的super指针指向的Mixin的代理ICLASS中进行查找，看看是否有匹配的方法。因为代理的m_tbl与Mixin的m_tbl一模一样，所以mixed_method方法将被查找到并进行调用。&lt;/li&gt;&lt;/p&gt;
&lt;/ol&gt;
&lt;p&gt;在很多种编程语言中的多重继承都深受菱形难题的困扰，它是指当解析一个对象上的方法调用的时候发现此对象的类拥有一个菱形的继承路径，而这将导致解析过程中出现不二意性，如下图所示。&lt;br /&gt;
&lt;a href=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102308.gif&quot;&gt;&lt;img src=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102308-300x280.gif&quot; alt=&quot;&quot; title=&quot;2008102308&quot; width=&quot;300&quot; height=&quot;280&quot; class=&quot;alignnone size-medium wp-image-129&quot; /&gt;&lt;/a&gt;&lt;br /&gt;
如图，如果通过类D的一个对象调用定义在类A中的一个方法，而类A中的这个方法被B和C都进行覆盖，这样就产生了歧义，系统不知道到底调用哪个方法了。Ruby是通过线性化引入的顺序来解决这个问题的。当进行方法调用的时候，查找链以线性的方式搜索，当然也包括那些被插入到查找链路中的ICLASS。&lt;/p&gt;
&lt;p&gt;首先，Ruby不支持多重继承；然而，多个模块可以被混入到类中或者其他的模块中。因此，A、B、及C必须是模块。可以看出这样就没有歧义发生了，这是因为被选择为调用的方法是最后一个被插入到查找链路的那个：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
module B&lt;br /&gt;
  include A&lt;br /&gt;
  def hello&lt;br /&gt;
    &amp;#8220;Hello from B&amp;#8221;&lt;br /&gt;
  end&lt;br /&gt;
end&lt;br /&gt;
module C&lt;br /&gt;
  include A&lt;br /&gt;
  def hello&lt;br /&gt;
    &amp;#8220;Hello from C&amp;#8221;&lt;br /&gt;
  end&lt;br /&gt;
end&lt;br /&gt;
class D&lt;br /&gt;
  include B&lt;br /&gt;
  include C&lt;br /&gt;
end&lt;br /&gt;
D.new.hello # =&amp;gt; &amp;#8220;Hello from C&amp;#8221;&lt;br /&gt;
&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;如果将引入的顺序改变一下其输出结果也会相应的改变：&lt;br /&gt;
&lt;pre name=&quot;code&quot; class=&quot;ruby&quot;&gt;&lt;br /&gt;
class D&lt;br /&gt;
  include C&lt;br /&gt;
  include B&lt;br /&gt;
end&lt;br /&gt;
D.new.hello # =&amp;gt; &amp;#8220;Hello from B&amp;#8221;&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
在最后的这个示例中，B被最后引入，那么其对象图将与如下图所示的一致（简单起见，指向Object与Class的指针在此被省略了）。&lt;br /&gt;
&lt;a href=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102309.gif&quot;&gt;&lt;img src=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102309-300x202.gif&quot; alt=&quot;&quot; title=&quot;2008102309&quot; width=&quot;300&quot; height=&quot;202&quot; class=&quot;alignnone size-medium wp-image-130&quot; /&gt;&lt;/a&gt;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/method-lookup-1</link>
                <guid>http://liwei78.github.io/blog/method-lookup-1</guid>
                <pubDate>2008-10-23T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>TextMate中文教程之限制文件夹引用</title>
                <description>&lt;hr /&gt;
&lt;p&gt;当把文件夹引入TextMate项目中的时候，你可以过滤一部分不需要的文件和文件夹。如果你的项目是通过分组来组织项目文件的话，这个功能你就用不了啦，当然你也可以手动来完成。选中你项目边栏中的顶级文件夹，然后点边栏右下角那个 information按钮，看图：&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102320.png&quot;&gt;&lt;img class=&quot;alignnone size-medium wp-image-160&quot; title=&quot;2008102320&quot; src=&quot;http://railser.cn/wp-content/uploads/2008/10/2008102320-300x173.png&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;173&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这里有两个地方可以输入正则表达式来过滤，用正则来过滤掉那些你不希望出现在边栏列表里面的文件吧。贼拉方便。你也可以修改TextMate的属性，用快捷键Apple+,打开属性窗口选择文件夹设置。你可以在这里同样用正则来修改其中的内容。它不会影响目前的项目。&lt;/p&gt;
&lt;p&gt;何时用这个功能？比如我有一个Rails项目叫做simple。它位于版本控制之下，我可以过滤掉这个项目中的script,log,tmp和doc文件夹。至少我一直都是这么干的。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/limiting-folder-references</link>
                <guid>http://liwei78.github.io/blog/limiting-folder-references</guid>
                <pubDate>2008-10-23T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>1.2.1 类和模块</title>
                <description>&lt;hr /&gt;
&lt;p&gt;类（class）和模块（module）是Ruby面向对象编程的基础。类主要负责封装及分离事物。模块则用于mixin——将一系列功能打包添加到类上为该类增加新行为，可以代替多重继承。模块也可用来将类分隔到不同的命名空间中。&lt;/p&gt;
&lt;p&gt;在Ruby中，每个类名都是一个常量，因此Ruby要求类名必须以大写字母开始。此常量代表类对象，也就是一个Class类的对象，但它区别于“Class”对象，后者表示真正的Class类。当我们说“class object”（小写的c）的时候是指任何一个表示类的对象（包括Class自己）。当我们说“Class object”（大写的C）的时候是指Class 类，它是所有类对象的超类。&lt;br /&gt;
注：如果我们还不够迷糊的话——Class对象也有Class类。&lt;/p&gt;
&lt;p&gt;Class类继承自Module类；每个类也都是一个模块。但是有个非常重要的区别。类不能mixin到其它类中，也不能扩展对象；只有模块可以这么做。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/class-and-module</link>
                <guid>http://liwei78.github.io/blog/class-and-module</guid>
                <pubDate>2008-10-23T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>1.1.2 警告 和 1.1.3 自底向上编程</title>
                <description>&lt;hr /&gt;
&lt;p&gt;警告：重写自身的代码可能会非常难以编写和维护。你所选择的编程工具应该切合你的编程需要——它们带给你更多的便利而不是更繁琐。这里介绍的技术应该成为你工具箱中的更多工具之一，而不是唯一的工具。&lt;/p&gt;
&lt;p&gt;自底向上编程是从Lisp世界借用过来的一个概念。其根本的思想就是从最底层开始建立抽象。先构建好最底层的结构之后，本质上你就是在基于这些抽象来构建其余的程序了。从某种意义上讲，你构建程序的过程就是在编写一种特定领域语言(domain-specific language)，然后用这种语言来实现你的程序。&lt;/p&gt;
&lt;p&gt;此概念在ActiveRecord中极度的有用。在建立了基本的schema和model对象后，你就可以开始基于此来搭建抽象了。许多Rails 项目都是这样，在还没有编写一行controller代码，甚至在没有进行Web 界面的设计的时候，就已开始了基于模型进行抽象的工作了。&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Order&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:Base&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;has_many&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:line_items&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;total&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;subtotal&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;shipping&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tax&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;subtotal&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;line_items&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:price&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;shipping&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;shipping_base_price&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line_items&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:shipping&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;tax&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;subtotal&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;TAX_RATE&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
                <link>http://liwei78.github.io/blog/bottom-up-programming</link>
                <guid>http://liwei78.github.io/blog/bottom-up-programming</guid>
                <pubDate>2008-10-23T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>1.1 什么是元编程？</title>
                <description>&lt;hr /&gt;
&lt;p&gt;从今天开始，我将陆续在这里复制别人翻译好的书。这是很无耻的一件事，但是为了流量。我就无耻一把了。翻译者如果看到本文，有权利要求我删除相关内容。希望你们看不到。&lt;/p&gt;

																																&lt;ul&gt;
																																	&lt;li&gt;我 是 分 割 线 *********************************&lt;/li&gt;
																																&lt;/ul&gt;&lt;p&gt;Rails 使元编程变得大众化。虽然它肯定不是第一个利用Ruby的广泛功能进行内省（introspection）的应用，但它却很可能是最受欢迎的Ruby应用。为了理解Rails，我们必须首先搞清楚Ruby中使Rails的实现变为可能的那些部分。本章介绍了后文中讨论的技术的基础。&lt;/p&gt;
&lt;p&gt;元编程是一种使用代码来编写其它代码以及进行自省的编程技术。Meta（源于希腊语）这个前缀在这里的意思是抽象。使用了元编程技术的代码在两个抽象层次上同时进行工作。&lt;/p&gt;
&lt;p&gt;元编程技术在多种编程语言中都可以使用，但更多的还是被应用于动态语言中，因为动态语言提供了更多的在运行时将代码视为数据进行操纵的能力。虽然像C#和Java这样较为静态的语言也提供了反射机制，但是仍然没有诸如Ruby这样的更趋动态性的语言那么透明，这是因为静态语言在运行时其代码和数据是分布在两个层次上的。&lt;/p&gt;
&lt;p&gt;自省通常是在这两个层次上的某一个层上完成的。语法层的自省是最底层的——直接检查程序文本或者符号流。基于模板和基于宏的元编程一般来说都是在语法层进行的。&lt;/p&gt;
&lt;p&gt;Lisp 通过既可以用于代码也可以用于数据的S表达式（本质上是程序抽象语法树的直接翻译）支持语法层的元编程。Lisp的元编程大量的使用了宏，宏的本质是代码模板。Lisp的这种方式带来的好处是可以在单一的层次上进行编程，代码及数据都以相同的方式表现，唯一的区别在于是否会被估值（evaluate）。然而语法层的元编程模式也有其弊端，用在同一命名空间下运行和估值的代码对两个抽象层次进行操作，会直接导致变量捕获（Variable Capture）和不经意的多次估值这类问题的出现。纵使有标准的Lisp惯用法可以处理这些问题，Lisp程序员仍然是需要学习和考虑更多的东西。&lt;/p&gt;
&lt;p&gt;Ruby可以通过ParseTree库来完成语法层的自省，ParseTree可以将Ruby源代码翻译成&lt;a href=&quot;http://www.zenspider.com/ZSS/Products/ParseTree&quot; target=&quot;_blank&quot;&gt;S表达式&lt;/a&gt;。使用此库来编写的一个有趣的应用叫做&lt;a href=&quot;http://rubyforge.org/projects/seattlerb&quot; target=&quot;_blank&quot;&gt;Heckle&lt;/a&gt;，它是一个“测试的测试”框架，能够对Ruby代码解析及改变，例如改变字符串或者将‘true’和‘false’进行来回的调换。其想法是如果测试覆盖率很好，那么对代码任何部分的任何变更都应该导致单元测试的失败。&lt;/p&gt;
&lt;p&gt;与语法自省相对应的一种更高层次的自省叫做语义自省，既通过语言更高层次的数据结构对程序进行探查。在不同的编程语言中语义自省的方式十分不同，在Ruby语言中一般来说都是作用于类及方法层上：创建方法，重写方法，给方法赋予别名（alias）；截取方法调用；操纵继承链。这些技术和语法层自省相比与已有的代码更为正交（相关度更小），因为它们倾向于将已存在的方法视为黑盒而不是修改其内部实现。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/what-is-metaprogramming</link>
                <guid>http://liwei78.github.io/blog/what-is-metaprogramming</guid>
                <pubDate>2008-10-22T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>1.1.1 别重复自己</title>
                <description>&lt;hr /&gt;
&lt;p&gt;站在更高的角度看可以发现元编程对实现DRY（Don’t Repeat Yourself）原则很有帮助，该原则也被称作“一次且仅仅一次（Once and Only Once）”，DRY原则主张在系统中要表达的一则特定信息只需要出现一次就足够了。重复往往是没必要的，特别是诸如Ruby这样的动态语言。就像函数化抽象可以使我们得以避免重复编写相同或者相似的代码一样，元编程使得我们可以避免重复那些在整个应用中多次出现的概念。&lt;/p&gt;
&lt;p&gt;元编程主要是为了简单化。体验元编程技术最简单的方法之一就是寻找出重复的代码并将其提取出来。多次重复的代码可被抽取为函数；多次重复的函数或模式通常可以通过使用元编程将其提取出来。&lt;/p&gt;
&lt;p&gt;在这里所说的设计模式是几个领域的交集；模式的设计是为了将解决同一问题时需要重复的次数降低到最小。在Ruby社区中，设计模式没有获得很好的评价。对于一些开发人员来说，模式仅仅是一个很普通的词汇，它用于描述应用中重复出现的问题的解决方案。对于另外的一些开发人员来说，它们则太过工程化了。&lt;/p&gt;
&lt;p&gt;固然，模式可能被过度的使用，但是明智的使用则另当别论。设计模式到目前为止只是在减少认知复杂性方面非常有用。在Ruby中，一些细粒度的模式因为其透明性非常高，已不适于称其“模式”了；它们事实上已经成为一种习惯用法，大多数 “以Ruby方式思考（think in Ruby）” 的程序员都会不加思索的使用它们。模式应该被当作描述架构的一个词汇，而不是实现了某种解决方案的一个预先打包好的库文件。从这个角度想，好的Ruby设计模式与好的C++设计模式相比有非常大的差别。&lt;/p&gt;
&lt;p&gt;元编程通常不应该被简单的用来减少代码重复。你应该经常评估是否有另外的技术选择能更好的解决问题，例如函数化抽象。但是，在少数情况下通过使用元编程来减少重复代码是最佳的解决方式。例如，当几个非常相似的函数必须得定义在相同的一个对象上时，就像ActiveRecord helper方法，元编程就可以发挥其作用了。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/don-not-repeat-yourself</link>
                <guid>http://liwei78.github.io/blog/don-not-repeat-yourself</guid>
                <pubDate>2008-10-22T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>TextMate中文教程之创建项目</title>
                <description>&lt;hr /&gt;
&lt;p&gt;用TextMate创建项目是贼简单的。你可以创建一个空的项目并往里面放你需要的文件。选择File下的New Project (Ctrl+Apple+N)。空白的项目创建之后，有一个很大的提示告诉你如何操作下一步。就像它说的一样，随便把一些文件拖拽到那个边栏里面，他就会成为你项目中的文件并且一直显示在边栏里面了。&lt;/p&gt;
&lt;p&gt;你可以用鼠标拖拽的方式操作边栏里面的文件。也可以用边栏下面那个文件夹按钮来创建一个文件夹。按住Apple键并且选择多个文件然后点边栏下面的那个动作菜单里面的Group Selected Files命令，就可以把这些文件搞成一个分组。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/2008/10/group-select-files.gif&quot;&gt;&lt;img class=&quot;alignnone size-medium wp-image-87&quot; title=&quot;group-select-files&quot; src=&quot;http://railser.cn/wp-content/uploads/2008/10/group-select-files-300x200.gif&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;200&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;你可以选择是否显示边栏，快捷键是Ctrl+Option+Apple+D。当你的TextMate窗口靠右侧的时候，边栏会自动出现在左侧，反之亦然。而且它会自动记录你边栏是出现在哪一侧的，下次仍然会出现在那一侧。&lt;/p&gt;
&lt;p&gt;最后你可以保存项目了，快捷键是Ctrl+Apple+S&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/creating-a-project</link>
                <guid>http://liwei78.github.io/blog/creating-a-project</guid>
                <pubDate>2008-10-22T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>EZAdmin，一个简易的asp企业站管理后台</title>
                <description>&lt;hr /&gt;
&lt;p&gt;置顶：&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/index.php/blog/git-tutorial-cn&quot; target=&quot;_self&quot;&gt;Git：中文教程及资料整理&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/index.php/blog/sql-hacks-tips-tools-for-digging-into-your-data&quot; target=&quot;_self&quot;&gt;&lt;span class=&quot;caps&quot;&gt;SQL&lt;/span&gt; Hacks：100个业界最尖端的技巧和工具&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;最近的两个月，偶尔有公司的asp网站单子做做。刚开始是发来一些原来的企业站后台，在基础上改改。但是状况是：所有这些后台都是改了N遍，代码早已面目全非，更别说什么div+css，只要能完成客户要求，谁管什么代码。所以，在那个基础上改，等于自残。&lt;/p&gt;
&lt;p&gt;所以在改了一套之后，（具体说是三个网站）之后，开始准备自己的一个企业站后台。其实是在一个自己改过N遍的基础页面框架上，加入自由的设定方法。&lt;/p&gt;
&lt;p&gt;原来的框架好处在于比较舒服，是见过的所有后台最舒服的。而且这个框架该过N遍，已经变成自己的了，现在差的是整理一下，去掉多余代码，并且重新构架一遍页面。&lt;/p&gt;
&lt;p&gt;所以，有了这个EZAdmin。&lt;a href=&quot;http://railser.cn/wp-content/uploads/2008/08/ezadmin.rar&quot; target=&quot;_blank&quot;&gt;点击下载&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;登陆：liwei/liwei&lt;/p&gt;
&lt;p&gt;功能：&lt;/p&gt;
&lt;p&gt;1、新闻列表和单页采用同一个数据库&lt;/p&gt;
&lt;p&gt;2、使用fckeditor，可以让任何维护人员粘贴word，excel这种格式的内容，或者直接粘贴其他页面内容。实现在一个大编辑框内设计要求的页面。（大多数企业站的维护人员只懂word和excel，或复制粘贴）&lt;/p&gt;
&lt;p&gt;3、每个新闻有自己的单张图片上传和单个文件上传&lt;/p&gt;
&lt;p&gt;4、产品表与新闻表分离&lt;/p&gt;
&lt;p&gt;TODO：&lt;/p&gt;
&lt;p&gt;1、马上要在新的单子要求里，增加会员管理功能&lt;/p&gt;
&lt;p&gt;2、会加一个留言板功能。&lt;/p&gt;
&lt;p&gt;说明：&lt;/p&gt;
&lt;p&gt;1、这个版本根本不会有什么完成版，稳定版。因为它存在于大大小小的N多网站中，没有网站会完整到下载的状态。这个程序是给咱们&lt;span style=&quot;color: #ff6600;&quot;&gt;伟大的程序员&lt;/span&gt;朋友的，节省大家的时间（如果你真的需要并且真的节省了时间的话）。&lt;/p&gt;
&lt;p&gt;2、这个版本没有完全查错，只要客户没提我就不改了。&lt;/p&gt;
&lt;p&gt;3、里面的fckeditor是我删减后的，原版下载请到官网。并且这个版本的上传已经改成asp方式，默认是php的。&lt;/p&gt;
&lt;p&gt;4、下载的朋友，这个程序需要你修改的地方很多，几乎就是方便一次次的就该而做的。所以&lt;span style=&quot;color: #0000ff;&quot;&gt;asp修改有障碍&lt;/span&gt;的朋友，请认真考虑哦。使用了这个程序的朋友，请留言，提供嗷嗷宝贵的意见。&lt;/p&gt;
&lt;p&gt;ps：工作笔记而已&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/ezadmin</link>
                <guid>http://liwei78.github.io/blog/ezadmin</guid>
                <pubDate>2008-08-29T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>Git：中文教程及资料整理</title>
                <description>&lt;hr /&gt;
&lt;p&gt;写在前面：在忙于生计的一段时间里，Rails升级到2.1，并且带来了一个新的工具：git。忽然之间，git成了专心开发的朋友们的话题。我由于不专心，所以没有去更多的关注它，最多知道它是一个新的版本控制工具。&lt;/p&gt;
&lt;p&gt;我依旧在用svn和code.google.com，并且把几个asp的网站也放了上去，连一直在研究的comsenz的UCHome也放上去，原因是：我需要知道我几天前改了什么。但是就是这样长期依赖svn，对git还是没有立刻转变过来。（脑袋比较直）。所以从吃完晚饭到现在，我才明白一些git的东西。现在整理一下吧。&lt;/p&gt;
&lt;p&gt;1、工具&lt;/p&gt;
&lt;p&gt;git自然不必说，但是我是windows系统，所以需要windows的git。可怕的是当我听说git的时候，就被告知git只能在linux下。但是随着时间迅速的推进，这个问题已经是2个月，甚至是更长时间之前的问题了。不要被google和baidu忽悠，他们告诉我的资料明显记载着很久以前的日期。&lt;/p&gt;
&lt;p&gt;在windows上使用git，我安装的是 &lt;a href=&quot;http://code.google.com/p/msysgit/&quot; target=&quot;_self&quot;&gt;msysgit&lt;/a&gt; ，被它先入为主了。这样在目标文件夹上，多出了Git Gui Here和Git Bash Here两个命令。（这不是具体的使用教程，我想能用到git的朋友也绝非新人了。呵呵。在此只是个人笔记分享一下，绝无说教之意。）&lt;/p&gt;
&lt;p&gt;2、教程&lt;/p&gt;
&lt;p&gt;baidu一下找到了&lt;a href=&quot;http://www.bitsun.com/documents/gittutorcn.htm&quot; target=&quot;_self&quot;&gt;Git中文教程&lt;/a&gt;，不过职业习惯让我看了一下最后，写的“Last updated 27-Mar-2006 15:20:34 &lt;span class=&quot;caps&quot;&gt;UTC&lt;/span&gt; ”表明，这篇文章是2年多前的了。而其他的文章多数是爬虫的结果，看着难受。&lt;/p&gt;
&lt;p&gt;官网上的教程是最新的，更新日期为2008-7-15&lt;/p&gt;
&lt;p&gt;官网：&lt;a href=&quot;http://www.kernel.org/pub/software/scm/git/docs/gittutorial.html&quot; target=&quot;_self&quot;&gt;git tutorial(7) Manual Page &lt;/a&gt;&lt;/p&gt;
&lt;p&gt;对于linux来说，看它的速度远不如自己机器上 man 一下，可惜我是windowsgem。当然bash上git help git 也可以找到帮助手册。不过就两篇教程来说，官网的更加易懂，按照步骤操作一下，也就明白什么是git了。对于git，本人明白后发现自己最大的误解是：git 不是 svn 。&lt;/p&gt;
&lt;p&gt;3、资料&lt;/p&gt;
&lt;p&gt;官网上的资料比较全啦，不找啦。&lt;br /&gt;
&lt;div class=&quot;sectionbody&quot;&gt;&lt;br /&gt;
&lt;div class=&quot;para&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.kernel.org/pub/software/scm/git/docs/gittutorial-2.html&quot;&gt;gittutorial-2(7)&lt;/a&gt;, &lt;a href=&quot;http://www.kernel.org/pub/software/scm/git/docs/gitcvs-migration.html&quot;&gt;gitcvs-migration(7)&lt;/a&gt;, &lt;a href=&quot;http://www.kernel.org/pub/software/scm/git/docs/gitcore-tutorial.html&quot;&gt;gitcore-tutorial(7)&lt;/a&gt;, &lt;a href=&quot;http://www.kernel.org/pub/software/scm/git/docs/gitglossary.html&quot;&gt;gitglossary(7)&lt;/a&gt;, &lt;a href=&quot;http://www.kernel.org/pub/software/scm/git/docs/everyday.html&quot;&gt;Everyday git&lt;/a&gt;, &lt;a href=&quot;http://www.kernel.org/pub/software/scm/git/docs/user-manual.html&quot;&gt;The Git User&amp;#8217;s Manual&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;补充几句：那篇虽然是2年前的中文教程，但是内容还是很精要的。一些命令已经改动，读的时候小心。比如 git status。难怪我最开始的时候总是不成功呢。呵呵&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;</description>
                <link>http://liwei78.github.io/blog/git-tutorial-cn</link>
                <guid>http://liwei78.github.io/blog/git-tutorial-cn</guid>
                <pubDate>2008-08-17T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>新的Flex框架Mate</title>
                <description>&lt;hr /&gt;
&lt;p&gt;一、Mate，新的Flex框架&lt;/p&gt;
&lt;p&gt;google mail的确是个有好东西，尤其是google快讯，长期以来每天都把最新的资讯按照订阅的关键词发给我，一致每天早上都要花个时间来看看。（当然，最近直接标注为已读）&lt;/p&gt;
&lt;p&gt;今天收到的一个内容，讲到了最新的Flex框架 Mate，infoQ的文章（&lt;a href=&quot;http://www.infoq.com/cn/news/2008/07/mate-flex-framework-alpha&quot; target=&quot;_blank&quot;&gt;Flex框架Mate的Alpha版闪亮登场&lt;/a&gt;），将资料整理一下，方便阅读。&lt;/p&gt;
&lt;p&gt;教程：&lt;a href=&quot;http://www.flashmagazine.com/Reviews/detail/mate_event_driven_framework_for_flex/&quot; target=&quot;_blank&quot;&gt;Mate: Event driven framework for Flex&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;官网：&lt;a href=&quot;http://mate.asfusion.com/&quot;&gt;http://mate.asfusion.com&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;文档：&lt;br /&gt;
&lt;ul&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a href=&quot;http://mate.asfusion.com/page/documentation/getting-started&quot;&gt;Getting Started&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a href=&quot;http://mate.asfusion.com/page/documentation/overview&quot;&gt;Overview&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a href=&quot;http://mate.asfusion.com/page/documentation/tags&quot;&gt;Tags&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a href=&quot;http://mate.asfusion.com/page/documentation/best-practices&quot;&gt;Best Practices&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a href=&quot;http://mate.asfusion.com/page/documentation/how-to&quot;&gt;How to&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a href=&quot;http://mate.asfusion.com/page/documentation/diagrams&quot;&gt;Diagrams&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a href=&quot;http://mate.asfusion.com/api_docs&quot;&gt;&lt;span class=&quot;caps&quot;&gt;API&lt;/span&gt; Docs&lt;/a&gt;&lt;/li&gt;&lt;/p&gt;
&lt;/ul&gt;
&lt;p&gt;二、Netbeans的6.5M1&lt;/p&gt;
&lt;p&gt;地址：&lt;a href=&quot;http://bits.netbeans.org/download/6.5/m1/&quot;&gt;http://bits.netbeans.org/download/6.5/m1/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;jp说6.5很好，于是今天装了看，的确不错。有2个深色的颜色方案也挺好看。（我以前没用过，故意的）。其他的还得接着用用看来。&lt;/p&gt;
&lt;p&gt;三、好消息，明天开始做一个Rails项目了，希望能是一个长久的项目，毕竟跟人说我做的Rails项目都挂了，人家会觉得我比较丧。&lt;/p&gt;
&lt;p&gt;四、google快讯可以定制 &lt;a name=&quot;baidusnap0&quot;&gt;&lt;/a&gt;&lt;strong style=&quot;color: black; background-color: #ffff66;&quot;&gt;site:railser.cn* 形式的关键词，这样会很快的告诉我网站的收录情况。自恋吧。&lt;/p&gt;
&lt;p&gt;五、&lt;a href=&quot;http://advancedrails.com/&quot;&gt;http://advancedrails.com&lt;/a&gt; 继续找Rails新书和技术博客整理，&lt;a href=&quot;../&quot;&gt;http://railser.cn&lt;/a&gt; 继续做中文的开发笔记。&lt;/p&gt;
&lt;p&gt;六、刚才看到，wordpress2.6放出来了&lt;/p&gt;
&lt;p&gt;下载：&lt;a href=&quot;http://wordpress.org/latest.zip&quot;&gt;http://wordpress.org/latest.zip&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://weblogtoolscollection.com/archives/2008/06/30/what-you-need-to-know-about-wordpress-26/&quot;&gt;What You Need To Know About WordPress 2.6 &lt;/a&gt;?&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/mate-event-driven-framework-for-flex</link>
                <guid>http://liwei78.github.io/blog/mate-event-driven-framework-for-flex</guid>
                <pubDate>2008-07-15T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>近期计划及以往技术网站连接整理</title>
                <description>&lt;hr /&gt;
&lt;p&gt;我是个soho的人，所以计划常会变动，这从博客上可以看出来。如果我经常的写自以为不错的东西出来，说明我手头没有项目。如果我每隔几天写点东西 出来，但是又不关于技术，说明我的手头的工作比较凌乱，不需要大块的时间研究，但是需要经常的处于工作状态。如果我好几天什么都没写，说明我很忙，忙到没 心情写。&lt;/p&gt;
&lt;p&gt;所以，这个博客，需要有心情来维护。&lt;/p&gt;
&lt;p&gt;今天在考虑要不要给博客换一个更适合目前工作的域名，或者重新开一个空间。但是喝咖啡的时候想应该，但是现在想又无所谓，因为我也不知道下个月这个 时候还在做什么东西。我倒是希望全身心的投入到Rails的开发中，可是哪有这样的机会呢？一个好的项目，一个好的报酬，一个优秀的合作团队，唉，可遇不 可求的。&lt;/p&gt;
&lt;p&gt;所以，soho依然在继续，就证明工作状态还是不稳定。&lt;/p&gt;
&lt;p&gt;说别的。&lt;/p&gt;
&lt;p&gt;最近的工作和php有关，在脑袋中也在整理一些工作经验，可是感觉作用不大。国内的php项目虽好，可是整体上不够健全，比如，没有版本库，比如，没有Rails好。&lt;/p&gt;
&lt;p&gt;这有点苛刻了，但是相对Rails开发中的得心应手，php的产品二次开发，明显跟不上自己的需求。于是经常怀念Rails开发经历。&lt;/p&gt;
&lt;p&gt;再说别的。&lt;/p&gt;
&lt;p&gt;Comsenz的产品的确不错，discuz论坛也是垄断地位，所以打算长期的做其系列产品的二次开发。包括：&lt;br /&gt;
&lt;ol&gt;&lt;br /&gt;
	&lt;li&gt;Discuz论坛安装，维护&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;UC，UCHome，及Supesite UC 版的建站&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;皮肤设计（还需要时间研究）&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;各种插件方案的研究和使用（目前知道了Cyask for UC，不过需要时间深入下）&lt;/li&gt;&lt;/p&gt;
&lt;/ol&gt;
&lt;p&gt;前年听说曾经的雪人论坛的开发者，加入了discuz！的开发，现在感觉到了discuz或者comsenz的强大。有谁还记得雪人论坛呢？曾经的2.5版本，就是我asp的入门教程。现在想想，还有好多不会呢。&lt;/p&gt;
&lt;p&gt;先到这吧。wordpress很好，但是是不是只实用于我们这边穷酸的技术人员呢？&lt;/p&gt;
&lt;p&gt;下面的连接，是以前一点点发现和保存的，Rails技术网站，外国的居多。&lt;/p&gt;
&lt;p&gt;技术类网站的连接&lt;br /&gt;
&lt;ul&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a href=&quot;http://blog.zmok.net/&quot; target=&quot;_blank&quot;&gt;/bin/recykl&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a href=&quot;http://bencurtis.com/&quot;&gt;BenCurtis&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a href=&quot;http://chinaonrails.com/&quot; target=&quot;_blank&quot;&gt;ChinaonRails&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.danielfischer.com/&quot;&gt;Daniel Fischer&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.flexiblerails.com/&quot; target=&quot;_blank&quot;&gt;Flexible Rails&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a href=&quot;http://flexonrails.net/&quot; target=&quot;_blank&quot;&gt;FlexOnRails&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a href=&quot;http://mvolo.com/blogs/serverside/default.aspx&quot; target=&quot;_blank&quot;&gt;&lt;span class=&quot;caps&quot;&gt;IIS&lt;/span&gt; 7.0 Server-Side&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.letrails.cn/&quot; target=&quot;_blank&quot;&gt;LetRails&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a title=&quot;The Official Flex User Group for Orange County, California.&quot; href=&quot;http://www.ocflex.com/&quot; target=&quot;_blank&quot;&gt;OC Flex&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a href=&quot;http://osflash.org/&quot;&gt;OSFlash&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a href=&quot;http://pepcode.com/&quot; target=&quot;_blank&quot;&gt;peepcode&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.railsenvy.com/&quot; target=&quot;_blank&quot;&gt;RailsEnvy&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a href=&quot;http://railsexpress.de/blog/&quot; target=&quot;_blank&quot;&gt;RailsExpress&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.riaforge.org/&quot; target=&quot;_blank&quot;&gt;RIAForge&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a href=&quot;http://robbin.javaeye.com/&quot; target=&quot;_blank&quot;&gt;Robbin的自言自语&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a href=&quot;http://seoonrails.com/&quot; target=&quot;_blank&quot;&gt;SEOonRails&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.onflex.org/&quot; target=&quot;_blank&quot;&gt;Ted On Flex&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a href=&quot;http://therailsway.com/&quot; target=&quot;_blank&quot;&gt;TheRailsWay&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a href=&quot;http://blog.vixiom.com/&quot; target=&quot;_blank&quot;&gt;vixiom axioms&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a href=&quot;http://agilewebdevelopment.com/&quot; target=&quot;_blank&quot;&gt;敏捷web开发&lt;/a&gt;&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;&lt;a href=&quot;http://hhtong.com/&quot; target=&quot;_blank&quot;&gt;道喜技术日记&lt;/a&gt;&lt;/li&gt;&lt;/p&gt;
&lt;/ul&gt;
&lt;p&gt;感慨一下：当技术人员真的很难，所以未全身心入行的朋友慎入，在有些时候，卖报纸都比这个职业要好。因为落寞的生活，不知道会持续多久，你能坚持的住吗？不要看人家外国做这一行的有多风光，这跟中国足球一样，在巴西业余队踢球的人，来中国也成了某超级队的主力。&lt;/p&gt;
&lt;p&gt;“生南则为桔”啊。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/rails-tech-blogs-links</link>
                <guid>http://liwei78.github.io/blog/rails-tech-blogs-links</guid>
                <pubDate>2008-05-27T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>2008年5月12日下午2点28分，汶川地震</title>
                <description>&lt;hr /&gt;
&lt;h1 style=&quot;vertical-align:middle;color: &amp;#39;black&amp;#39;;&quot;&gt;2008年5月12日下午2点28分&lt;/h1&gt;
&lt;h2 style=&quot;color: &amp;#39;black&amp;#39;;&quot;&gt;汶川&lt;/h2&gt;
&lt;p&gt;一、博客又换服务器了&lt;/p&gt;
&lt;p&gt;这回不是linux系统，所以原来的文章地址的解析暂时无法解决，只能用官方说的丑陋方式了。会妥善解决的。&lt;/p&gt;
&lt;p&gt;二、从下周开始又回到Rails的研究上了&lt;/p&gt;
&lt;p&gt;三、别问我有没有Rails作品，我说没有，我可能会做一些方案研究和文章的翻译。如果能加入项目开发，我也会找一个有价值的项目。&lt;/p&gt;
&lt;p&gt;四、会继续整理关于Flex开发的资料&lt;/p&gt;
&lt;p&gt;五、终于下载了李宗盛的《理性与感性作品音乐会》的dvd，这是音乐上的享受。静茹唱了林忆莲的几首歌，但是在所有人的眼中，看到的都是往事吧。&lt;/p&gt;
&lt;p&gt;李宗盛也调侃，有些歌不能随便唱，兆头不好。&lt;/p&gt;
&lt;p&gt;六、地震的感想不多写了&lt;/p&gt;
&lt;p&gt;七、明天开始三天，全国哀悼日。soho工作还会继续，日子是留给活着的人继续的。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/2008-5-12-wenchuan</link>
                <guid>http://liwei78.github.io/blog/2008-5-12-wenchuan</guid>
                <pubDate>2008-05-18T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>IM集成开发补充</title>
                <description>&lt;hr /&gt;
&lt;p&gt;写在前面：&lt;/p&gt;
&lt;p&gt;这《&lt;a href=&quot;http://railser.cn/archives/im-integration&quot; target=&quot;_blank&quot;&gt;IM集成开发&lt;/a&gt;》那篇博客，主要是翻译了rubyfleebie.com里面的两篇文章，以及对一些资料的整理。不过在IM集成开发上，还有一篇补充需要整理一下。&lt;a href=&quot;http://www.rubyfleebie.com/im-integration-with-xmpp4r-2-mistakes-to-avoid/&quot; target=&quot;_blank&quot;&gt;原文&lt;/a&gt;的标题叫“使用XMPP4R进行IM集成开发时需要避免的两个错误”。&lt;/p&gt;
&lt;p&gt;错误一：在Rails下运行XMPP4R&lt;/p&gt;
&lt;p&gt;作者提到，不要将XMPP4R放到你的vender目录中，不要指望在你的Rails项目中也运行着XMPP服务。因为web服务是无状态的，在一个请求结束后，web服务会和客户端断开。而XMPP服务的原理不是这样，所以你应该建立一个独立的项目，比如叫做listener，来完成XMPP的工作。&lt;/p&gt;
&lt;p&gt;不过要注意不要犯下面的错误。&lt;/p&gt;
&lt;p&gt;错误二：在listener中写入商业逻辑&lt;/p&gt;
&lt;p&gt;Rails才是你真正的核心，而这个listener的工作只需要很简单：&lt;/p&gt;
&lt;p&gt;1、接受input&lt;/p&gt;
&lt;p&gt;2、将消息发给Rails应用&lt;/p&gt;
&lt;p&gt;3、将Rails应用的相应结果返回给IM客户端&lt;/p&gt;
&lt;p&gt;以上是作者的总结，供大家参考。&lt;/p&gt;
&lt;p&gt;下面的文章是关于如何建立一个Jabber服务器的&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.linuxsir.org/main/?q=node/156&quot; target=&quot;_blank&quot;&gt;简单架设Jabber 局域网即时通讯服务器&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这篇讲的很全面，不过是linux下的，个人感觉练习的话windows下的很简单。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://blog.deadbeaf.org/twitterhack/twitterbot-by-ruby/&quot; target=&quot;_blank&quot;&gt;TwitterBot by Ruby&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;如何使用Ruby来实现Twitter的机器人&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://dominiek.com/articles/2008/2/15/how-to-build-a-twitter-agent&quot; target=&quot;_blank&quot;&gt;How to Build a Twitter Agent&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;如何搭建Twitter代理&lt;/p&gt;
&lt;p&gt;不过，我更加关心的是如何实现QQ的IM集成，遗憾的是个人尝试了下并为成功，如果谁有具体的实现方法，请与我联系。下面是我整理的资料，能力有限，所以贴在这里，供大家交流吧。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.trydone.com/posts/list/50.page&quot; target=&quot;_blank&quot;&gt;QQTransport for wildfire (让QQ也能在Jabber上使用)   &lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://618119.com/archives/2008/01/04/60.html&quot; target=&quot;_blank&quot;&gt;为OpenFire和Spark增加QQTransport–Openfire篇(二)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这篇文章的作者说，他是在LumaQQ的基础上加工的，不过能力有限，对java环境也基本忘光光，虽然按照他的指引，我还是没有成功，不过还是感谢他的工作，让我知道了如何入手。&lt;/p&gt;
&lt;p&gt;讲一下外包开发的想法。&lt;/p&gt;
&lt;p&gt;一定是要有预付的，之前会讨论网站的详细功能，一定要有成文的功能说明。预付，意味着我们开始正式的开发，这个会包括网站开发文档，代码实现，在正式交付前，需要结清余下的款项。更具体的还需要另定。比如上线后的维护，服务器的扩充，人员的培训等等。在尾款结清前，我们有权保留部分代码。不过作为项目的制作者，我们更乐于参与上线后的维护工作，以增长经验。&lt;/p&gt;
&lt;p&gt;期望每一次都是快乐的合作。&lt;/p&gt;
&lt;p&gt;不过，对于项目想法不成熟的，我们并不想指出谁对谁错，我们只看成熟的开发文档。我们期望自己的作品在各个方面是优秀的。&lt;/p&gt;
&lt;p&gt;不过：&lt;/p&gt;
&lt;p&gt;1、用4000块就像做土豆网的免谈&lt;/p&gt;
&lt;p&gt;2、当程序员为“饭店跑堂”的免谈&lt;/p&gt;
&lt;p&gt;3、当程序员为“免费搓澡”的免谈&lt;/p&gt;
&lt;p&gt;4、大型门户网站或行业门户网站投资少于2万的免谈&lt;/p&gt;
&lt;p&gt;5、要求用asp制作大型门户网站或行业门户网站的免谈&lt;/p&gt;
&lt;p&gt;6、非Rails项目，而且又不能用php已有cms系统完成的，谢谢，我们不接。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/im-integration-part2</link>
                <guid>http://liwei78.github.io/blog/im-integration-part2</guid>
                <pubDate>2008-03-26T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>RJS教程</title>
                <description>&lt;hr /&gt;
&lt;p&gt;Railser.cn首发本站一位坚定的&lt;a href=&quot;http://www.douban.com/people/1098413/&quot; target=&quot;_blank&quot;&gt;支持者&lt;/a&gt;翻译作品：《RJS教程》&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/rjs-tutorial/part-1.html&quot; target=&quot;_blank&quot;&gt;第一部分&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;介绍RJS，并开始一个简单的例子&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/rjs-tutorial/part-2.html&quot; target=&quot;_blank&quot;&gt;第二部分&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;RJS和Rails&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/rjs-tutorial/part-3.html&quot; target=&quot;_blank&quot;&gt;第三部分&lt;/a&gt;， &lt;a href=&quot;http://railser.cn/rjs-tutorial/part-4.html&quot; target=&quot;_blank&quot;&gt;第四部分&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;caps&quot;&gt;RJS&lt;/span&gt; 实践: The Expense Tracker&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/rjs-tutorial/part-5.html&quot; target=&quot;_blank&quot;&gt;第五部分&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;增强 Expense Tracker&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/tutorial-rjs</link>
                <guid>http://liwei78.github.io/blog/tutorial-rjs</guid>
                <pubDate>2008-03-23T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>Rails的中文版新书《Ruby on Rails电子商务实战》</title>
                <description>&lt;hr /&gt;
&lt;p&gt;写在前面：&lt;/p&gt;
&lt;p&gt;那天同事GT我说Rails出了新书，中文版，《Ruby on Rails电子商务实战》 ，并且把英文版迅速发给了我，说：书很好，讲TDD了，你快看，我已经买了。&lt;/p&gt;
&lt;h2&gt;一、《Beginning Ruby On Rails E-Commerce》&lt;/h2&gt;
&lt;p&gt;这本书的英文版是在06年的时候出版的，在书中标注的开发环境，对于现在来说，有一些老。不过对于主流的Rails1.2.6以下版本开发的项目来说，不会产生太大的问题。&lt;br /&gt;
&lt;p style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;http://railser.cn/wp-content/uploads/2008/03/env.jpg&quot; alt=&quot;env&quot; /&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: center&quot;&gt;书中(英文)的开发环境&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
 不过，随着Rails2.0.2的发布，新的项目自然会用新版本开发。并且一些功能已经改进。比如第七章说到的“Tagging Support”，就会带来版本的困扰，这个我在&lt;a href=&quot;http://railser.cn/archives/development-log-rails-pagnate-and-acts-as-taggable&quot; target=&quot;_blank&quot;&gt;开发笔记：rails分页和acts_as_taggable插件的应用&lt;/a&gt;中已经做了个笔记。&lt;br /&gt;
&lt;br /&gt;
这本书是Rails2.0下的牺牲品吗？绝不 ，这本书的价值，在于里面讲到的TDD下的Rails开发。这是这本书的精华，也使它不同于Rails普及书会面临的淘汰问题。&lt;br /&gt;
&lt;br /&gt;
h2. 二、一定要重视TDD开发&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
在本书英文版的前言部分，作者提到了本书的目的：&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
bq. &lt;br /&gt;
本书的阅读群，是使用Rails制作过一个以上项目，并且期望在以后的开发中，通过使用TDD开发来改进代码质量的程序员的。&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
这正适合我这样的程序员。最近的经历告诉我，如果想和外国的团队开发项目，或者加入到成熟的项目开发中 ，掌握TDD或者BDD是一项必须技能。这重要的不在乎技巧，而是观念。&lt;br /&gt;
&lt;br /&gt;
记得当初在Django下开发deyeb的第二个版本时，就被迫的拿着测试驱动开发去理解。那个时候根本不明白这是什么意思，而两年后的现在，却十分想认真的再去理解一下书中的精髓。而这本书正好是按照先测试，后开发的“规矩” ，完成一个项目的。这也使得这本书不局限在Rails的具体版本，而教人知识的层次了。&lt;br /&gt;
&lt;br /&gt;
h2. 三、 《Ruby on Rails电子商务实战》&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
中文版我还没读到，所以抓来GT(GT就是google talk的意思，好玩)我的&lt;a href=&quot;http://www.douban.com/people/1098413/&quot; target=&quot;_blank&quot;&gt;那个人&lt;/a&gt;，写了一下感想，毕竟他已经认真读完前三章了。&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
bq. &lt;br /&gt;
买了Ruby on Rails电子商务实战。刚入手就迫不及待的翻看起来。这本书和其他的Rails都是一个流派，本着实用为目的，没有多余的废话，上来就直接做应用，而且介绍的技术都是现实中大家肯定会用到的，一些相关的知识点也都给了详细介绍的URL。从第二章开始作者就有意的给读者介绍一些优秀的编码思路，也就是本书的核心TDD测试驱动开发。说实话，这本书的代码，因为是基于Rails1.2之下的，尤其现在已经是Rails2了。所以好多代码已经被废弃了，例如书中常用到的 assert_tag 在rails中已经废弃了。如果你完全按照书上的例子打，肯定过不去，好在译者已经给大家写了注释和修改的方法。所以，虽然本书不是基于rails2来写，但是有了译者的补充和完善，代码仍然不过时。书中介绍的一些技巧和方法，在实战中也肯定让读者少走不少弯路，比如如何给Rails应用增加Textile功能，如何试用Rails的上传插件FileColumn。虽然Rails进过不断的进步，在安全，多语言支持应用程序部署和性能优化上都有了更好的标准和方法。但是本书后在这方面的章节仍然值得一读。&lt;br /&gt;
&lt;br /&gt;
总体来说，读过《敏捷开发2》，和《Ruby for Rails》再来看这本书，会对Rails开发者在实战中有莫大的帮助。&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
这是中文译者的博客：&lt;a href=&quot;http://activescaffold.com.cn/&quot; target=&quot;_blank&quot;&gt;activescaffold.com.cn &lt;/a&gt;&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
写在后面：&lt;br /&gt;
&lt;br /&gt;
最近又在给人做网站。又看了很多电影，并且在没什么新片看的时候，下载吴宇森的经典片《夺面双雄》 （英文：face/off）看。昨天还温习了一边《虎胆龙威4》，感觉那些程序员死得很窝囊，难道50年才出一个NEO吗？&lt;br /&gt;
&lt;br /&gt;
镐头书要出新版了，《Pro Active Record: Databases with Ruby and Rails》上架了，唉，时间不等人啊。最近觉得资料分享的网站很有意思，比如&lt;a href=&quot;http://www.scribd.com/&quot; target=&quot;_blank&quot;&gt;http://www.scribd.com/&lt;/a&gt;这个站点，大家有什么想法吗？</description>
                <link>http://liwei78.github.io/blog/beginning-ruby-on-rails-e-commerce</link>
                <guid>http://liwei78.github.io/blog/beginning-ruby-on-rails-e-commerce</guid>
                <pubDate>2008-03-20T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>《Flex3基础训练》视频系列</title>
                <description>&lt;hr /&gt;
&lt;p&gt;《Flex3基础训练》视频介绍：&lt;br /&gt;
bq.  Lynda.com 出品的 Adobe Flex 3 基础教程，由 Adobe 公司认证讲师 David Gassner 主讲。&lt;/p&gt;
&lt;p&gt;Adobe Flex 3 是用于构建和维护在所有主要浏览器、桌面和操作系统一致地部署极具表现力的 Web 应用程序高效率开放源码框架，开发人员可以使用 Adobe Flex 3 软件来显著促进开发。若要创建引人入胜的跨平台丰富 Internet 应用程序，必须懂得强大的 Flex 3 的应用。在本教程中，讲师 David Gassner 从最基本 Flex 方案及其相关编程语言入手，循序渐进，逐渐深入，带领学员应用 Flex 3 自己动手创作、设计、定制及发布动态网页和桌面部署。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/flex3-essential-training</link>
                <guid>http://liwei78.github.io/blog/flex3-essential-training</guid>
                <pubDate>2008-03-12T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>IM的集成开发</title>
                <description>&lt;hr /&gt;
&lt;p&gt;写在前面 ：&lt;/p&gt;
&lt;p&gt;这篇文章准备了挺长时间，因为在IM集成开发上是个新手，所以需要看狠多资料来理解各种概念，还在在自己的机器上做一下试验。下面就是对一些资料的笔记总结。&lt;/p&gt;
&lt;p&gt;非常感谢分享自己开发经验的朋友。&lt;/p&gt;
&lt;p&gt;第一部分：XMPP，第二部分：XMPP4R，第三部分：如何实现IM集成开发的探讨。本篇主体来自rubyfleebie.com几篇非常好的文章。&lt;/p&gt;
&lt;h2&gt;第一部分：XMPP&lt;/h2&gt;
&lt;p&gt;1、twiter带来了什么？&lt;/p&gt;
&lt;p&gt;twitter已经红了很长时间，而且国内国外的跟风网站和fans已经出来许多，前一篇博客里提到的&lt;a href=&quot;http://twitterverse.com/&quot;&gt;Twitterverse.com&lt;/a&gt;，就是一个fans站。如果你之前和我一样对twitter了解很少，可以看看下面的连接，是对twitter的解释。&lt;/p&gt;
&lt;p&gt;link：&lt;a href=&quot;http://baike.baidu.com/view/843376.htm&quot;&gt;http://baike.baidu.com/view/843376.htm&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;twitter的亮点，以及效仿网站 的主要技术，就是IM功能集成到项目中。比如&lt;a href=&quot;http://www.9fav.com&quot; target=&quot;_blank&quot;&gt;9fav.com&lt;/a&gt;，向qq里发去一条网址，就会自动加到个人的网址收藏夹中。&lt;/p&gt;
&lt;p&gt;2、XMPP&lt;/p&gt;
&lt;p&gt;现在该是XMPP登场了。XMPP是eXtensible Messaging and Presence Protocol（可扩展消息处理现场协议）的缩写，使用该协议，可以以XML格式进行消息传递。&lt;/p&gt;
&lt;p&gt;link:&lt;a href=&quot;http://baike.baidu.com/view/189676.htm&quot; target=&quot;_blank&quot;&gt;http://baike.baidu.com/view/189676.htm&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;XMPP的前身是&lt;a href=&quot;http://baike.baidu.com/view/188363.htm&quot; target=&quot;_blank&quot;&gt;Jabber&lt;/a&gt;，一个开源形式组织产生的网络即时通信协议。Jabber的开源，使得你可以使用Jabber客户端，如&lt;a href=&quot;http://www.pidgin.im/&quot; target=&quot;_blank&quot;&gt;Pidgin&lt;/a&gt;，&lt;a href=&quot;http://www.igniterealtime.org/projects/spark/index.jsp&quot; target=&quot;_blank&quot;&gt;Spark&lt;/a&gt;，&lt;a href=&quot;http://www.google.com/talk/&quot; target=&quot;_blank&quot;&gt;Google talk&lt;/a&gt;（其实Gtalk不是Jabber客户端），&lt;a href=&quot;http://www.gajim.org/&quot; target=&quot;_blank&quot;&gt;Gajim&lt;/a&gt;，登陆Jabber服务器，或者登陆你自己搭建的服务器（下一篇文章将介绍）。常听别人说可以把多个聊天软件集成到一起吧。其实原理就是使用Jabber客户端，登陆到Jabber服务器，Jabber服务器可以与其他的聊天服务器进行沟通，比如MSN，Gtalk，AIM等，这样你就可以在自己的Jabber客户端中与他们进行联系了。Server-to-server是Jabber架构的重要功能！&lt;/p&gt;
&lt;p&gt;下图是我连接自己的机器（我自己建的Jabber服务器），然后集成了msn和gtalk的用户过来后的界面。&lt;br /&gt;
&lt;p style=&quot;text-align: center&quot;&gt;&lt;img src=&quot;http://railser.cn/wp-content/uploads/2008/03/1.gif&quot; alt=&quot;spark截图&quot; /&gt;&lt;/p&gt;
&lt;p&gt;在&lt;a href=&quot;http://www.jabber.org/im-services&quot;&gt;这里&lt;/a&gt;，列出了公开的Jabber服务器，大家可以登陆试试看。&lt;/p&gt;
&lt;p&gt;3、XML的意义：Streams 和 Stanzas&lt;/p&gt;
&lt;p&gt;在开始的部分，介绍一下&lt;a href=&quot;http://www.rubyfleebie.com/im-integration-with-xmpp4r&quot; target=&quot;_blank&quot;&gt;原文&lt;/a&gt;的&lt;a href=&quot;http://docs.google.com/View?docid=dhf86kr9_188gmpnw5hf&quot; target=&quot;_blank&quot;&gt;另一款中文翻译&lt;/a&gt;，这篇文章对于快速的学习IM集成开发有很大的帮助，学习的朋友建议看一下。&lt;/p&gt;
&lt;p&gt;下面是对那篇翻译的引用，作者：&lt;a href=&quot;http://iceskysl.1sters.com/&quot;&gt;IceskYsl&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;在Jabber的消息交换过程中，有两种概念比较重要的是Streams 和 Stanzas。&lt;br /&gt;
Streams 是Jabber客户端和其服务器之间的联通、交换消息的容器（例如GoogleTalk和gmail.com )，以 XML格式的&lt;stream&gt;开始，以&lt;/stream&gt;结束。而两者之间交换的各种消息都是其他格式的XML节点（被称为 stanzas），都被包含在这个容器中，当联通的两端任何一方退出登录的时候，就发送&lt;/stream&gt;给另外一方。比如我关闭 GoogleTalk客户端，其就会发送&lt;/stream&gt;给gmail.com通知结束会话。&lt;br /&gt;
bq. PS：这里需要强调的是stream不会出现在用户A和用户B之间，而仅仅存在于您使用的*客户端*和其对应的*服务器*端之间。&lt;br /&gt;
Stanzas节点包含的的就是用户A和用户B直接需要交换的消息，一般常用的有3个格式的，分别为：&lt;br /&gt;
&lt;ol&gt;&lt;br /&gt;
	&lt;li&gt;Message&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;Presence&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;IQ&lt;/li&gt;&lt;/p&gt;
&lt;/ol&gt;
&lt;p&gt;*Message*类的Stanzas用来在两个用户间交换消息，比如*用户A*（iceskysl@someserver.com/home）给*用户B*（1sters@someotherserver.com/home）发送一条消息“1sters… are you there?”，其包装以后的格式类似于：&lt;br /&gt;
bq. &lt;stream&gt;&lt;br /&gt;
&lt;message to=’1sters@someotherserver.com/home’&gt;&lt;br /&gt;
&lt;body&gt;1sters… are you there?&lt;/body&gt;&lt;/p&gt;
&lt;/message&gt;
&lt;p&gt;…&lt;br /&gt;
…&lt;/p&gt;
&lt;p&gt;&lt;/stream&gt; &lt;!--&lt;font color=&quot;#ff0000&quot;&gt;注意&lt;/font&gt;，这个结束节点在你中断客户端连接的时候才会发送 --&gt;&lt;br /&gt;
我们再来看看，这个过程是怎么样的，当*用户A*发送消息的时候，其消息先到&lt;u&gt;someserver.com&lt;/u&gt;，然后&lt;u&gt;someserver.com&lt;/u&gt;看到其消息是发给&lt;u&gt;1sters@someotherserver.com/home&lt;/u&gt;的，于是将其传递给*用户B*的服务器&lt;u&gt;someotherserver.com&lt;/u&gt;，然后，由&lt;u&gt;someotherserver.com&lt;/u&gt;发送给*用户B*。&lt;/p&gt;
&lt;p&gt;*presence *类的stanza 是当用户的状态（Idle, Offline, Available, Do not disturb等等 ）发生改变时发送的。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;IQ (Info / Query)&lt;/strong&gt;类的stanzas是用来查看对方信息的，比如用户A想查看用户B的信息，就会发送一个“获取消息”的IQ stanza，用户B收到后，会回一个包含用户A查询的信息的IQ stanza。&lt;/p&gt;
&lt;h2&gt;第二部分：XMPP4R&lt;/h2&gt;
&lt;p&gt;XMPP4R是用Ruby实现XMPP客户端库文件，和其他的Jabber客户端软件一样，XMPP4R发送，接收和管理XML信息（stanzas）。&lt;/p&gt;
&lt;p&gt;在下面的代码中，演示了如何用XMPP4R实现客户端功能。内容还是参考上面提到的&lt;a href=&quot;http://iceskysl.1sters.com/&quot;&gt;IceskYsl&lt;/a&gt;的翻译。&lt;/p&gt;
&lt;p&gt;1、 登录服务器&lt;br /&gt;
&lt;pre lang=&quot;ruby&quot;&gt;&lt;br /&gt;
    client = Jabber::Client.new(Jabber::&lt;span class=&quot;caps&quot;&gt;JID&lt;/span&gt;::new(&amp;#8220;itechtag.notify@gmail.com/rebot&amp;#8221;))  #初始化一个实例&lt;/p&gt;
client.connect   #连接到服务端
client.auth(&amp;#8220;my_extremely_secret_password&amp;#8221;)  #验证密码
client.send(Presence.new.set_type(:available)) #更新状态&lt;/pre&gt;
&lt;p&gt;第四行,我们发送第一个stanza给服务器，告诉服务器：我在这里了。这样其他好友就会看到我的状态位“可用”了。&lt;/p&gt;
&lt;p&gt;2、 发送消息&lt;/p&gt;
&lt;p&gt;接下来看看如何发送消息给我的好友&lt;br /&gt;
&lt;pre lang=&quot;ruby&quot;&gt;&lt;br /&gt;
    msg = Jabber::Message::new(&amp;#8220;iceskysl@gmail.com&amp;#8221;, &amp;#8220;Hello… ice?&amp;#8221;)  #这里是接收者的Jid和需要发送的消息&lt;/p&gt;
msg.type=:chat  #这里设置消息的类型
client.send(msg) #发送出去&lt;/pre&gt;
&lt;p&gt;怎么样，很简单吧，但是需要提醒您的是，最好是把消息的类型设置为&amp;quot;chat&amp;quot;，因为不同的客户端对消息的类型的处理方式是不一样的，比如&lt;a href=&quot;http://www.gajim.org/&quot;&gt;Gajim &lt;/a&gt;用户每收到一个标识为“normal”的消息，都会重新弹出一个窗口显示，而不会在原来打开的窗口中继续显示。&lt;/p&gt;
&lt;p&gt;3、添加好友&lt;/p&gt;
&lt;p&gt;前面我们看到了，如何发送消息给另外一个人，但是当这个人不在你的好友列表中时，可能他并不能收到您的消息（也依赖不同的客户端，比如GoogleTalk就会先发送一个“加为好友”的请求），所以最保险的做法是先把这个人加为自己的好友，代码如下：&lt;br /&gt;
&lt;pre lang=&quot;ruby&quot;&gt;&lt;br /&gt;
    pres = Jabber::Presence.new.set_type(:subscribe).set_to(&amp;#8220;john@someserver.com&amp;#8221;)&lt;/p&gt;
client.send(pres)&lt;/pre&gt;
&lt;p&gt;如上代码发送我们的添加john为好友的请求（_subscription _），但是什么时候返回？又返回什么内容呢？还好，XMPP4r不会一直等待其返回，也就是说上面这个过程是异步的，因为我们不晓得对方是否在线，是否会立即给我回复等等，但是我们又如何知道对方的反馈呢？就需要介绍XMPP4r的另外一个特性，*callbacks*.&lt;/p&gt;
&lt;p&gt;4、Callbacks 监听&lt;/p&gt;
&lt;p&gt;Callbacks 是个很重要的东西，他运行在自己的线程中，也就是说不会干扰主线程的运行，这个特性对我们非常重要的，因为这其实就保证了一个异步的过程，我们的主线程并 不需要等到请求的响应就可以继续下去做其他的事情，而Callbacks不断的监听以取得需要的响应。&lt;/p&gt;
&lt;p&gt;回到刚才那个添加好友的地方，我们给john发送了添加好友的请求，我们怎么取得其响应呢？我们也说了，我们的主线程不会一直等待反馈，所以需要另外一种机制以保证有响应的时候我们可以及时的知道，这个就是Callbacks要干的事情。&lt;/p&gt;
&lt;p&gt;由于“添加好友”这个请求（subscription request）对应的callback为“add_update_callback”，所以我们需要在“添加成功”注册这个callback监听：&lt;br /&gt;
&lt;pre lang=&quot;ruby&quot;&gt;&lt;br /&gt;
    client.add_update_callback do |presence|&lt;/p&gt;
if presence.from == &amp;#8220;john@someserver.com&amp;#8221; &amp;amp;&amp;amp; presence.ask == :subscribe
client.send(presence.from, &amp;#8220;好友添加成功&amp;#8221;)
end
end&lt;/pre&gt;
&lt;p&gt;Xmpp4r提供了很多类似的Callbacks，比如一个人给我发消息时，我们可以使用add_message_callback监听：&lt;br /&gt;
&lt;pre lang=&quot;ruby&quot;&gt;&lt;br /&gt;
    client.add_message_callback do |m|&lt;/p&gt;
if m.from == &amp;#8220;john@someserver.com&amp;#8221;
#得到john的消息
m.body
#输出john的消息
end
&lt;p&gt;&lt;/pre&gt;&lt;br /&gt;
另外，还有当对方状态发生变化的时候，我们可以用add_presence_callback来监视，类似代码这样：&lt;br /&gt;
&lt;pre lang=&quot;ruby&quot;&gt;&lt;br /&gt;
    client.add_presence_callback do |old_presence, new_presence|&lt;/p&gt;
if new_presence.from == &amp;#8220;john@someserver.com&amp;#8221; &amp;amp;&amp;amp; new_presence.show == :dnd
msg = Message::new(&amp;#8220;john@someserver.com&amp;#8221;, &amp;#8220;对方为免打扰模式哦&amp;#8221;)
msg.type=:chat
client.send(msg)
end
&lt;p&gt;&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;在&lt;a href=&quot;http://docs.google.com/View?docid=dhf86kr9_188gmpnw5hf&quot; target=&quot;_blank&quot;&gt;上面提到的另一款中文翻译&lt;/a&gt;里面，后面部分讲了“技能云”的IM开发代码，开发中的朋友可以看一下它的代码。再次感谢&lt;a href=&quot;http://iceskysl.1sters.com/&quot;&gt;IceskYsl&lt;/a&gt;的工作。&lt;/p&gt;
&lt;p&gt;前两部分的内容先到这里，下一篇介绍其他的资料，包括OpenFire服务器的搭建和如何使用QQ实现Jabber客户端功能。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/im-integration</link>
                <guid>http://liwei78.github.io/blog/im-integration</guid>
                <pubDate>2008-03-07T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>08年2月整理的Flex和Rails消息</title>
                <description>&lt;hr /&gt;
&lt;p&gt;写在前面：&lt;/p&gt;
&lt;p&gt;终于忙完了手头的杂事，开始专心的看看Rails文章。看的第一篇竟然是Flex相关的，难道这个博客真的要专门讨论Flex和Rails吗？&lt;/p&gt;
&lt;p&gt;之前翻译和整理的三篇文章，&lt;a href=&quot;http://railser.cn/archives/publish-subscribe-messaging-with-flex-and-rails&quot; target=&quot;_blank&quot;&gt;在Flex和Rails上实现发布/订阅的消息通信&lt;/a&gt; ，&lt;a href=&quot;http://railser.cn/archives/flash-remoting-for-rails-tutorial-chinese&quot; target=&quot;_blank&quot;&gt;在Rails中使用Flash Remoting中文教程&lt;/a&gt; ，&lt;a href=&quot;http://railser.cn/archives/flex-on-rails-preview&quot; target=&quot;_blank&quot;&gt;Flex与Rails的性感结合&lt;/a&gt;，晒一下，下面是整个二月份积攒的一些东西，整理发布一下。&lt;/p&gt;
&lt;p&gt;我发现儿子越来越好玩了。而且今天给博客换了皮肤，3月份来了，蛮新鲜的。&lt;/p&gt;
&lt;h2&gt;1、Flex Builder 3 正式发售&lt;/h2&gt;
&lt;p&gt;link:&lt;a href=&quot;http://www.adobe.com/products/flex/&quot;&gt;http://www.adobe.com/products/flex/&lt;/a&gt;&lt;br /&gt;
h2. 2、在Flash Player中运行Ruby代码&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;08年2月26日InfoWorld.com报道：Adobe的一个研究项目正致力于在Flash Player中运行其他语言的代码。该项目中，像C和C++，Java，Python，Ruby这这样的编程语言都可以编译到ActionScript中。这样可以使这些语言编写的组件，加载一些大型项目中，实现代码的跨应用平台。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;比如，目前的FlashPaper就可以读取PDF文档并进行展示。&lt;/p&gt;
&lt;p&gt;目前，所有的代码都使用ActiobScript或低一级别的byte code编写，在Flash Player中，所有的都被编译成SWF byte code，它叫做ActionScript byte code。&lt;br /&gt;
link:&lt;a href=&quot;http://www.infoworld.com/article/08/02/26/adobe-player_1.html&quot;&gt;http://www.infoworld.com/article/08/02/26/adobe-player_1.html&lt;/a&gt;&lt;br /&gt;
h2. 3、验证Ruby的正则表达式&lt;/p&gt;
&lt;p&gt;如果你需要验证一下自己写的Ruby正则是否正确，可以用下面这个网站验证一下。我觉得重要的是这个网站下面的一些提示。&lt;/p&gt;
&lt;p&gt;link:&lt;a href=&quot;http://www.rubular.com/&quot;&gt;http://www.rubular.com/&lt;/a&gt;&lt;br /&gt;
h2. 4、新增了两个网站连接&lt;/p&gt;
&lt;p&gt;都是关于Flex开发的博客，本篇文章写的时候一直在看 &lt;a href=&quot;http://blog.vixiom.com/&quot;&gt;http://blog.vixiom.com/&lt;/a&gt; 和这两个博客。&lt;/p&gt;
&lt;p&gt;The Official Flex User Group for Orange County, California.&lt;/p&gt;
&lt;p&gt;Link:&lt;a href=&quot;http://www.ocflex.com/&quot;&gt;http://www.ocflex.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Ted On Flex&lt;/p&gt;
&lt;p&gt;link:&lt;a href=&quot;http://www.onflex.org/&quot;&gt;http://www.onflex.org/&lt;/a&gt;&lt;br /&gt;
h2. 5、谁在使用Rails工作&lt;/p&gt;
&lt;p&gt;我注册了，所以目前统计在&lt;a href=&quot;http://www.workingwithrails.com/browse/people/country/China&quot;&gt;中国有92个Rails开发人员&lt;/a&gt;，而且大多都 “Available for hire”。呵呵。我也是&lt;/p&gt;
&lt;p&gt;link:&lt;a href=&quot;http://www.workingwithrails.com/&quot;&gt;http://www.workingwithrails.com/&lt;/a&gt;&lt;br /&gt;
h2. 6、Rails Engines&lt;/p&gt;
&lt;p&gt;引自：&lt;a href=&quot;http://blog.uiparty.com/jouy/&quot;&gt;全日志博客&lt;/a&gt;&lt;br /&gt;
bq.  Rails engines是增强rails自身插件的框架。它让共享controller、helper、models、public、routes和迁移（migrations ）变得更简单。&lt;/p&gt;
&lt;p&gt;它使整大块的插件进行功能融入现有应用无任何影响你的现有代码。或者,你可以用Rails engines插件分享最小、最简单的资源；包括通常迁移、javascripts、样式或图片。&lt;br /&gt;
Link:&lt;a href=&quot;http://www.rails-engines.org/&quot;&gt;http://www.rails-engines.org/&lt;/a&gt;&lt;br /&gt;
h2. 7、使你的Rails应用更安全&lt;/p&gt;
&lt;p&gt;文章描述了几个Rails应用中的安全问题及如何解决，其中的Sql注入的问题在前几天的面试中碰到过。如果有要面试Rails工作的朋友，可以选择浏览一下这篇文章。&lt;/p&gt;
&lt;p&gt;Link:&lt;a href=&quot;http://manuals.rubyonrails.com/read/book/8&quot;&gt;http://manuals.rubyonrails.com/read/book/8&lt;/a&gt;&lt;br /&gt;
h2. 8、Substruct：开源的Rails电子商务项目&lt;/p&gt;
&lt;p&gt;在&lt;a href=&quot;http://www.caiwangqin.com/post/256&quot;&gt;Caiwangqin&amp;#8217;s Blog中已经提到了这个项目&lt;/a&gt;，而且在 &lt;a href=&quot;http://chinaonrails.com/topic/view/967.html&quot;&gt;http://chinaonrails.com/topic/view/967.html&lt;/a&gt; 中还能看到大家的讨论。&lt;br /&gt;
&lt;pre&gt;&lt;br /&gt;
bq.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;带有博客功能的简易内容管理系统&lt;br /&gt;
    o 在线管理网站&lt;/li&gt;
	&lt;li&gt;使用 Authorize.net and PayPal (需自有帐户) 结算&lt;/li&gt;
	&lt;li&gt;商品和订单管理&lt;br /&gt;
    o 在线跟中库存&lt;br /&gt;
    o 可以按分钟查看销售报告&lt;br /&gt;
    o &lt;a href=&quot;http://code.google.com/p/substruct/wiki/FulfillmentIntegration&quot;&gt;Integrate with fulfillment houses via &lt;span class=&quot;caps&quot;&gt;XML&lt;/span&gt; and web services &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;极好的管理界面&lt;br /&gt;
    o 内容的发布与管理&lt;br /&gt;
    o Create, maintain, void orders（啥？）&lt;br /&gt;
    o 回答浏览者提问&lt;/pre&gt;&lt;br /&gt;
Link:&lt;a href=&quot;http://code.google.com/p/substruct/&quot;&gt;http://code.google.com/p/substruct/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;9、Ruby 1.9&lt;/h2&gt;
&lt;p&gt;Yukihiro Matsumoto（松本行弘）主讲，解释各种Ruby版本之间的差别和介绍Ruby1.9的特性。&lt;/p&gt;
&lt;pre&gt;
&amp;lt;object width=&quot;425&quot; height=&quot;355&quot;&amp;gt;&amp;lt;param name=&quot;movie&quot; value=&quot;http://www.youtube.com/v/oEkJvvGEtB4&quot;&amp;gt;&amp;lt;/param&amp;gt;&amp;lt;param name=&quot;wmode&quot; value=&quot;transparent&quot;&amp;gt;&amp;lt;/param&amp;gt;&amp;lt;embed src=&quot;http://www.youtube.com/v/oEkJvvGEtB4&quot; type=&quot;application/x-shockwave-flash&quot; wmode=&quot;transparent&quot; width=&quot;425&quot; height=&quot;355&quot;&amp;gt;&amp;lt;/embed&amp;gt;&amp;lt;/object&amp;gt;
&lt;/pre&gt;
&lt;p&gt;参考：&lt;a href=&quot;http://column.bokee.com/19333.html&quot;&gt;Ruby的哲学——与Yukihiro Matsumoto的对话&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ps1：翻译也是一种写作&lt;br /&gt;
ps2：感谢wjp提供的资料，虽然这个家伙死活不加入Railser.cn，不过我还是咒怨他工作顺利。&lt;/p&gt;
&lt;p&gt;里克，2008年3月2日&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/flex-and-rails-in-feb-2008</link>
                <guid>http://liwei78.github.io/blog/flex-and-rails-in-feb-2008</guid>
                <pubDate>2008-03-02T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>“Twitterverse Awarded Mashup of the Day”</title>
                <description>&lt;hr /&gt;
&lt;p&gt;写在前面：&lt;/p&gt;
&lt;p&gt;看标题，包含了本篇的两个意思，一个是要介绍一些网站，一个是要关注Mashup。&lt;/p&gt;
&lt;p&gt;对于2.0时代的互联网，时间是很紧迫的，而各种应用，虽然看着很简单，但是很好玩。原因在于，大家还是重视博客了，重视开放api和Mashup了，所以，原来给人做网站的我，被&lt;font color=&quot;#ff6600&quot;&gt;逼&lt;/font&gt;迫的开始&lt;font color=&quot;#ff6600&quot;&gt;2&lt;/font&gt;.0了。&lt;/p&gt;
&lt;h3&gt;foodbuzz.com&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/archives/sites-twitter-rails-and-mashup/foodbuzzcom/&quot; rel=&quot;attachment wp-att-90&quot; title=&quot;foodbuzz.com&quot;&gt;&lt;img src=&quot;http://railser.cn/wp-content/uploads/2008/02/foodbuzz.JPG&quot; alt=&quot;foodbuzz.com&quot; border=&quot;0&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;foodbuzz.com是一个美食网站，介绍各种食品，餐馆，食谱，还有用户点评功能，加上google地图的使用，使网站比较2.0&lt;/p&gt;
&lt;p&gt;不过首先发现这个网站，是因为它是一个Rails网站，在&lt;a href=&quot;http://4rails.cn&quot; title=&quot;4Rails.cn&quot; target=&quot;_blank&quot;&gt;4rails.cn&lt;/a&gt;上还有它的招聘信息的转载:&lt;a href=&quot;http://4rails.cn/jobs/7&quot; target=&quot;_blank&quot;&gt;Web Developer/Software Engineer (Ruby on Rails)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Link:&lt;a href=&quot;http://www.foodbuzz.com/&quot; target=&quot;_blank&quot;&gt;foodbuzz.com&lt;/a&gt;&lt;br /&gt;
h3. mr6.cc&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://mr6.cc/&quot; title=&quot;mr6.cc&quot;&gt;&lt;img src=&quot;http://railser.cn/wp-content/uploads/2008/02/mr6.jpg&quot; alt=&quot;mr6.cc&quot; border=&quot;0&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;web2.0的核心是传播？从前人们习惯阅读，现在人们习惯分享。&lt;/p&gt;
&lt;p&gt;这是一个分享知识的专业网站，从中，“别有用心”的人会发现自己想要的。&lt;/p&gt;
&lt;p&gt;Link:&lt;a href=&quot;http://mr6.cc/&quot; target=&quot;_blank&quot;&gt;mr6.cc&lt;/a&gt;&lt;br /&gt;
h3. emilychang.com&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://emilychang.com/&quot; title=&quot;emilychang&quot;&gt;&lt;img src=&quot;http://railser.cn/wp-content/uploads/2008/02/chang.jpg&quot; alt=&quot;emilychang&quot; border=&quot;0&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;又是一个分享个人收藏和资讯的网站，主人一是漂亮，二是专业，网站里可以找到很多新鲜的东西。比如标题提到的那个网站：&lt;a href=&quot;http://twitterverse.com&quot;&gt;Twitterverse.com &lt;/a&gt;。&lt;br /&gt;
bq.  &lt;a href=&quot;http://www.twitterverse.com/&quot;&gt;Twitterverse&lt;/a&gt; is a project by &lt;a href=&quot;http://ideacodes.com/&quot;&gt;Ideacodes&lt;/a&gt;.  While we&amp;#8217;re fans of &lt;a href=&quot;http://twitter.com/&quot;&gt;Twitter&lt;/a&gt;, we&amp;#8217;re not officially affiliated with them in any way. We use the data that is made available in Twitter&amp;#8217;s public timeline. All content is subject to its original copyright as indicated by &lt;a href=&quot;http://twitter.com/tos&quot;&gt;Twitter&amp;#8217;s terms of service&lt;/a&gt;.&lt;br /&gt;
Link:&lt;a href=&quot;http://emilychang.com/&quot; target=&quot;_blank&quot;&gt;emilychang.com&lt;/a&gt;&lt;br /&gt;
h3. zikii.com&lt;/p&gt;
&lt;p&gt;最后要提的一个网站，名字虽然比ziki多了个i，但是内容完全不一样。这是一个&lt;font color=&quot;#ff6600&quot;&gt;朱德庸式&lt;/font&gt;的网站！&lt;br /&gt;
bq.  没有交易，就没有“商业性”——这是在做工具型网站一定要切记的一条。&lt;/p&gt;
&lt;p&gt;怀才就象怀孕,时间长了才能看出来 &lt;sup&gt;-&lt;/sup&gt;&lt;/p&gt;
&lt;p&gt;在一个普遍创新水平不高的时候，一个比较认真的抄袭也能产生巨大力量&lt;/p&gt;
&lt;p&gt;钱不是问题，问题是没钱&lt;br /&gt;
&lt;a href=&quot;http://zikii.com/&quot; title=&quot;zikii.com&quot;&gt;&lt;img src=&quot;http://railser.cn/wp-content/uploads/2008/02/zikii.jpg&quot; alt=&quot;zikii.com&quot; border=&quot;0&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;另：这是一个Rails网站。&lt;/p&gt;
&lt;p&gt;Link:&lt;a href=&quot;http://zikii.com/&quot; target=&quot;_blank&quot;&gt;zikii.com&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;今天就先到这里吧，给所有来看博客的朋友拜个晚年，祝大家晚年幸福！&lt;/p&gt;
&lt;p&gt;里克：2008年2月20日&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/sites-twitter-rails-and-mashup</link>
                <guid>http://liwei78.github.io/blog/sites-twitter-rails-and-mashup</guid>
                <pubDate>2008-02-20T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>acts_as_attachment和attachment_fu插件应用</title>
                <description>&lt;hr /&gt;
&lt;p&gt;写在前面&lt;/p&gt;
&lt;p&gt;Rails插件，是学习Rails框架很好的教材。插件可以让你利用Ruby语言的特点，改进Rails框架代码，而不必去编辑它。比如acts_as_paranoid插件就是将Rails默认的Destroy功能进行了删除标记的改进。这里，Rails的Module和Class的学习，Mixin的学习对于理解Rails是相当重要的。&lt;br /&gt;
里克：我觉得想学习Rails插件，先需要看《Ruby for Rails》的第六章（模块和程序组织）和第十三章（Ruby动态特性）。&lt;/p&gt;
&lt;p&gt;插件还可以让开发人员发布复用性强的应用，比如各种Acts_as插件。&lt;/p&gt;
&lt;p&gt;插件是一种很好的Rails附加产品，通过对插件代码的学习，插件test的学习，可以很快的提升对Rails框架的理解。这对于学习其他框架也是有一定帮助的。&lt;/p&gt;
&lt;p&gt;下面将详细的对工作中用到的两个插件进行笔记。&lt;/p&gt;
&lt;p&gt;附件管理插件：acts_as_attachment和attachment_fu&lt;br /&gt;
acts_as是一个庞大的插件家族，他们无比丰富的扩展了Rails的功能。acts_as_attachment插件是使一个Model具有插件上传，管理的功能，而不必去为全局建立一个公共的上传管理model[&lt;a href=&quot;http://weblog.techno-weenie.net/articles/acts_as_attachment&quot;&gt;Intro to Acts As Attachment&lt;/a&gt;]。attachment_fu是acts_as_attachment的升级版，作者是&lt;a href=&quot;http://techno-weenie.net/&quot;&gt;Rick Olson&lt;/a&gt;，这个插件可以说在Rails plugins排行中进得了前三位的。&lt;/p&gt;
&lt;p&gt;连接：&lt;a href=&quot;http://hosting.media72.co.uk/blog/2007/12/09/10-ruby-on-rails-plugins-you-should-be-using/&quot;&gt;10 Ruby On Rails Plugins You Should Be Using&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;attachment_fu提供了全面的测试框架，并且提供了对ImageScience，RMagick，minimagick的支持。&lt;/p&gt;
&lt;p&gt;acts_as_attachment的教程介绍&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://weblog.techno-weenie.net/articles/acts_as_attachment&quot;&gt;Intro to Acts As Attachment&lt;/a&gt; 一篇里简单的介绍了aaa的使用，按照里面的介绍就可以实现附件的上传了，我就是按照它的介绍实现了&lt;a href=&quot;http://4rails.cn&quot;&gt;4Rails.cn&lt;/a&gt;的头像上传功能。不过这个插件的功能绝没这么简单。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://weblog.techno-weenie.net/articles/acts_as_attachment/thumbnailing&quot;&gt;Acts As Attachment Thumbnailing&lt;/a&gt; 一篇简单介绍了图片缩略图功能，这样就可以对上传的图片进行各种大小的缩略图生成了。&lt;/p&gt;
&lt;p&gt;下面的内容是针对attachment_fu的。因为接口上没有做任何调整，只需将acts_as_attachment 改成 has_attachment，上面的教程依旧适用。&lt;/p&gt;
&lt;p&gt;几个图片处理库&lt;/p&gt;
&lt;p&gt;在attachment_fu的option中，可以声明 :processor ，指定图片处理库，这个包括ImageScience, Rmagick, 和MiniMagick，不指定将为默认安装的。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://seattlerb.rubyforge.org/ImageScience.html&quot;&gt;ImageScience&lt;/a&gt;：实现图片放缩的库，使用前需安装&lt;a href=&quot;http://sourceforge.net/projects/freeimage&quot;&gt;freeimage&lt;/a&gt;和&lt;a href=&quot;http://rubyforge.org/projects/rubyinline&quot;&gt;rubyinline&lt;/a&gt;，RubyInline允许你在ruby代码中直接编写c/c++代码。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://rmagick.rubyforge.org/&quot;&gt;Rmagick&lt;/a&gt;：使用的很多，windows的安装有特定的版本需求，需要下载&lt;a href=&quot;http://rubyforge.org/frs/?group_id=12&amp;release_id=17573&quot;&gt;rmagick-win32&lt;/a&gt;最新版&lt;a href=&quot;http://rubyforge.org/frs/download.php/46136/RMagick-2.7.1-ImageMagick-6.4.5-3-Q8.zip&quot;&gt; [2.7.1 binary gem for Ruby 1.8.6]RMagick-2.7.1-ImageMagick-6.4.5-3-Q8.zip(08年12月17日更新)&lt;/a&gt;，这个对应的Ruby版本是1.8.6。里面已经放上了必须版本的ImageMagick和RMagick的gem，不用再找了。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://rubyforge.org/projects/mini-magick/&quot;&gt;MiniMagick&lt;/a&gt;：将Rmagick的精简，直接用Ruby包装ImageMagick command line。避免了RMagick的内存问题。&lt;/p&gt;
&lt;p&gt;参数介绍&lt;/p&gt;
&lt;p&gt;设置参数&lt;/p&gt;
&lt;p&gt;图片缩略参数详解&lt;/p&gt;
&lt;p&gt;关于Rmagick的内存泄露风险&lt;/p&gt;
&lt;p&gt;引自：&lt;a href=&quot;http://robbin.javaeye.com/blog/157731&quot; target=&quot;_blank&quot;&gt;JavaEye网站的RoR性能优化经验谈&lt;/a&gt;&lt;br /&gt;
bq. JavaEye也面临着内存泄漏的困扰，这方面困扰主要来自于Rmagic。Rmagick调用ImageMagick的C库来完成图片的操作，从我们的 监测来看，RMagick大多数情况下会缓慢的泄漏内存，在某些特定的图片操作上会急剧的泄漏内存。解决办法就是用mini_magick替代 Rmagick，mini_magick是直接调用ImageMagick的mogrify命令，另起一个进程来操作图片，操作完进程就结束了，绝无后患，由于Linux的fork进程开销不大，因此也不必担心性能问题。&lt;br /&gt;
使用attachment_fu保存远程图片&lt;/p&gt;
&lt;p&gt;未完，待续。。&lt;/p&gt;
&lt;p&gt;参考资料：&lt;br /&gt;
&lt;a href=&quot;http://weblog.techno-weenie.net/articles/acts_as_attachment&quot; target=&quot;_blank&quot;&gt;acts_as_attachment&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://weblog.techno-weenie.net/articles/acts_as_attachment/thumbnailing&quot; target=&quot;_blank&quot;&gt;acts_as_attachment thumbnailing&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://svn.techno-weenie.net/projects/plugins/attachment_fu/README&quot; target=&quot;_blank&quot;&gt;attachment_fu &lt;span class=&quot;caps&quot;&gt;README&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://robbin.javaeye.com/blog/157731&quot; target=&quot;_blank&quot;&gt;JavaEye网站的RoR性能优化经验谈&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://clarkware.com/cgi/blosxom/2007/02/24#FileUploadFu&quot; target=&quot;_blank&quot;&gt;File Upload Fu&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://blog.vixiom.com/2007/12/28/hacking-attachment_fu-to-work-with-flashflex-uploads-and-crop-square-images/&quot;&gt;Hacking attachment_fu to work with Flash/Flex uploads and crop square images&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://almosteffortless.com/2007/03/25/working-with-attachment_fu/&quot;&gt;Working with attachment_fu&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://blog.chinaunix.net/u/10227/showart.php?id=75141&quot;&gt;简单、易于扩展的图像读写库：FreeImage&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;其他：&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.mysqlperformanceblog.com/&quot;&gt;MySQL Performance Blog&lt;/a&gt;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/acts_as_attachment-and-attachment_fu</link>
                <guid>http://liwei78.github.io/blog/acts_as_attachment-and-attachment_fu</guid>
                <pubDate>2008-01-25T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>RESTful的Rails开发，讲讲4Rails.cn的开发心得</title>
                <description>&lt;hr /&gt;
&lt;p&gt;这是一篇笔记。&lt;/p&gt;
&lt;p&gt;最近的事情很多很不顺利，不过一切都会过去，并且重新走上 正规的。&lt;/p&gt;
&lt;p&gt;前阵子在看《RESTful Web Services》，看得更加迷惑，毕竟是英文书，不太好理解。不过关于REST的理解还是整理了一下。&lt;/p&gt;
&lt;p&gt;同时在写一个个人的项目，主要是在开发的过程中保持对编程的感觉（因为没有接到赚钱的项目），还有就是试用新的Rails2.0.2，以及对REST的重新理解。&lt;/p&gt;
&lt;p&gt;这个个人的项目是&lt;a href=&quot;http://4rails.cn&quot; target=&quot;_blank&quot;&gt;http://4rails.cn&lt;/a&gt;，一个招聘信息发布和简历系统。由于目前是个人练习，所以功能上很主观，并未太考虑实用性。而且在正式美化界面前，它属于全人类。&lt;/p&gt;
&lt;p&gt;开发4Rails有几个想法：&lt;br /&gt;
bq.  1、RESTful和ROA&lt;/p&gt;
&lt;p&gt;2、Rails2.0.2下的RESTful&lt;/p&gt;
&lt;p&gt;3、几个插件的使用&lt;/p&gt;
&lt;p&gt;4、实现以前想过但是没做的想法&lt;/p&gt;
&lt;p&gt;5、为另一个项目准备&lt;br /&gt;
随便写写：&lt;br /&gt;
h3. 1、RESTful和ROA&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I hold that everything in the Resource-Oriented Architecture is also RESTful.&lt;br /&gt;
在&lt;a href=&quot;http://baike.baidu.com/view/1077487.htm&quot; target=&quot;_blank&quot;&gt;这篇文章&lt;/a&gt;里面，比较详细的介绍了REST的概念，但是，普遍的来说，很多文章 对REST的描述都是千篇一律的。那么，《RESTful Web Services》中如何来介绍REST的呢？&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;第四章《The Resource-Oriented Architecture》 中讲到：REST不是一个结构，而是一个标准[criteria]，但是这里并不是在说“REST 结构”。而ROA(Resource-Oriented Architecture)才是一个结构，一个RESTful的结构。&lt;/p&gt;
&lt;p&gt;在这里，“Oriented”再次出现在眼里，而它出现最多地方的便是“&lt;a href=&quot;http://baike.baidu.com/view/63596.htm&quot;&gt;Object Oriented Programming&lt;/a&gt;”，计算机教科书里的翻译为“面向对象的程序设计”。那么根据同样的原则，来对ROA理解，可以叫做“面向资源的结构”。&lt;/p&gt;
&lt;p&gt;那么Rails2.0.2里面，是如何来实现ROA的呢？&lt;br /&gt;
h3. 2、Rails2.0.2下的RESTful&lt;/p&gt;
&lt;p&gt;在Rails1.2.x里面就在坚持着RESTful的风格，现在Rails2.0.2更加强调了ROA的结构，特别是在scaffold的生成和routes的设计上。不过，Rails并不是完全的REST，“RESTful”比较合适。而在目前的开发中，更多的是在遵循ROA，来设计“资源”。&lt;/p&gt;
&lt;p&gt;在4Rails的这个系统中，资源包括：用户，招聘信息，用户关注的信息，简历，头像。&lt;/p&gt;
&lt;p&gt;刚开始对REST感兴趣的时候，经常会想到的问题：“是不是网站的设计都要RESTful”，不。&lt;/p&gt;
&lt;p&gt;REST讲究的是ROA的设计，是对网站资源的操作，而很多业务操作，如用户登陆，购买流程，统计结算等等，还是需要传统的设计。RESTful的优点是方便资源的利用。所以，再重新设计一个销售项目的时候，Rails做的是对网站资源和用户资源重新设计，这主要的改进是，对资源的表述更加准确。&lt;/p&gt;
&lt;p&gt;比如以前喜欢把用户中心地址设计成&amp;quot;/u/1&amp;quot;，用户的销售商品列表就是&amp;quot;/goods&amp;quot;。&lt;br /&gt;
而现在统一的都是&amp;quot;/users/1&amp;quot;，和&amp;quot;/users/1/goods&amp;quot;，当然，这里面避免了的麻烦还很多。&lt;/p&gt;
&lt;p&gt;里克：当然，id的使用并不是REST所提倡的，因为它不够直接，而且当id变化的时候（很容易造成变化，比如新老系统的数据整合的时候），就会造成一些问题。我倒是希望Rails能够用slug来代替id，就像wp的Post Slug，或者给出两个方案，默认用id，slug可选。这会成真吗？&lt;/p&gt;
&lt;p&gt;有时候，xxx_id 并不一定代表model关系中的外键关联，它可能是一个判断标准。尤其在REST的view页面的时候。对于需要对其判断权限的访问者，这个id比其他的更重要。&lt;br /&gt;
h3. 3、插件&lt;/p&gt;
&lt;p&gt;4Rails用到了4个插件：&lt;/p&gt;
&lt;p&gt;will_paginate：分页插件，很好用。&lt;/p&gt;
&lt;p&gt;resource_feeder和simply_helpful：用来实现RSS订阅。不过被大砍了很多代码，因为是针对1.2.x版本的，在2.0.2上会覆盖掉默认的form_form 方法，所以需要改一下。&lt;/p&gt;
&lt;p&gt;acts_as_attachment：头像的上传&lt;/p&gt;
&lt;p&gt;acts_as_attachment和attachment_fu两个插件会在下一篇博客里好好整理一下，早就知道这两个插件的大名，而且向人吹嘘说是插件排行榜前三位。不过说实话我还没用过呢。嘿嘿。&lt;/p&gt;
&lt;p&gt;参考文章：&lt;br /&gt;
&lt;a href=&quot;http://www.ibm.com/developerworks/cn/web/wa-ajaxarch/&quot;&gt;Ajax 和 REST，第 1 部分&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.ibm.com/developerworks/cn/web/wa-ajaxarch2.html&quot;&gt;Ajax 和 REST，第 2 部分&lt;/a&gt;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/rails-on-rest-and-4rails-cn</link>
                <guid>http://liwei78.github.io/blog/rails-on-rest-and-4rails-cn</guid>
                <pubDate>2008-01-20T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>写在2007的最后一天</title>
                <description>&lt;hr /&gt;
&lt;p&gt;今天是2007年的最后一天了，出于各种原因我强烈的盼望2008赶快到来。&lt;/p&gt;
&lt;p&gt;2008年，Railser.cn将继续关注：&lt;br /&gt;
1、Rails&lt;br /&gt;
2、OpenSocial的Rails实现&lt;br /&gt;
3、Flex框架和Rails框架的开发&lt;br /&gt;
4、Restful Rails开发&lt;br /&gt;
5、Ruby编程&lt;br /&gt;
6、服务器部署，管理&lt;br /&gt;
7、数据库管理&lt;/p&gt;
&lt;p&gt;会影响2008的技术：&lt;br /&gt;
1、Flex2&lt;br /&gt;
2、RESTful and &lt;span class=&quot;caps&quot;&gt;ROA&lt;/span&gt;&lt;br /&gt;
3、Rails and Ruby&lt;/p&gt;
&lt;p&gt;目前正在看的书，08年还要继续看&lt;br /&gt;
《RESTful web services》&lt;br /&gt;
&lt;img src=&quot;http://railser.cn/wp-content/uploads/2007/12/9780596529260_cat.gif&quot; alt=&quot;RESTful web services&quot; /&gt;&lt;/p&gt;
&lt;p&gt;《The.Essential.Guide.to.Flex.2.with.ActionScript.3.0》&lt;br /&gt;
&lt;img src=&quot;http://railser.cn/wp-content/uploads/2007/12/1590597338.jpg&quot; alt=&quot;The.Essential.Guide.to.Flex.2.with.ActionScript.3.0&quot; /&gt;&lt;/p&gt;
&lt;p&gt;07年的经历：儿子出生，工作的不如意，项目停止，身体垮掉，SOHO生涯&lt;br /&gt;
如果说感谢的话，要感谢在我最困难的时候，听我发牢骚的朋友们，陪我度过难关的朋友们。&lt;br /&gt;
还要感谢我儿子，虽然我经常欺负他，但是他还是让我觉得小孩子是狠可爱的。&lt;br /&gt;
07年太多的不如意和牢骚，不要留给08年。明天将是另一个开始。&lt;/p&gt;
&lt;p&gt;08年就要来了，计划有很多，希望08年最后一天写总结的时候，会想到一些成绩。放一首歌吧，Action English上听到的，Travis的《Closer》&lt;/p&gt;
&lt;p&gt;里克，2007年12月31日&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/riquel-li-at-2007-end</link>
                <guid>http://liwei78.github.io/blog/riquel-li-at-2007-end</guid>
                <pubDate>2007-12-31T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>MephistoBlog使用的插件和第三方代码介绍</title>
                <description>&lt;hr /&gt;
&lt;p&gt;本篇是在 &lt;a href=&quot;http://railser.cn/archives/development-log-rails-pagnate-and-acts-as-taggable&quot;&gt;开发笔记：rails分页和acts_as_taggable插件的应用&lt;/a&gt; 一文的后半部分基础上再整理的。内容上是连贯的。&lt;/p&gt;
&lt;p&gt;在 Rails开发中，会用到很多有帮助的插件，&lt;a href=&quot;http://alexyoung.org/articles/show/40/a_taxonomy_of_rails_plugins&quot;&gt;A taxonomy of Rails plugins&lt;/a&gt;【&lt;a href=&quot;http://www.javaeye.com/topic/113929&quot;&gt;中文翻译&lt;/a&gt;】 里讲到了如何制作插件，并引用了acts_as_taggable的例子进行讲解。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.juixe.com/techknow/index.php/2006/07/05/top-11-rails-plugins/&quot;&gt;Top 11 Rails Plugins&lt;/a&gt; 里面更是讲了很多有帮助的插件。不过我更想细看一下&lt;a href=&quot;http://www.mephistoblog.com/&quot;&gt;mephisto-0.7.3&lt;/a&gt;里面的插件。&lt;br /&gt;
h3. MephistoBlog用了哪些插件&lt;/p&gt;
&lt;p&gt;看图：&lt;br /&gt;
&lt;img src=&quot;http://railser.cn/wp-content/uploads/2007/12/vender.jpg&quot; alt=&quot;vender&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://railser.cn/wp-content/uploads/2007/12/plugins.jpg&quot; alt=&quot;plugins&quot; /&gt;&lt;/p&gt;
&lt;p&gt;说话：&lt;br /&gt;
&lt;strong&gt;vender中：&lt;/strong&gt;&lt;br /&gt;
BlueCloth：&lt;a href=&quot;http://www.deveiate.org/projects/BlueCloth&quot;&gt;BlueCloth&lt;/a&gt;是一个Markdown的Ruby实现，一个提供给网页文字撰写者将文本转成HTML的工具。Markdown令你可以写出容易阅读、容易撰写的文本格式，然后将它转换成结构化的XHTML（或者HTML）。&lt;/p&gt;
&lt;p&gt;RedCloth：&lt;a href=&quot;http://code.whytheluckystiff.net/redcloth/&quot;&gt;RedCloth&lt;/a&gt;是一个令你可以在Ruby中使用Textile的模块。Textile是一个文本格式，一个非常简单的文本格式。可以将一个可读的文本转成HTML。&lt;/p&gt;
&lt;p&gt;RubyPants：是Ruby实现的“smart-quotes library SmartyPants”。RubyPants使用不同的APIs，它兼容上面两个的APIs，将ASCII的标点转换成 “smart” typographic punctuation &lt;span class=&quot;caps&quot;&gt;HTML&lt;/span&gt; entities。参考：&lt;a href=&quot;http://chneukirchen.org/blog/static/projects/rubypants.html&quot;&gt;RubyPants&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;RubyZip：rubyzip是一个ruby读写zip文件的类库。&lt;a href=&quot;http://rubyzip.sourceforge.net/&quot;&gt;&lt;span class=&quot;caps&quot;&gt;RDOC&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;TZInfo：&lt;a href=&quot;http://tzinfo.rubyforge.org/&quot;&gt;TZInfo&lt;/a&gt;是一个标准tz数据库提供不同时区的daylight savings的Ruby类库。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;plugins中：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;a_gems：小巧的Ruby Gem管理工具，它在启动时会自动的将gem/lib的路径加载到$LOAD_PATH 中。&lt;br /&gt;
它不用介绍，就几行代码。&lt;br /&gt;
bq. &lt;br /&gt;
&lt;pre lang=&quot;ruby&quot;&gt;&lt;br /&gt;
standard_dirs = [&amp;#8216;rails&amp;#8217;, &amp;#8216;plugins&amp;#8217;]&lt;br /&gt;
gems          = Dir[File.join(RAILS_ROOT, &amp;#8220;vendor/**&amp;#8221;)]&lt;br /&gt;
if gems.any?&lt;br /&gt;
  gems.each do |dir|&lt;br /&gt;
    next if standard_dirs.include?(File.basename(dir))&lt;br /&gt;
    lib = File.join(dir, &amp;#8216;lib&amp;#8217;)&lt;br /&gt;
    $LOAD_PATH.unshift(lib) if File.directory?(lib)&lt;br /&gt;
  end&lt;br /&gt;
end&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://technoweenie.stikipad.com/plugins/show/Acts+as+Attachment&quot;&gt;acts_as_attachment&lt;/a&gt;：保存附件文件到数据库或文件系统的插件。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://ar-paranoid.rubyforge.org/&quot;&gt;acts_as_paranoid&lt;/a&gt;：重写当前model的一些基础方法。当执行destroy时，设置deleted_at为当前时间。里克：意思是说它并不真正删除数据，只是加上了一个删除日期，证明该记录被删除了。它可以使你重新看到已删除的记录。对数据要求高的应用很有帮助。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://ar-versioned.rubyforge.org/&quot;&gt;acts_as_versioned&lt;/a&gt;：对一个ActiveRecord  module 进行简单的版本标注。可实现值的回滚操作。因为它为每一个create出来的记录都做了版本记录。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://weblog.techno-weenie.net/projects/dialog&quot;&gt;dialog_helper&lt;/a&gt;：一个简单的脚本，对浏览器的弹出窗口进行“装修”。&lt;/p&gt;
&lt;p&gt;filtered_column：README里啥也没写！！看文件里面，是在做格式化文本，可能是在对BlueCloth和RedCloth的一个功能进行改进。代码很多，有用过的朋友请留言。&lt;/p&gt;
&lt;p&gt;filtered_column_code_macro：增强ruby代码的高亮显示，使用了&lt;a href=&quot;http://coderay.rubychan.de/&quot;&gt;CodeRay&lt;/a&gt;库，Ruby写的做语法高亮显示的库。&lt;/p&gt;
&lt;p&gt;filtered_column_flickr_macro：flickr转换，文本编辑的加强功能。（Author::Scott Raymond）&lt;/p&gt;
&lt;p&gt;labeled_form_helper：为表单元素增加label标签。readme里有示例。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://wiki.rubyonrails.org/rails/pages/Liquid+Plugin&quot;&gt;Liquid&lt;/a&gt;：一个模板引擎。特点：可以编辑应用的外观，而且不会被执行危险代码。直接从数据库渲染模板。里克：看上去有点像django的模板语言。&lt;/p&gt;
&lt;p&gt;mephisto_converters：博客搬家程序，将&lt;a href=&quot;http://www.textpattern.com/&quot;&gt;Textpattern&lt;/a&gt;，&lt;a href=&quot;http://typo3.com/&quot;&gt;Typo&lt;/a&gt;和&lt;a href=&quot;http://wordpress.org/&quot;&gt;Wordpress&lt;/a&gt;转换成mephistoblog。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://mocha.rubyforge.org/&quot;&gt;mocha&lt;/a&gt;：Rails的一个测试套件，可以模拟和替换代码中的方法和实例，比如，你可以替换掉ActiveRecord重的实例方法，而避免在单元测试的环节操作数据库。毕竟操作数据库还是慢一些的。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://weblog.techno-weenie.net/2006/10/14/simply_bdd-update&quot;&gt;simply_bdd&lt;/a&gt;：可以在创建测试用例的时候使用上下文和代码块。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://matthewman.net/2006/09/04/new-rails-feature-simply_helpful/&quot;&gt;simply_helpful&lt;/a&gt;：新增的一些helper。加强功能。 &lt;a href=&quot;http://www.juixe.com/techknow/index.php/2007/04/03/simply-helpful-rails-plugin/&quot;&gt;Simply Helpful Rails Plugin&lt;/a&gt;里介绍的比较详细，不过一些功能已经放到2.0里面了，对于老版本，尤其是博客里提到的1.2.2的应用，可以考虑安装的。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://weblog.techno-weenie.net/2006/9/3/white-listing-plugin-for-rails&quot;&gt;white_list&lt;/a&gt;：一个html安全增强工具，可以过滤掉一些hack代码，是html更安全。&lt;/p&gt;
&lt;p&gt;ergem&lt;br /&gt;
到这里，mephisto blog的第三方代码和插件都写完了。&lt;/p&gt;
&lt;p&gt;广告一下：狂喜欢的 &lt;a href=&quot;http://www.footballmanager.net/&quot;&gt;Football Manager 2008&lt;/a&gt; 已经发了。狂好玩。我的曼城还在煎熬中，不过上个赛季最后一场比赛，客场对阿森纳，竟然无比顽强的2：1获胜。挤掉了曼联排名第四。哇哈哈哈！&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://railser.cn/wp-content/uploads/2007/12/679.png&quot; alt=&quot;man city&quot; /&gt;&lt;/p&gt;
&lt;p&gt;参考资料：&lt;br /&gt;
&lt;a href=&quot;http://www.mephistoblog.com/&quot;&gt;MephistoBlog&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://rubylib.cn/&quot;&gt;Ruby Lib中文站&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://baike.baidu.com/view/15482.htm&quot;&gt;&lt;span class=&quot;caps&quot;&gt;ASCII&lt;/span&gt;&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://lgn21st.javaeye.com/blog/135502&quot;&gt;用mocha测试rails，mock HTTPResponse&lt;/a&gt;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/mephistoblog-vender-and-plugins</link>
                <guid>http://liwei78.github.io/blog/mephistoblog-vender-and-plugins</guid>
                <pubDate>2007-12-18T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>关注:Rails上的Opensocial实现</title>
                <description>&lt;hr /&gt;
&lt;h3 style=&quot;vertical-align:middle;&quot;&gt;什么是OpenSocial&lt;/h3&gt;
&lt;p&gt;OpenSocial是一套API，具体说是由两种类型的API组成。第一种，REST 形式的API是向Social Network或其他遵循 该协议的应用，发送个人资料，好友，活动和persistence components[?]。第二种，Javascript API是以表单的形式实现第一种的REST应用。&lt;br /&gt;
h3. Rails上的OpenSocial&lt;/p&gt;
&lt;p&gt;本段译自&lt;a href=&quot;http://blog.new-bamboo.co.uk/2007/11/7/opensocial-with-ruby-on-rails&quot; target=&quot;_blank&quot;&gt;Google&amp;#8217;s OpenSocial with Ruby on Rails&lt;/a&gt;&lt;br /&gt;
根据&lt;a href=&quot;http://code.google.com/apis/opensocial/&quot;&gt;OpenSocial documentation&lt;/a&gt;上的显示，目前OpenSocial开放了2中类型资源：people，一个用户的好友，和activities，这些好友的活动/行为。这种结构正好符合rails对集中资源的理解，在一个user Controller中，我们可以狠容易的得到用户的好友和他们的活动。&lt;br /&gt;
OpenSocial的API是按照REST结构设计，但是它并不完全符合Rails的观点，首先，通过URL访问资源的形式并不是Rails的标准形式。其次，它不包含format extension，这意味着你不能直接使用respond_to块。&lt;br /&gt;
但是上面两个问题可以通过在routes文件增加一组路由描述和增加一个自定义的mimetype来解决。&lt;br /&gt;
下面的路由规则是在描述如何在我们的user_controller中对应OpenSocial 中的people资源的。&lt;br /&gt;
bq. &lt;br /&gt;
&lt;pre lang=&quot;ruby&quot;&gt;&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;config/environment.rb&lt;br /&gt;
Mime::Type.register &amp;#8220;application/x-opensocial&amp;#8221;, :opensocial&lt;/li&gt;
&lt;/ol&gt;
&lt;ol&gt;
	&lt;li&gt;config/routes.rb&lt;br /&gt;
map.opensocial_person &amp;#8216;/feeds/people/:id&amp;#8217;, :controller =&amp;gt; &amp;#8216;users&amp;#8217;, \&lt;br /&gt;
                            :action =&amp;gt; &amp;#8216;show&amp;#8217;, :format =&amp;gt; &amp;#8216;opensocial&amp;#8217;,\&lt;br /&gt;
                            :conditions =&amp;gt; {:method =&amp;gt; :get}&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;map.opensocial_person &amp;#8216;/feeds/people/:id&amp;#8217;, :controller =&amp;gt; &amp;#8216;users&amp;#8217;,\&lt;br /&gt;
                            :action =&amp;gt; &amp;#8216;update&amp;#8217;, :format =&amp;gt; &amp;#8216;opensocial&amp;#8217;, \&lt;br /&gt;
                            :conditions =&amp;gt; {:method =&amp;gt; :put}&lt;/p&gt;
&lt;p&gt;map.opensocial_person &amp;#8216;/feeds/people/:id&amp;#8217;, :controller =&amp;gt; &amp;#8216;users&amp;#8217;, \&lt;br /&gt;
                             :action =&amp;gt; &amp;#8216;destroy&amp;#8217;, :format =&amp;gt; &amp;#8216;opensocial&amp;#8217;, \&lt;br /&gt;
                             :conditions =&amp;gt; {:method =&amp;gt; :delete}&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;app/controllers/users_controller.rb&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;respond_to do |format|&lt;br /&gt;
  gem&lt;br /&gt;
  format.opensocial&lt;br /&gt;
end&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;如果上面的比较麻烦，可以&lt;a href=&quot;http://blog.nbwd.co.uk/assets/2007/11/7/opensocial_routing.tar.gz&quot;&gt;下载&lt;/a&gt;作者发的插件。这样你的route文件可以这样写：&lt;br /&gt;
bq. &lt;br /&gt;
&lt;pre lang=&quot;ruby&quot;&gt;&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;config/routes.rb&lt;br /&gt;
map.resources :users do |user|&lt;br /&gt;
  user.resources :activities&lt;br /&gt;
  user.resources :relationships&lt;br /&gt;
end&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;map.opensocial_people :users do |user|&lt;br /&gt;
  user.opensocial_friends :relationships&lt;br /&gt;
  user.opensocial_activities :activities&lt;br /&gt;
end&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;里克：google上看到的是两种资源，一种持久性方案，下面这个单元就介绍了OpenSocial Container&lt;br /&gt;
h3. OpenSocial Container&lt;/p&gt;
&lt;p&gt;本段整理自&lt;a href=&quot;http://www.elctech.com/2007/12/1/opensocial-whats-that&quot; target=&quot;_blank&quot;&gt;OpenSocial? What&amp;#8217;s that?&lt;/a&gt;&lt;br /&gt;
&lt;strong&gt;OpenSocial Application&lt;/strong&gt;&lt;br /&gt;
OpenSocial Application使用XML文档来最终render[一个狠程序化的词，我感觉应该不翻译为好]给用户。这个xml包含了metadata，html，和javascript。下面是Last.fm上的OpenSocial应用。&lt;br /&gt;
&lt;a href=&quot;http://www.last.fm/opensocial/myfavouritemusic.xml&quot;&gt;http://www.last.fm/opensocial/myfavouritemusic.xml&lt;/a&gt;&lt;br /&gt;
&lt;blockquote style=&quot;overflow: scroll&quot;&gt;&lt;br /&gt;
&lt;pre lang=&quot;xml&quot;&gt;&lt;br /&gt;
&amp;lt; ?xml version=&amp;#8220;1.0&amp;#8221; encoding=&amp;#8220;&lt;span class=&quot;caps&quot;&gt;UTF&lt;/span&gt;-8&amp;#8221;?&amp;gt;&lt;br /&gt;
&lt;module&gt;&lt;br /&gt;
  &lt;moduleprefs title=&quot;My Favorite Music&quot;&gt;&lt;br /&gt;
    &lt;require feature=&quot;opensocial-0.5&quot; /&gt;&lt;br /&gt;
    &lt;require feature='setprefs' /&gt;&lt;br /&gt;
    &lt;require feature='dynamic-height' /&gt;&lt;/p&gt;
&lt;/moduleprefs&gt;
&lt;content type=&quot;html&quot;&gt;
&amp;lt; ![&lt;span class=&quot;caps&quot;&gt;CDATA&lt;/span&gt;[
&lt;div id=&quot;overlord&quot;&gt;
    &lt;div id=&quot;loading&quot;&gt;Loadinggem&lt;/div&gt;
    &lt;div id=&quot;updating&quot; style=&quot;display:none;&quot;&gt;Updatinggem&lt;/div&gt;
    &lt;div id=&quot;area&quot;&gt;&lt;/div&gt;
&lt;div id=&quot;lastfmAccount&quot; class=&quot;lastfmAccount&quot;&gt;
&lt;div id=&quot;hadALastfmAccount&quot; style=&quot;display:none;&quot; class=&quot;strongLinks&quot;&gt;
p. &lt;a id=&quot;haveAccountLink&quot; href=&quot;javascript:;&quot; onclick=&quot;$('setUsername').toggle();_IG_AdjustIFrameHeight();new Effect.ScrollTo('setUsername');return false;&quot;&gt;Have a Last.fm account? Click here.&lt;/a&gt;
&lt;/div&gt;
&lt;form id=&quot;setUsername&quot; style=&quot;display:none;&quot;&gt;
&lt;input type=&quot;text&quot; id=&quot;username&quot; /&gt;
&lt;input type=&quot;submit&quot; value=&quot;That's me!&quot; /&gt;
&lt;span id=&quot;cancelChangeUsername&quot;&gt;| &lt;a href=&quot;javascript:;&quot; class=&quot;cancel&quot; id=&quot;&quot;&gt;cancel&lt;/a&gt;&lt;/span&gt;
&lt;/form&gt;
&lt;/div&gt;
    &lt;div id=&quot;placeholder&quot;&gt;&lt;/div&gt;
&lt;style&gt;
@import url(http://cdn.last.fm/opensocial/main.5.css);
@import url(http://cdn.last.fm/opensocial/canvas.1.css);
&lt;/style&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;http://cdn.last.fm/javascript/lib/prototype.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;http://cdn.last.fm/javascript/lib/scriptaculous.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;http://cdn.last.fm/javascript/source/flashplayer_inline.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;http://cdn.last.fm/javascript/11/flashpreview.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;http://cdn.last.fm/opensocial/lfm.2.js&quot;&gt;&lt;/script&gt;
]]&amp;gt;
&lt;/content&gt;
&lt;/module&gt;
&lt;p&gt;&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;OpenSocial Container&lt;/strong&gt;&lt;br /&gt;
OpenSocial Container的设计，是用来给网站提供用户的选择，配置，加强网站的用户应用，尤其在用户属性页面。OpenSocial Container需要能够理解XMl文件格式，并实现OpenSocial Javascript API。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;OpenSocial Container如何工作&lt;/strong&gt;&lt;br /&gt;
里克：下面的话还在捉摸&lt;br /&gt;
The OpenSocial Container boils down quite simply to an &lt;span class=&quot;caps&quot;&gt;IFRAME&lt;/span&gt; with the text of the &lt;content&gt; element from the application&amp;#8217;s &lt;span class=&quot;caps&quot;&gt;XML&lt;/span&gt; dumped in to the body. One difficulty for building a container is dealing with the security risks of exposing cookies set by the &amp;#8220;Host Network&amp;#8221; to the Application&amp;#8217;s content, since the Host is doing the embedding. To ensure privacy and a certain degree of security the Container needs to originate from a different domain name than the Host. By doing this the Host/Container (they are the same entity) trick the browser into protecting the Host cookies from the Container&amp;#8217;s (and thus the Application&amp;#8217;s) Javascript.&lt;/content&gt;&lt;/p&gt;
&lt;p&gt;The Container also makes extensive use of &lt;span class=&quot;caps&quot;&gt;AJAX&lt;/span&gt; to request data from the Host/Container. This is how the Application gets access to the profile, friendship, activities, and persistence information.&lt;br /&gt;
&lt;strong&gt;为什么这么做？我们要注意什么？&lt;/strong&gt;&lt;br /&gt;
OpenSocial standardizes social networking APIs. That alone is not particularly novel. But this is Google we&amp;#8217;re talking about here. With that kind of backing and buzz this may stick. As a developer this means that you only need to learn one &lt;span class=&quot;caps&quot;&gt;API&lt;/span&gt; to be able to build social applications. One particularly interesting aspect of the OpenSocial &lt;span class=&quot;caps&quot;&gt;API&lt;/span&gt; is the persistence layer. Using this portion of the &lt;span class=&quot;caps&quot;&gt;API&lt;/span&gt; a developer can, quite easily, create a full featured interactive application which is entirely self contained in a single static &lt;span class=&quot;caps&quot;&gt;XML&lt;/span&gt; file. All of the persistence and communication is handled by the Container and the Host. Now that is cool.&lt;/p&gt;
&lt;p&gt;If this takes off like is appears to be poised to do, then we could be in for some excitement akin to the growth and fragmentation of the early social networks; except this will be happing above the social network layer. One interesting possible side effect will be a growth in the popularity of niche social networks. OpenSocial appears to lower the castle walls of the established networks. I expect the crossover in data and user-base between networks will skyrocket as once &amp;#8220;proprietary&amp;#8221; profile data becomes easily moved and shared.&lt;br /&gt;
h3. 下载OpenSocial Container 0.2.0&lt;/p&gt;
&lt;p&gt;ruby script/plugin install&lt;br /&gt;
http://opensocial.rubyforge.org/svn/plugin/tags/0_2_0/opensocial_container&lt;br /&gt;
h3. 下载OpenSocial Container 0.3.0&lt;/p&gt;
&lt;p&gt;ruby script/plugin install&lt;br /&gt;
http://opensocial.rubyforge.org/svn/plugin/tags/0_3_0/opensocial_container&lt;/p&gt;
&lt;p&gt;注：&lt;br /&gt;
本文将继续整理相关内容，有想法的朋友请留言，万分感谢。&lt;br /&gt;
本文有很多东西第一次接触，有不妥的地方，如果您愿意指出帮助我提高，劳烦留言。我会认真查找您的提示。&lt;br /&gt;
目前正在看OpenSocial Container 0.2/3.0的源码&lt;br /&gt;
林肯公园的歌简直成了我的精神支柱了。&lt;/p&gt;
&lt;p&gt;参考资料：&lt;br /&gt;
&lt;a href=&quot;http://elctech.com/2007/12/3/opensocial-container-0-2-0&quot;&gt;OpenSocial Container&lt;br /&gt;
0.2.0&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://elctech.com/2007/12/7/opensocial-container-0-3-0&quot;&gt;OpenSocial Container 0.3.0&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.elctech.com/2007/12/1/opensocial-whats-that&quot;&gt;OpenSocial? What&amp;#8217;s that?&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://blog.new-bamboo.co.uk/2007/11/7/opensocial-with-ruby-on-rails&quot;&gt;Google&amp;#8217;s OpenSocial with Ruby on Rails&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://code.google.com/apis/opensocial/&quot;&gt;OpenSocial&lt;/a&gt;&lt;br /&gt;
其他：&lt;br /&gt;
&lt;a href=&quot;http://www.railsjitsu.com/installing-and-configuring-nginx-and-mongrel-for-rails&quot;&gt;Installing and Configuring Nginx and Mongrel for Rails&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://blog.new-bamboo.co.uk/2007/11/20/database-optimization-for-rails-apps&quot;&gt;Database Optimization for Rails Apps&lt;/a&gt;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/opensocial-with-ruby-on-rails</link>
                <guid>http://liwei78.github.io/blog/opensocial-with-ruby-on-rails</guid>
                <pubDate>2007-12-04T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>在Flex和Rails上实现发布/订阅的消息通信</title>
                <description>&lt;hr /&gt;
&lt;p&gt;原文：&lt;a href=&quot;http://flexonrails.net/?p=83&quot;&gt;Publish\Subscribe Messaging with Flex and Rails using Apache ActiveMQ, ActiveMessaging, and &lt;span class=&quot;caps&quot;&gt;STOMP&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这是一篇综合性应用很强的文章，介绍如何在&lt;a href=&quot;http://rubyonrails.org/&quot;&gt;Rails&lt;/a&gt;和&lt;a href=&quot;http://labs.adobe.com/technologies/flex/&quot;&gt;flex&lt;/a&gt;的基础上，使用&lt;a href=&quot;http://activemq.apache.org/&quot;&gt;ActiveMQ&lt;/a&gt;，Rails上的&lt;a href=&quot;http://code.google.com/p/activemessaging/wiki/ActiveMessaging&quot;&gt;ActiveMessaging&lt;/a&gt;插件，和&lt;a href=&quot;http://stomp.codehaus.org/&quot;&gt;&lt;span class=&quot;caps&quot;&gt;STOMP&lt;/span&gt;&lt;/a&gt;协议，创建一个发布/订阅的通信模式。这里使用了一个例子来讲解，flex客户端/终端(consumer)接受Rails服务端发送的消息(messages)。&lt;/p&gt;
&lt;p&gt;里克：其实这就是用Rails和flex来实现java上的JMS。java上的东西好久没有看过了。所以在继续学习下面的东西，最好还是看看《&lt;a href=&quot;http://blog.csdn.net/lifaming15/archive/2007/08/22/1754926.aspx&quot;&gt;JMS简介&lt;/a&gt;》吧。&lt;br /&gt;
bq.  &lt;acronym title=&quot;Java Message Service&quot;&gt;&lt;span class=&quot;caps&quot;&gt;JMS&lt;/span&gt;&lt;/acronym&gt;是访问企业消息系统的标准API,它便于消息系&lt;br /&gt;
统中的Java应用程序进行消息交换,并且通过提供标准的产生、发送、接收消息的接口简化企业应用的开发。&lt;br /&gt;
下面介绍一下本文要使用的各种技术：&lt;br /&gt;
h3. &lt;a href=&quot;http://activemq.apache.org/&quot;&gt;Apache ActiveMQ&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Apache ActiveMQ受欢迎的，强大的通信代理[Message Broker]。&lt;br /&gt;
它快速，支持多种语言的客户端和协议，拥有许多高级特性，并完全支持JMS 1.1 和 J2EE 1.4。&lt;br /&gt;
Apache ActiveMQ 在Apache 2.0 License下发布。&lt;br /&gt;
h3. &lt;a href=&quot;http://code.google.com/p/activemessaging/wiki/ActiveMessaging&quot;&gt;ActiveMessaging&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;ActiveMessaging将Rails带入到消息驱动开发[Messaging]中。消息驱动，或叫事件驱动结构[event-driven architecture]，广泛的应用于企业级集成。这下面的框架包括java的JMS，产品包括ActiveMQ，Tibco，IBM MQSeries等。&lt;br /&gt;
h3. &lt;a href=&quot;http://stomp.codehaus.org/&quot;&gt;&lt;span class=&quot;caps&quot;&gt;STOMP&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;ActiveMessaging支持Stomp协议。这是一个通过无线连接，使用TCP/IP，实现文本型消息流式传输的协议标准。其设计理念要求尽可能将协议简化，以求无论利用哪种语言开发客户端或服务端，都能相当轻松（比如Ruby Stomp客户端代码，连带注释和空行，总行数仅约400）。因此，它几乎可以集成任何系统。[摘自《Rails ActiveMessaging入门》]&lt;br /&gt;
h3. 需要&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
	&lt;li&gt;Ruby 1.8.6&lt;/li&gt;
	&lt;li&gt;Rails 1.2.3&lt;/li&gt;
	&lt;li&gt;ava 1.5.0_07+&lt;/li&gt;
	&lt;li&gt;MySQL(或其他支持&lt;a href=&quot;http://api.rubyonrails.org/classes/ActiveRecord/Migration.html&quot;&gt;Rails Migrations&lt;/a&gt;的数据库)&lt;/li&gt;
&lt;/ul&gt;

		&lt;ol&gt;
			&lt;li&gt;源文件&lt;/li&gt;
		&lt;/ol&gt;&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.flexonrails.net/bits/flex_sales_report.zip&quot;&gt;Flex Application&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.flexonrails.net/bits/rails_sales_report.zip&quot;&gt;Rails Application&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

		&lt;ol&gt;
			&lt;li&gt;创建Rails应用&lt;/li&gt;
		&lt;/ol&gt;&lt;p&gt;里克：创建一个叫sales_report的应用，具体的创建可以参照源码，或者按照自己的喜好啦。&lt;/p&gt;
&lt;p&gt;主要的是：&lt;br /&gt;
bq.  script/generate model sale&lt;br /&gt;
001_create_sales.rb的代码：&lt;br /&gt;
bq. &lt;br /&gt;
&lt;pre lang=&quot;ruby&quot;&gt;&lt;br /&gt;
  def self.up&lt;br /&gt;
    create_table :sales do |t|&lt;br /&gt;
      t.column :customer, :string&lt;br /&gt;
      t.column :product, :string&lt;br /&gt;
      t.column :quantity, :integer&lt;br /&gt;
    end&lt;br /&gt;
  end&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;创建一个controller&lt;br /&gt;
bq.  script/generate controller sales index&lt;br /&gt;
sales_controller.rb代码&lt;br /&gt;
bq. &lt;br /&gt;
&lt;pre lang=&quot;ruby&quot;&gt;&lt;br /&gt;
class SalesController &amp;lt; ApplicationController&lt;br /&gt;
  scaffold :sale&lt;br /&gt;
end&lt;/pre&gt;&lt;br /&gt;
&lt;pre&gt;&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;下面要开始ActiveMessaging的部分了。&lt;br /&gt;
$ gem install daemons&lt;br /&gt;
$ gem install stomp&lt;br /&gt;
$ script/plugin install&lt;br /&gt;
http://activemessaging.googlecode.com/svn/trunk/plugins/activemessaging&lt;/p&gt;
&lt;p&gt;来创建一个ActiveMessaging 的processor，其实本案并不需要一个proccessor，但是它会为我们创建一些其他的文件。&lt;br /&gt;
$ script/generate processor sale&lt;br /&gt;
create  app/processors&lt;br /&gt;
create  app/processors/sale_processor.rb&lt;br /&gt;
create  test/functional/sale_processor_test.rb&lt;br /&gt;
create  config/messaging.rb&lt;br /&gt;
create  config/broker.yml&lt;br /&gt;
create  app/processors/application.rb&lt;br /&gt;
create  script/poller&lt;/p&gt;
&lt;p&gt;打开config/broker.yml ，编辑stomp adapter&lt;br /&gt;
&lt;pre&gt;&lt;br /&gt;
development:&lt;br /&gt;
   adapter:&lt;br /&gt;
   stomplogin: &amp;quot;&amp;quot;&lt;br /&gt;
   passcode: &amp;quot;&amp;quot;&lt;br /&gt;
   host: localhost&lt;br /&gt;
   port: 61613&lt;br /&gt;
   reliable: false&lt;/pre&gt;&lt;br /&gt;
打开config/messaging.rb 文件&lt;br /&gt;
bq. &lt;br /&gt;
&lt;pre lang=&quot;ruby&quot;&gt;&lt;br /&gt;
ActiveMessaging::Gateway.define do |s|&lt;br /&gt;
  s.destination :sale_queue, &amp;#8216;/queue/Sale&amp;#8217;&lt;br /&gt;
end&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;下面我们对sale model 创建一个&lt;a href=&quot;http://api.rubyonrails.org/classes/ActiveRecord/Observer.html&quot;&gt;Observer&lt;/a&gt;。&lt;br /&gt;
$ script/generate observer sale&lt;br /&gt;
bq. &lt;br /&gt;
&lt;pre lang=&quot;ruby&quot;&gt;&lt;br /&gt;
require &amp;#8216;activemessaging/processor&amp;#8217;&lt;br /&gt;
class SaleObserver &amp;lt; ActiveRecord::Observer&lt;br /&gt;
  include ActiveMessaging::MessageSender&lt;br /&gt;
  publishes_to :sale_queue&lt;/p&gt;
def after_save(sale)
record = sale.to_xml
publish :sale_queue, record
end
&lt;p&gt;end&lt;/pre&gt;&lt;br /&gt;
&lt;/pre&gt;&lt;br /&gt;
这个类监视着sale model，当保存一条记录时，after_save方法被调用，这个方法将sale的AR实例转换成xml格式，发送到sale_queue中。&lt;br /&gt;
最后，启动我们的rails服务。&lt;br /&gt;
$ script/server&lt;br /&gt;
h3. 安装 ActiveMQ&lt;/p&gt;
&lt;p&gt;很简单&lt;br /&gt;
1、&lt;a href=&quot;http://people.apache.org/repo/m2-snapshot-repository/org/apache/activemq/apache-activemq/5.0-SNAPSHOT/&quot;&gt;先看看这个&lt;/a&gt;&lt;br /&gt;
2、&lt;a href=&quot;http://activemq.apache.org/getting-started.html#GettingStarted-PreInstallationRequirements&quot;&gt;这有其他的一些介绍&lt;/a&gt;&lt;br /&gt;
h3. flex应用和STOMP AS3客户端&lt;/p&gt;
&lt;p&gt;使flex和ActiveMQ 通信，需要使用STOMP 协议，这有篇文章：&lt;a href=&quot;http://docs.codehaus.org/display/STOMP/Flash&quot;&gt;ActionScript 3 &lt;span class=&quot;caps&quot;&gt;STOMP&lt;/span&gt; client&lt;/a&gt;，这里我们需要做的是用flex通过STOMP连接上ActiveMQ，并能解释[consume]rails发布的xml文件。&lt;/p&gt;
&lt;p&gt;这是重要的一段代码：&lt;br /&gt;
bq. &lt;br /&gt;
&lt;pre lang=&quot;actionscript&quot;&gt;&lt;br /&gt;
private var sales : ArrayCollection = new ArrayCollection();&lt;/p&gt;
&lt;p&gt;private var stomp : STOMPClient = new STOMPClient();&lt;br /&gt;
private var queue : String = &amp;#8220;/queue/Sale&amp;#8221;;&lt;/p&gt;
&lt;p&gt;private function init () : void&lt;br /&gt;
{&lt;br /&gt;
	stomp.connect(&amp;#8220;localhost&amp;#8221;, 61613);&lt;br /&gt;
	stomp.subscribe( queue );&lt;/p&gt;
&lt;p&gt;stomp.addEventListener(MessageEvent.&lt;span class=&quot;caps&quot;&gt;MESSAGE&lt;/span&gt;, handleMessages);&lt;br /&gt;
	stomp.addEventListener(ReceiptEvent.&lt;span class=&quot;caps&quot;&gt;RECIEPT&lt;/span&gt;, handleReceipts);&lt;br /&gt;
	stomp.addEventListener(STOMPErrorEvent.&lt;span class=&quot;caps&quot;&gt;ERROR&lt;/span&gt;, handleErrors);&lt;/p&gt;
&lt;p&gt;}&lt;/p&gt;
&lt;p&gt;private function handleMessages(event : MessageEvent) : void&lt;br /&gt;
{&lt;br /&gt;
	var incomingMsg : &lt;span class=&quot;caps&quot;&gt;XML&lt;/span&gt; = &lt;acronym title=&quot;event.message.body&quot;&gt;&lt;span class=&quot;caps&quot;&gt;XML&lt;/span&gt;&lt;/acronym&gt;;&lt;br /&gt;
	var processedSale : ObjectProxy = simplerXMLDecoder(incomingMsg);&lt;br /&gt;
	orders.addItem(processedSale);&lt;br /&gt;
}&lt;/p&gt;
&lt;p&gt;private function handleReceipts (event : ReceiptEvent) : void&lt;br /&gt;
{&lt;br /&gt;
	trace (&amp;quot;Got receipt: &amp;quot; + event.receiptID)&lt;br /&gt;
}&lt;br /&gt;
private function handleErrors (event : STOMPErrorEvent) : void&lt;br /&gt;
{&lt;br /&gt;
	trace (&amp;quot;Error: &amp;quot; + event.error.body)&lt;br /&gt;
}&lt;/p&gt;
&lt;p&gt;private function simplerXMLDecoder (x : &lt;span class=&quot;caps&quot;&gt;XML&lt;/span&gt;) : ObjectProxy&lt;br /&gt;
{&lt;br /&gt;
	var xdoc : XMLDocument =  new XMLDocument();&lt;br /&gt;
	xdoc.ignoreWhite = true;&lt;br /&gt;
	xdoc.parseXML(x.toXMLString());&lt;br /&gt;
	var decoder : SimpleXMLDecoder =  new SimpleXMLDecoder(true);&lt;br /&gt;
	return decoder.decodeXML(XMLNode(xdoc.firstChild)) as ObjectProxy;&lt;br /&gt;
}&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;代码解释：&lt;br /&gt;
1、在开始的时候，我们创建了一个STOMPClient&lt;br /&gt;
2、接下来我们定义了queue，这是我们的订阅地址，就是在messaging.rb中定义的那个。&lt;br /&gt;
3、在这个应用加载的时候，init()方法会自动调用，它会自动连接STOMP代理(ActiveMQ)，然后订阅[subscribe]这个地址。&lt;br /&gt;
4、这样我们就建立了一个检查来自ActiveMQ信息的监听。&lt;/p&gt;
&lt;p&gt;所有实际的action操作，都是传递到handleMessages方法里：&lt;br /&gt;
1、当Rails应用在产生并发送一个xml是调用handleMessages 方法&lt;br /&gt;
2、当接受到一个新信息时，我们对这个信息体[body of the message](实际上是rails发送过来的xml)，使用XMLDecoder 类转化成一个可绑定对象[bindable ObjectProxy]。&lt;br /&gt;
3、最后，一个新的销售记录增加到销售集合中，并展示在flex的数据表格中。&lt;br /&gt;
h3. 运行一下试试&lt;/p&gt;
&lt;p&gt;http://localhost:3000/sales/new&lt;br /&gt;
&lt;a href=&quot;http://railser.cn/wp-content/uploads/2007/11/rails_sales_report.png&quot; title=&quot;rails_sales_report.png&quot;&gt;&lt;img src=&quot;http://railser.cn/wp-content/uploads/2007/11/rails_sales_report.png&quot; alt=&quot;rails_sales_report.png&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;在你的flex中可以看到&lt;br /&gt;
&lt;a href=&quot;http://railser.cn/wp-content/uploads/2007/11/flex_sales_report.png&quot; title=&quot;flex_sales_report.png&quot;&gt;&lt;img src=&quot;http://railser.cn/wp-content/uploads/2007/11/flex_sales_report.png&quot; alt=&quot;flex_sales_report.png&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;当一个销售记录保存到数据库后，SaleObserver 发布这个消息，ActiveMQ 将这个发布给flex应用。&lt;/p&gt;
&lt;p&gt;当把你的init()方法改成下面的样子的时候&lt;br /&gt;
bq. &lt;br /&gt;
&lt;pre lang=&quot;ruby&quot;&gt;&lt;br /&gt;
private function init () : void&lt;br /&gt;
{&lt;br /&gt;
        var ch : ConnectHeaders =  new ConnectHeaders();&lt;br /&gt;
	ch.clientID = &amp;#8220;&lt;span class=&quot;caps&quot;&gt;MYTOTALLYUNIQUECLIENTID&lt;/span&gt;&amp;#8221;;&lt;br /&gt;
	stomp.connect(&amp;#8220;localhost&amp;#8221;, 61613, ch);&lt;/p&gt;
&lt;p&gt;var sh : SubscribeHeaders = new SubscribeHeaders();&lt;br /&gt;
	sh.amqSubscriptionName = &amp;#8220;&lt;span class=&quot;caps&quot;&gt;MYSUBSCRIPTION&lt;/span&gt;&amp;#8221;;&lt;br /&gt;
	stomp.subscribe( queue, sh );&lt;/p&gt;
&lt;p&gt;stomp.addEventListener(MessageEvent.&lt;span class=&quot;caps&quot;&gt;MESSAGE&lt;/span&gt;, handleMessages);&lt;br /&gt;
	stomp.addEventListener(ReceiptEvent.&lt;span class=&quot;caps&quot;&gt;RECIEPT&lt;/span&gt;, handleReceipts);&lt;br /&gt;
	stomp.addEventListener(STOMPErrorEvent.&lt;span class=&quot;caps&quot;&gt;ERROR&lt;/span&gt;, handleErrors);&lt;br /&gt;
}&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;当连接的时候增加一个clientID和在订阅的时候增加一个subscriptionName，我们创建了一个永久的订阅者[durable subscriber]。&lt;br /&gt;
好了，可以再次运行看一下效果了。&lt;/p&gt;
&lt;p&gt;本文中文翻译：里克，guxing203 at gmail dot com，http://railser.cn&lt;/p&gt;
&lt;p&gt;参考资料：&lt;br /&gt;
&lt;a href=&quot;http://blog.csdn.net/pengrg166/archive/2006/12/31/1471435.aspx&quot;&gt;Apache Geronimo 的 &lt;span class=&quot;caps&quot;&gt;JMS&lt;/span&gt; 实现：ActiveMQ  &lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.blogjava.net/cctvx1/archive/2007/02/08/98835.html&quot;&gt;ActiveMQ 实践之路(一) 启动你的ActiveMQ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://activemq.apache.org/&quot;&gt;http://activemq.apache.org/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://code.google.com/p/activemessaging/wiki/ActiveMessaging&quot;&gt;ActiveMessaging is a messaging framework for Ruby and Ruby on Rails&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.infoq.com/cn/articles/intro-active-messaging-rails&quot;&gt;Rails ActiveMessaging入门&lt;/a&gt;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/publish-subscribe-messaging-with-flex-and-rails</link>
                <guid>http://liwei78.github.io/blog/publish-subscribe-messaging-with-flex-and-rails</guid>
                <pubDate>2007-11-03T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>惊艳：adobe’s thermo视频演示</title>
                <description>&lt;hr /&gt;




&lt;pre&gt;
第一部分：
&amp;lt;object height=&quot;355&quot; width=&quot;425&quot;&amp;gt;
&amp;lt;param name=&quot;movie&quot; value=&quot;http://www.youtube.com/v/lGdr3dCmxe4&amp;amp;rel=1&quot;&amp;gt;&amp;lt;/param&amp;gt;
&amp;lt;param name=&quot;wmode&quot; value=&quot;transparent&quot;&amp;gt;&amp;lt;/param&amp;gt;&amp;lt;embed src=&quot;http://www.youtube.com/v/lGdr3dCmxe4&amp;amp;rel=1&quot; type=&quot;application/x-shockwave-flash&quot; wmode=&quot;transparent&quot; height=&quot;355&quot; width=&quot;425&quot;&amp;gt;&amp;lt;/embed&amp;gt;&amp;lt;/object&amp;gt;
第二部分：
&amp;lt;object height=&quot;355&quot; width=&quot;425&quot;&amp;gt;
&amp;lt;param name=&quot;movie&quot; value=&quot;http://www.youtube.com/v/d9IjZJ0D_bo&amp;amp;rel=1&quot;&amp;gt;&amp;lt;/param&amp;gt;
&amp;lt;param name=&quot;wmode&quot; value=&quot;transparent&quot;&amp;gt;&amp;lt;/param&amp;gt;&amp;lt;embed src=&quot;http://www.youtube.com/v/d9IjZJ0D_bo&amp;amp;rel=1&quot; type=&quot;application/x-shockwave-flash&quot; wmode=&quot;transparent&quot; height=&quot;355&quot; width=&quot;425&quot;&amp;gt;&amp;lt;/embed&amp;gt;&amp;lt;/object&amp;gt;
第三部分：
&amp;lt;object height=&quot;355&quot; width=&quot;425&quot;&amp;gt;
&amp;lt;param name=&quot;movie&quot; value=&quot;http://www.youtube.com/v/lsfOe_MCEbg&amp;amp;rel=1&quot;&amp;gt;&amp;lt;/param&amp;gt;
&amp;lt;param name=&quot;wmode&quot; value=&quot;transparent&quot;&amp;gt;&amp;lt;/param&amp;gt;&amp;lt;embed src=&quot;http://www.youtube.com/v/lsfOe_MCEbg&amp;amp;rel=1&quot; type=&quot;application/x-shockwave-flash&quot; wmode=&quot;transparent&quot; height=&quot;355&quot; width=&quot;425&quot;&amp;gt;&amp;lt;/embed&amp;gt;&amp;lt;/object&amp;gt;
&lt;/pre&gt;
&lt;p&gt;Thermo:创建RIA的工具，可以让你的工艺图(artwork )通过点击鼠标转换成可工作组件(working components)。看完整个介绍，只能说：太帅了。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/2007/10/thermomain.png&quot; title=&quot;thermo&quot;&gt;&lt;img src=&quot;http://railser.cn/wp-content/uploads/2007/10/thermomain.png&quot; alt=&quot;thermo&quot; /&gt;&lt;/a&gt;&lt;br /&gt;
上图是时间轴的设计，和flash中做按钮效果很像。用于展示每一张图片。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/2007/10/thermoa.png&quot; title=&quot;thermoa.png&quot;&gt;&lt;img src=&quot;http://railser.cn/wp-content/uploads/2007/10/thermoa.png&quot; alt=&quot;thermoa.png&quot; /&gt;&lt;/a&gt;&lt;br /&gt;
上图的出现，立刻赢得了一片掌声。鼠标右键的转换，将原来设计的标签，转成了一个文本输入框。帅！&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/2007/10/thermob.png&quot; title=&quot;thermob.png&quot;&gt;&lt;img src=&quot;http://railser.cn/wp-content/uploads/2007/10/thermob.png&quot; alt=&quot;thermob.png&quot; /&gt;&lt;/a&gt;&lt;br /&gt;
上图，设计单个展示元素的文字说明&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/2007/10/thermoc.png&quot; title=&quot;thermoc.png&quot;&gt;&lt;img src=&quot;http://railser.cn/wp-content/uploads/2007/10/thermoc.png&quot; alt=&quot;thermoc.png&quot; /&gt;&lt;/a&gt;&lt;br /&gt;
又是一片掌声，给一个滚动条指定展示内容！&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/2007/10/thermod.png&quot; title=&quot;thermod.png&quot;&gt;&lt;img src=&quot;http://railser.cn/wp-content/uploads/2007/10/thermod.png&quot; alt=&quot;thermod.png&quot; /&gt;&lt;/a&gt;&lt;br /&gt;
像photoshop一样设计界面。&lt;/p&gt;
&lt;p&gt;里克：本文写给一个女人。&lt;/p&gt;
&lt;p&gt;相关网站：&lt;a href=&quot;http://aralbalkan.com/1050&quot;&gt;http://aralbalkan.com/1050&lt;/a&gt;&lt;br /&gt;
&lt;pre&gt;&lt;br /&gt;
&lt;script type=&quot;text/javascript&quot;&gt;&lt;!--
google_ad_client = &quot;pub-7545275883969710&quot;;
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = &quot;336x280_as&quot;;
google_ad_type = &quot;text_image&quot;;
google_ad_channel = &quot;&quot;;
//--&gt;
&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;
  src=&quot;http://pagead2.googlesyndication.com/pagead/show_ads.js&quot;&gt;
&lt;/script&gt;
&lt;/pre&gt;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/adobe-thermo-cool-video-show</link>
                <guid>http://liwei78.github.io/blog/adobe-thermo-cool-video-show</guid>
                <pubDate>2007-10-31T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>用Rails校验使你的密码更“坚固”</title>
                <description>&lt;hr /&gt;
&lt;p&gt;原文：&lt;a href=&quot;http://blog.vixiom.com/2006/08/12/rails-validation-make-sure-your-user-passwords-are-strong/&quot; target=&quot;_blank&quot;&gt;Rails validation make sure your user passwords are strong&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;里克：很短小的一篇文章， 不过对于正则表达式有点晕的我，还是很有用的，所以留着这里做一个笔记吧。&lt;/p&gt;
&lt;p&gt;文章里使用了正则进行密码校验:&lt;br /&gt;
bq. &lt;br /&gt;
&lt;pre lang=&quot;ruby&quot;&gt;&lt;br /&gt;
def password_valid?&lt;br /&gt;
  self.password =~ /^(?=.&lt;strong&gt;d)(?=.&lt;/strong&gt;[a-z])(?=.&lt;strong&gt;[A-Z])(?!.&lt;/strong&gt;s).{8,15}$/&lt;br /&gt;
end&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;校验内容：&lt;br /&gt;
&lt;ol&gt;&lt;br /&gt;
	&lt;li&gt;8-15位长度&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;至少含有一个大写字母&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;至少含有一个小写字母&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;至少含有一个数字&lt;/li&gt;&lt;br /&gt;
	&lt;li&gt;it also checks that there&amp;#8217;s no *funky*characters &amp;#8216;(?!.*\s)&amp;#8217;&lt;/li&gt;&lt;/p&gt;
&lt;/ol&gt;
&lt;p&gt;越狱第三季不会真的播不到最终结局吧？我发现里面的演员真的演技一流啊。贴第一季的视频列表，没事喜欢就看看。&lt;br /&gt;
&lt;pre&gt;&lt;br /&gt;
&lt;object height=&quot;423&quot; width=&quot;488&quot;&gt;&lt;br /&gt;
&lt;param name=&quot;movie&quot; alue=&quot;http://www.tudou.com/player/playlist.swf?lid=1677308&quot;&gt;&lt;/param&gt;&lt;br /&gt;
&lt;param name=&quot;allowscriptaccess&quot; value=&quot;always&quot;&gt;&lt;/param&gt;&lt;embed src=&quot;http://www.tudou.com/player/playlist.swf?lid=1677308&quot; type=&quot;application/x-shockwave-flash&quot; height=&quot;423&quot; width=&quot;488&quot;&gt;&lt;/embed&gt;&lt;/object&gt;&lt;/pre&gt;&lt;br /&gt;
广告时间，目前是2.65美元，等到50美元就可以给&lt;a href=&quot;http://blog.sina.com.cn/lyon07&quot;&gt;李猪猪&lt;/a&gt;买玩具啦！！&lt;br /&gt;
&lt;pre&gt;&lt;br /&gt;
&lt;script type=&quot;text/javascript&quot;&gt; &lt;!--
google_ad_client = &quot;pub-7545275883969710&quot;;
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = &quot;336x280_as&quot;;
google_cpa_choice = &quot;CAEQ5uL_xwMaCBmlrR19qOK7KMbF9coB&quot;;
//--&gt; &lt;/script&gt;
&lt;script src=&quot;http://pagead2.googlesyndication.com/pagead/show_ads.js&quot; type=&quot;text/javascript&quot;&gt; &lt;/script&gt;&lt;/pre&gt;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/rails-validation-make-sure-your-user-passwords-are-strong</link>
                <guid>http://liwei78.github.io/blog/rails-validation-make-sure-your-user-passwords-are-strong</guid>
                <pubDate>2007-10-22T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>在Rails中使用Flash Remoting中文教程</title>
                <description>&lt;hr /&gt;
&lt;p&gt;原文：[Flash Remoting for Rails Tutorial](http://blog.vixiom.com/2006/08/23/flash-remoting-for-rails-tutorial/)&lt;/p&gt;
&lt;p&gt;里克：1、Flash Remoting从flash player6就开始了，Flex Client是个新家伙。2、Flash Remoting如何翻译？我想翻译为flash远程。&lt;/p&gt;
&lt;p&gt;在我们使用Rails的时候，可能会忽视掉另一个开发工具：Flash Remoting。长期的使用xml，可能会改变你的编程习惯。就像作者引用的那句话：&amp;quot;If all you have is a hammer everything looks like a nail&amp;quot;。Remoting可以直接向flash传递对象，数组。Remoting使用AMF(Active Message Format)传递byte流，这比使用xml要快很多。&lt;/p&gt;
&lt;p&gt;而且在06年8月，&lt;a href=&quot;http://www.themidnightcoders.com/&quot;&gt;Midnight Coders&lt;/a&gt;发布了他们的WebORB插件。&lt;/p&gt;
&lt;p&gt;他们的例子是基于Flex2的，这需要客户端安装Flash player9.0，这并不有好，因为Remoting在Flash player6中就已经开始使用了。所以这里我们只拿我们需要的。&lt;/p&gt;
&lt;p&gt;如果你之前没有使用过Flash Remoting，请先安装&lt;a href=&quot;http://www.adobe.com/products/flashremoting/downloads/components/&quot;&gt;Remoting Components&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;这里我们制作一个flash的mp3播放器，用rails作为后端服务。&lt;a href=&quot;http://blog.vixiom.com/uploads/mp3app.zip&quot;&gt;点击这里&lt;/a&gt;，你可以下载这个例子的代码。&lt;/p&gt;
&lt;p&gt;创建一个应用：mp3app&lt;br /&gt;
bq. &lt;br /&gt;
&lt;pre lang=&quot;ruby&quot;&gt;&lt;br /&gt;
&amp;gt; rails mp3app&lt;br /&gt;
&amp;gt; cd mp3app&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;安装weborb插件&lt;br /&gt;
bq. &lt;br /&gt;
&lt;pre lang=&quot;ruby&quot;&gt;&lt;br /&gt;
&amp;gt; ruby script/plugin install http://themidnightcoders.net:8089/svn/weborb&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;创建一个名为‘mp3app_development’的数据库&lt;br /&gt;
bq. &lt;br /&gt;
&lt;pre lang=&quot;ruby&quot;&gt;&lt;br /&gt;
&lt;span class=&quot;caps&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;TABLE&lt;/span&gt; `tracks` (&lt;br /&gt;
  `id` int(11) &lt;span class=&quot;caps&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;NULL&lt;/span&gt; auto_increment,&lt;br /&gt;
  `title` varchar(50) &lt;span class=&quot;caps&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;NULL&lt;/span&gt; default &amp;#8216;&amp;#8217;,&lt;br /&gt;
  `artist` varchar(50) &lt;span class=&quot;caps&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;NULL&lt;/span&gt; default &amp;#8217;&amp;#8217;,&lt;br /&gt;
  `album_art` varchar(50) &lt;span class=&quot;caps&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;NULL&lt;/span&gt; default &amp;#8216;&amp;#8217;,&lt;br /&gt;
  `filename` varchar(50) &lt;span class=&quot;caps&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;NULL&lt;/span&gt; default &amp;#8217;&amp;#8217;,&lt;br /&gt;
  &lt;span class=&quot;caps&quot;&gt;PRIMARY&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;KEY&lt;/span&gt;  (`id`)&lt;br /&gt;
) &lt;span class=&quot;caps&quot;&gt;ENGINE&lt;/span&gt;=MyISAM &lt;span class=&quot;caps&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;CHARSET&lt;/span&gt;=latin1;&lt;/p&gt;
&lt;p&gt;insert into `tracks` values&lt;br /&gt;
(&amp;#8216;1&amp;#8217;,&amp;#8216;After Midnight&amp;#8217;,&amp;#8216;Eric Clapton&amp;#8217;,&amp;#8216;clapton.jpg&amp;#8217;,&amp;#8216;AfterMidnight.mp3&amp;#8217;),&lt;br /&gt;
 (&amp;#8216;2&amp;#8217;,&amp;#8216;Midnight Train to Georgia&amp;#8217;,&amp;#8216;Gladys Knight&amp;#8217;,&amp;#8216;gladys.jpg&amp;#8217;,&lt;br /&gt;
&amp;#8216;MidnightTrainToGeorgia.mp3&amp;#8217;),&lt;br /&gt;
 (&amp;#8216;3&amp;#8217;,&amp;#8216;Midnight In A Perfect World&amp;#8217;,&amp;#8216;DJ Shadow&amp;#8217;,&amp;#8216;shadow.jpg&amp;#8217;,&lt;br /&gt;
&amp;#8216;MidnightInAPerfectWorld.mp3&amp;#8217;),&lt;br /&gt;
 (&amp;#8216;4&amp;#8217;,&amp;#8216;Two Minutes to Midnight&amp;#8217;,&amp;#8216;Iron Maiden&amp;#8217;,&amp;#8216;maiden.jpg&amp;#8217;,&lt;br /&gt;
&amp;#8216;TwoMinutesToMidnight.mp3&amp;#8217;);&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;创建‘Track’model&lt;br /&gt;
bq. &lt;br /&gt;
&lt;pre lang=&quot;ruby&quot;&gt;&lt;br /&gt;
&amp;gt; ruby script/generate model Track&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;在‘app/services’目录下创建一个Remoting services服务，文件为：&amp;#8217;TrackService.rb&amp;#8217;&lt;br /&gt;
bq. &lt;br /&gt;
&lt;pre lang=&quot;ruby&quot;&gt;&lt;br /&gt;
require &amp;#8216;weborb/context&amp;#8217;&lt;br /&gt;
require &amp;#8216;rbconfig&amp;#8217;&lt;/p&gt;
&lt;p&gt;class TrackService&lt;br /&gt;
   def getTracks&lt;br /&gt;
     tracks = Track.find(:all)&lt;br /&gt;
   end&lt;br /&gt;
end&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;如果你曾经用过&lt;a href=&quot;http://amfphp.org/&quot;&gt;&lt;span class=&quot;caps&quot;&gt;AMFPHP&lt;/span&gt;&lt;/a&gt;或者.net下的Remoting，上面的这个服务端可以说是“相当”简单了。但是你可以运行测试一下。&lt;/p&gt;
&lt;p&gt;下面进入到我们的Flash。&lt;br /&gt;
对于Flash应用，有几个*框架*可供选择，比如&lt;a href=&quot;http://ariaware.com/products/arp/&quot;&gt;&lt;span class=&quot;caps&quot;&gt;ARP&lt;/span&gt;&lt;/a&gt;和 &lt;a href=&quot;http://www.iterationtwo.com/open_source_cairngorm.html&quot;&gt;Cairngorn&lt;/a&gt;。但是在我们这个应用上，他们显得太过强大了。我们可以写一个自己的轻量级的框架。这是一种MVC框架，Model是一个Remoting Class，用来和后台程序沟通(&lt;span class=&quot;caps&quot;&gt;PHP&lt;/span&gt;, .&lt;span class=&quot;caps&quot;&gt;NET&lt;/span&gt;, 或者 我们的 Rails) ，一个.fla的controller，和一个View class。&lt;br /&gt;
M 和 V 在 C 的控制下进行事件相应与处理，而其他的类来扩展其他的功能。&lt;/p&gt;
&lt;p&gt;基本的Remoting是这样：&lt;br /&gt;
bq. &lt;br /&gt;
&lt;pre lang=&quot;actionscript&quot;&gt;&lt;br /&gt;
import mx.remoting.Service;&lt;br /&gt;
import mx.services.Log;&lt;br /&gt;
import mx.remoting.PendingCall;;&lt;br /&gt;
import mx.rpc.RelayResponder;&lt;br /&gt;
import mx.rpc.FaultEvent;&lt;br /&gt;
import mx.rpc.ResultEvent;&lt;br /&gt;
import mx.remoting.debug.NetDebug;&lt;br /&gt;
import mx.utils.Delegate;&lt;/p&gt;
&lt;p&gt;class com.vixiom.remoting.Remoting&lt;br /&gt;
{&lt;br /&gt;
    private var gatewayURL:String;&lt;br /&gt;
    private var servicePath:String;&lt;/p&gt;
private var svc:Service;
function dispatchEvent() {};
function addEventListener() {};
function removeEventListener() {};
/**
&lt;ul&gt;
	&lt;li&gt;Constructor&lt;br /&gt;
    *&lt;/li&gt;
	&lt;li&gt;@param      gURL    gatewayURL&lt;/li&gt;
	&lt;li&gt;@param      sp      service path&lt;/li&gt;
	&lt;li&gt;@param      u       username&lt;/li&gt;
	&lt;li&gt;@param      p       password&lt;br /&gt;
    *&lt;br /&gt;
    */&lt;br /&gt;
    public function Remoting(gURL, sp, u, p)&lt;br /&gt;
    {&lt;br /&gt;
        gatewayURL = gURL;&lt;br /&gt;
        servicePath = sp;&lt;/li&gt;
&lt;/ul&gt;
// initialize as a broadcaster
mx.events.EventDispatcher.initialize(this);
// create a new service
svc = new Service (gatewayURL, null, servicePath, null, null);
// credentials
if (u != undefined &amp;amp;&amp;amp; p != undefined) {
svc.connection.setCredentials(u, p);
}
}
/**
&lt;ul&gt;
	&lt;li&gt;Global fault event&lt;br /&gt;
    */&lt;br /&gt;
    function handleRemotingError(fault:FaultEvent):Void&lt;br /&gt;
    {&lt;br /&gt;
        mx.remoting.debug.NetDebug.trace({level:&amp;#8220;None&amp;#8221;,&lt;br /&gt;
        message:&amp;quot;Error: &amp;quot; +&lt;br /&gt;
        fault.fault.faultstring });&lt;br /&gt;
    }&lt;/li&gt;
&lt;/ul&gt;
/**
&lt;ul&gt;
	&lt;li&gt;Event dispatcher&lt;br /&gt;
    *&lt;/li&gt;
	&lt;li&gt;@param      d       data&lt;/li&gt;
	&lt;li&gt;@param      et      eventType&lt;br /&gt;
    *&lt;br /&gt;
    */&lt;br /&gt;
    function dispatch(d, et)&lt;br /&gt;
    {&lt;br /&gt;
        // broadcast message&lt;br /&gt;
        var eventObj:Object={target:this,type:et}&lt;br /&gt;
        eventObj.data = d;&lt;br /&gt;
        dispatchEvent(eventObj);&lt;br /&gt;
    }&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;}&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;基本的View Class是这样：&lt;br /&gt;
bq. &lt;br /&gt;
&lt;pre lang=&quot;actionscript&quot;&gt;&lt;br /&gt;
import mx.utils.Delegate;&lt;/p&gt;
&lt;p&gt;class com.vixiom.view.View&lt;br /&gt;
{&lt;br /&gt;
    private var target:MovieClip;&lt;/p&gt;
function dispatchEvent() {};
function addEventListener() {};
function removeEventListener() {};
/**
&lt;ul&gt;
	&lt;li&gt;Constructor&lt;br /&gt;
    *&lt;/li&gt;
	&lt;li&gt;@param  t   target (target timeline: _root || a mc)&lt;br /&gt;
    */&lt;br /&gt;
    public function View (t:MovieClip)&lt;br /&gt;
    {&lt;br /&gt;
        target = t;&lt;/li&gt;
&lt;/ul&gt;
// initialize as a broadcaster
mx.events.EventDispatcher.initialize(this);
}
/**
&lt;ul&gt;
	&lt;li&gt;Event dispatcher&lt;br /&gt;
    *&lt;/li&gt;
	&lt;li&gt;@param      d       data&lt;/li&gt;
	&lt;li&gt;@param      et      eventType&lt;br /&gt;
    *&lt;br /&gt;
    */&lt;br /&gt;
    function dispatch(d, et)&lt;br /&gt;
    {&lt;br /&gt;
        // broadcast message&lt;br /&gt;
        var eventObj:Object={target:this,type:et}&lt;br /&gt;
        eventObj.data = d;&lt;br /&gt;
        dispatchEvent(eventObj);&lt;br /&gt;
    }&lt;br /&gt;
}&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;里克：看到这个时候，我看了一下源代码。as文件的存放是按照类似java的形式。所以下面的话就好理解了。我对as的知识为0.&lt;/p&gt;
&lt;p&gt;在这个MP3 player中，我用下面的方法扩充一下Remoting class。你可以不必把你的类放到这个packages里面，当然那样做更利于管理。&lt;br /&gt;
&lt;pre lang=&quot;actionscript&quot;&gt;&amp;#8216;var pc:PendingCall = this.svc.getTracks();&amp;#8217;&lt;/pre&gt;&lt;br /&gt;
一句是再远程调用Rails，这和TrackService.rb 类里面的&amp;#8217;getTracks&amp;#8217;是一样的。我的类中有一个tracks对象，它直接接收ruby的&amp;#8217;tracks = re.result;&amp;#8217;。我注释了&amp;#8217;this.svc.connection.setCredentials(u, p);&amp;#8217;一行，因为它在创建一个安全的远程调用。最后一行&amp;#8217;dispatch(tracks, &amp;#8220;onGetTracks&amp;#8221;);&amp;#8217; 将数据传递给view。&lt;br /&gt;
bq. &lt;br /&gt;
&lt;pre lang=&quot;actionscript&quot;&gt;&lt;br /&gt;
import mx.remoting.&lt;strong&gt;;&lt;br /&gt;
import mx.rpc.&lt;/strong&gt;;&lt;/p&gt;
&lt;p&gt;class com.vixiom.remoting.RemotingMp3&lt;br /&gt;
extends com.vixiom.remoting.Remoting&lt;br /&gt;
{&lt;br /&gt;
    // tracks holder object&lt;br /&gt;
    private var tracks:Object;&lt;/p&gt;
////////////////////////////////////////////////////////////////
//
// Constructor (gatewayURL, servicePath, userid, password)
//
////////////////////////////////////////////////////////////////
public function RemotingMp3 (gURL, sp, u, p)
{
super(gURL, sp);
// this.svc.connection.setCredentials(u, p);
}
////////////////////////////////////////////////////////////////
//
// Get tracks with handler (onGetTracks)
//
////////////////////////////////////////////////////////////////
public function getTracks()
{
trace(&amp;#8220;// getting tracks&amp;#8221;)
// create a pending call out to rails
var pc:PendingCall = this.svc.getTracks();
// create a responder to handle the return from rails
pc.responder = new RelayResponder(this,
&amp;#8220;onGetTracks&amp;#8221;,
&amp;#8220;handleRemotingError&amp;#8221;);
}
public function onGetTracks (re:ResultEvent)
{
if (re != undefined)
{
trace(&amp;#8220;// onGetTracks broadcaster &amp;#8211; Word!&amp;#8221;)
// put result in recordset
tracks = re.result;
// trace for testing
for (var i = 0; i &amp;lt; tracks.length; i++) {
trace(tracks[i].title);
}
// dispatch event to the view
dispatch(tracks, &amp;#8220;onGetTracks&amp;#8221;);
}
}
&lt;p&gt;}&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;下面是controller的代码，需要注意的是，‘Rmp3’是我扩展的Remoting class的实例。它有两个参数，一个是WebORB geteway url，一个是在app/services中的&amp;#8217;TrackService&amp;#8217;类。我还没有展示扩展的view class，controller里已经产生了一个‘Vmp3’实例，&lt;u&gt;with the _root of the Flash file as it&amp;#8217;s parameter (it uses that as a target). &lt;/u&gt;。下面四行是view中的按钮方法，最后一行调用远程方法，这是这个app的entry point&lt;u&gt;(as it&amp;#8217;s pretty useless sans data)&lt;/u&gt;。&lt;br /&gt;
bq. &lt;br /&gt;
&lt;pre lang=&quot;actionscript&quot;&gt;&lt;br /&gt;
// import remoting, view, and debug&lt;br /&gt;
import mx.remoting.debug.NetDebug;&lt;br /&gt;
import mx.utils.Delegate;&lt;br /&gt;
import com.vixiom.remoting.RemotingMp3;&lt;br /&gt;
import com.vixiom.view.ViewMp3;&lt;/p&gt;
&lt;p&gt;// ini debug&lt;br /&gt;
NetDebug.initialize ();&lt;/p&gt;
&lt;p&gt;iniApp();&lt;/p&gt;
&lt;p&gt;// setup and start&lt;br /&gt;
function iniApp()&lt;br /&gt;
{&lt;br /&gt;
    // create remoting &amp;amp; view objects&lt;br /&gt;
    var Rmp3:RemotingMp3    = new RemotingMp3 (&lt;br /&gt;
    &amp;#8220;http://localhost:3000/weborb&amp;#8221;,&lt;br /&gt;
    &amp;#8220;TrackService&amp;#8221;); // weborb gateway, ruby class name&lt;br /&gt;
    var Vmp3:ViewMp3        = new ViewMp3 (_root);&lt;/p&gt;
// set up listeners
Rmp3.addEventListener (&amp;#8220;onGetTracks&amp;#8221;,
Delegate.create (Vmp3, Vmp3.onGetTracks));
pause_btn.onRelease = Delegate.create(Vmp3, Vmp3.pauseTrack);
play_btn.onRelease  = Delegate.create(Vmp3, Vmp3.playTrack);
prev_btn.onRelease  = Delegate.create(Vmp3, Vmp3.previousTrack);
next_btn.onRelease  = Delegate.create(Vmp3, Vmp3.nextTrack);
// start the app, get the tracks
Rmp3.getTracks();
&lt;p&gt;}&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;下面是扩展的view，相当复杂，而且和rails及Remoting没什么关系，所以看一下它的注释，就能明白它的意思了。里克：我就不贴了，看类名就知道它在哪了。&lt;br /&gt;
bq. &lt;br /&gt;
&lt;pre lang=&quot;actionscript&quot;&gt;&lt;br /&gt;
class com.vixiom.view.ViewMp3 extends com.vixiom.view.View&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;就是这样了，不过要注意一下&lt;a href=&quot;http://www.adobe.com/cfusion/knowledgebase/index.cfm?id=tn_14213&quot;&gt;跨域安全问题&lt;/a&gt;，尤其是当你的rails应用在一台服务器上，而Flash文件在另一台服务器上的时候。&lt;/p&gt;
&lt;p&gt;里克，07年10月23日，Railser.cn&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/flash-remoting-for-rails-tutorial-chinese</link>
                <guid>http://liwei78.github.io/blog/flash-remoting-for-rails-tutorial-chinese</guid>
                <pubDate>2007-10-22T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>Railser.cn重新开通了。</title>
                <description>&lt;hr /&gt;
&lt;p&gt;需要用些时间将以前的文章整理一下。&lt;/p&gt;
&lt;p&gt;本博客继续坚持以前的想法，发表一些个人翻译，编写和整理的技术文章 。希望能够和更多朋友交流技术问题。&lt;/p&gt;
&lt;p&gt;我还在学习Rails和Ruby技术，同时承担一些开发项目。发表的文章也多来自于当前研究的题目。&lt;/p&gt;
&lt;p&gt;像姚明说的那样：“少说话，多做事。”&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;update 2013-9-2&lt;/p&gt;
&lt;p&gt;很感动，这个博客快6年了。当年坚持，是因为我知道它可以让我达到一种高度，现在，我知道这是一种什么高度了。&lt;/p&gt;
&lt;p&gt;我会继续努力的。&lt;/p&gt;
&lt;p&gt;还有，姚明已经退役2年了，我很怀念养病的日子里，看他打球的每一天。那些日子里，才感知到什么是坚持。&lt;/p&gt;
&lt;p&gt;来句歌词吧：超人不会飞，不要问我哭过了没，因为超人不能流眼泪。周杰伦，《超人不会飞》。&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/railsercn-return-now</link>
                <guid>http://liwei78.github.io/blog/railsercn-return-now</guid>
                <pubDate>2007-10-19T00:00:00+08:00</pubDate>
        </item>

        <item>
                <title>Flex与Rails的性感结合</title>
                <description>&lt;hr /&gt;
&lt;p&gt;前面写过一个简单的&lt;a href=&quot;http://hi.baidu.com/%D0%C7203/blog/item/70e4c918dc468cb74bedbc5a.html&quot; target=&quot;_blank&quot;&gt;博文&lt;/a&gt;，介绍了一下flex与rails结合的进展。今天看到另一个好消息，《Flexible Rails：Flex 3 on Rails 2》一书将要问世了。作者：Peter Armstrong。目前网上已经可以&lt;a href=&quot;http://manning.com/armstrong/&quot; target=&quot;_blank&quot;&gt;买到PDF版本&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/2007/10/armstrong_cover150.jpg&quot; title=&quot;Flexible Rails&quot;&gt;&lt;img src=&quot;http://railser.cn/wp-content/uploads/2007/10/armstrong_cover150.jpg&quot; alt=&quot;Flexible Rails&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;只要看看这本书的目录部分，喜欢flex和rails的朋友就会感到兴奋：&lt;/p&gt;
&lt;p&gt;1. Why are we here? Where are we going?&lt;br /&gt;
2. Hello World&lt;br /&gt;
3. Getting started&lt;br /&gt;
4. Creating the Main Flex UI&lt;br /&gt;
5. Expanding the Rails code&lt;br /&gt;
6. Flex on Rails&lt;br /&gt;
7. Validation&lt;br /&gt;
8. Refactoring to RESTful Rails development&lt;br /&gt;
9. Refactoring to Cairngorm&lt;br /&gt;
10. Holding State on the client properly&lt;br /&gt;
11. Finishing the application&lt;br /&gt;
12. Rails on &lt;span class=&quot;caps&quot;&gt;AIR&lt;/span&gt; (Adobe Integrated Runtime)&lt;/p&gt;
&lt;p&gt;Appendix A. How to use Subversion with Flex and Rails&lt;br /&gt;
Appendix B. Handwaving at omitted topics&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.flexiblerails.com/files/FlexibleRailsPreview.pdf&quot; target=&quot;_blank&quot;&gt;下载本书试读pdf&lt;/a&gt;    &lt;a href=&quot;http://www.flexiblerails.com/code-samples&quot; target=&quot;_blank&quot;&gt;下载本书源代码&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;很想趁着人民币升值的时候买一本仔细看看，不过在花钱之前，我们还是可以看看其他网站的一些关于flex和rails的介绍。&lt;br /&gt;
h3. WebORB for Ruby on Rails&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/2007/10/blue_rails.jpg&quot; title=&quot;weborb&quot;&gt;&lt;img src=&quot;http://railser.cn/wp-content/uploads/2007/10/blue_rails.jpg&quot; alt=&quot;weborb&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;WebORB是连接远程flash/flex客户端和Ruby on Rails应用的服务器端技术。WebORB可以以插件形式安装在任何Rails应用中，以提供Ruby类进行远程服务。WebORB提供完整的adobe AMF0和AMF3通信协议支持远程flash和flex客户端。&lt;/p&gt;
&lt;p&gt;Rails安装WebORB插件，flex客户端如同请求Data Services server一样访问该插件（当前版本仅支持RPC子系统），远程flash应用连接WebORB和连接flash远程入口方法也是一样的。该插件接收和处理来自flex或者flash客户端的远程请求，然后调用部署在rails应用中的ruby类。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://railser.cn/wp-content/uploads/2007/10/585f43f466aa85e47709d774jpg.gif&quot;&gt;&lt;img src=&quot;http://railser.cn/wp-content/uploads/2007/10/585f43f466aa85e47709d774jpg.gif&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;下一篇博文会对教程进行笔记。&lt;br /&gt;
h3. 不过有一个疑惑，什么是AMF3？&lt;/p&gt;
&lt;p&gt;Flash 5开始就可以以XML或者“变量/值”配对输出格式向服务器传送数据。虽然这些数据能通过Flash编译器自动解析或者通过开发人员自行编写的代码手动解析, 但解析的速度慢。因为在解析过程中，XML需要按节点逐层处理数据。而且使用XML和“变量/值”配对格式处理的数据类型只能是字符型，数字也不例外。而 Flash Remoting却能处理复杂数据类型, 比如对象、结构、数组，甚至可以是数据集，配合DataGrid组件可以很方便地显示数据。&lt;/p&gt;
&lt;p&gt;为了处理复杂数据类型，采用一种独有的方式使Flash与应用服务器间可以来回传送数据势在必行。于是AMF应运而生。AMF是Adobe独家开发出来的通信协议，它采用二进制压缩，序列化、反序列化、传输数据，从而为Flash 播放器与Flash Remoting网关通信提供了一种轻量级的、高效能的通信方式。如下图所示。&lt;br /&gt;
&lt;a href=&quot;http://railser.cn/wp-content/uploads/2007/10/0941010.gif&quot; title=&quot;amf&quot;&gt;&lt;img src=&quot;http://railser.cn/wp-content/uploads/2007/10/0941010.gif&quot; alt=&quot;amf&quot; /&gt;&lt;/a&gt;&lt;br /&gt;
AMF最大的特色在于可直接将Flash内置对象，例如Object, Array, Date, XML，传回服务器端，并且在服务器端自动进行解析成适当的对象，这就减轻了开发人员繁复工作，同时也更省了开发时间。由于AMF采用二进制编码，这种方式可以高度压缩数据，因此非常适合用来传递大量的资料。数据量越大，Flash Remoting的传输效能就越高，远远超过Web Service。至于XML, LoadVars和loadVariables() ，它们使用纯文本的传输方式，效能就更不能与Flash Remoting相提并论了。&lt;/p&gt;
&lt;p&gt;注意：Flash Remoting需要浏览器支持Binary POST，Flash 播放器在Netscape 6.&amp;#215;.环境下运行Flash Remoting会不起作用（Flash Remoting调用没有效果也不返回错误）， Netscape 7已经纠正了这个bug 。对于早期Safari和Chimera版的苹果机也有这个问题。&lt;/p&gt;
&lt;p&gt;同样是轻量级数据交换协议，同样是通过调用远程服务，同样是基于标准的HTTP和HTTPS协议， Flash Remoting为什么选择了使用AMF而放弃了SOAP与Flash 播放器通信呢? 有如下原因：&lt;/p&gt;
&lt;p&gt;1. SOAP将数据处理成XML格式，相对于二进制的AFM太冗长了；&lt;br /&gt;
2. AMF能更有效序列化数据；因为AMF的初衷只是为了支持Flash ActionScript的数据类型，而SOAP却致力于提供更广泛的用途；&lt;br /&gt;
3. AMF支持Flash 播放器 6只需要浏览器增加4 KB左右（压缩后）的大小，而SOAP就大多了；&lt;br /&gt;
4. &lt;span class=&quot;caps&quot;&gt;SOAP&lt;/span&gt; 的一些头部文件请求在Flash 播放器 6不支持。那Flash 播放器 6为什么能访问基于SOAP的Web服务呢？原来Flash Remoting网关将SOAP请求在服务器端与转换成AFM格式，然后利用AFM与Flash 播放器通信。另外，AMF包中包含onResult事件（比如说response事件）和onStatus事件（比如说error事件），这些事件对象在 Flash中可以直接使用。&lt;/p&gt;
&lt;p&gt;AMF从Flash MX时代的AMF0发展到现在的AMF3。AMF3用作Flash Playe 9的ActionScript 3.0的默认序列化格式，而AMF0则用作旧版的ActionScript 1.0和2.0的序列化格式。在网络传输数据方面，AMF3比AMF0更有效率。AMF3能将int和uint对象作为整数（integer）传输，并且能序列化 ActionScript 3.0才支持的数据类型, 比如ByteArray，XML和Iexternalizable。[里克：摘自网上，作者不详]&lt;br /&gt;
h3. Ruby &lt;span class=&quot;caps&quot;&gt;AMF&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;参考网站最后是网站地址&lt;br /&gt;
RubyAMF是开源的flash远程应用网关/方法(英文:gateway)。其RubyamfLite是独立的应用服务，可不依赖rails。RubyamfRails为rails插件，可以对rails controller的flash远程调用进行REST形式的AMF response。&lt;/p&gt;
&lt;p&gt;Railser.cn，07年10月20日编辑&lt;/p&gt;
&lt;p&gt;参考网站：&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.flexiblerails.com/&quot; target=&quot;_blank&quot;&gt;Flexible Rails&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://flexonrails.net/&quot; target=&quot;_blank&quot;&gt;flexonrails.net&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.themidnightcoders.com/weborb/rubyonrails/index.htm&quot; target=&quot;_blank&quot;&gt;WebORB for Ruby on Rails &lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://osflash.org/documentation/amf3&quot; target=&quot;_blank&quot;&gt;AMF3 Specification&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.rubyamf.org/&quot; target=&quot;_blank&quot;&gt;Ruby &lt;span class=&quot;caps&quot;&gt;AMF&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;</description>
                <link>http://liwei78.github.io/blog/flex-on-rails-preview</link>
                <guid>http://liwei78.github.io/blog/flex-on-rails-preview</guid>
                <pubDate>2007-10-19T00:00:00+08:00</pubDate>
        </item>


</channel>
</rss>
